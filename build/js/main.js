"use strict";function closeModal(){document.getElementsByClassName("modal-wrap_active")[0].classList.remove("modal-wrap_active"),document.getElementsByClassName("blur")[0].classList.remove("blur"),document.body.style.overflow="auto"}document.addEventListener("DOMContentLoaded",function(){document.getElementsByClassName("header-menu__switcher")[0].addEventListener("click",function(){document.getElementsByClassName("header-menu")[0].classList.toggle("header-menu_active")})},!1),document.addEventListener("DOMContentLoaded",function(){var h=document.getElementsByClassName("knob__control")[0],t=document.getElementsByClassName("knob")[0],g=document.getElementsByClassName("knob__value")[0],_=Array.from(document.getElementsByClassName("tick")),n=void 0,s=void 0,o=void 0,i=void 0,y=void 0,a=void 0,l=void 0,L=228,p=function(){for(var e=["transform","msTransform","webkitTransform","mozTransform","oTransform"],t=0;t<e.length;t++){var n=e[t];if(void 0!==document.body.style[n])return n}}();Math.dist=function(e,t,n,s){return n||(n=0),s||(s=0),Math.sqrt((n-e)*(n-e)+(s-t)*(s-t))};var r=function(e,t,n,s){if(10<Math.dist(n,s,e,t)&&(a=Math.atan2(s-t,n-e)*(180/Math.PI),0<(L=0<(l=a<0?360+a:a)&&l<120?l+240:l-120)&&L<=303))return function(){h.style[p]="rotate("+L+"deg)";var e=!0,t=!1,n=void 0;try{for(var s,o=_[Symbol.iterator]();!(e=(s=o.next()).done);e=!0)s.value.classList.remove("active")}catch(e){t=!0,n=e}finally{try{!e&&o.return&&o.return()}finally{if(t)throw n}}if((y=Math.round(L/2.6))<=0){var i=!0,a=!1,l=void 0;try{for(var r,c=_.slice(0,1)[Symbol.iterator]();!(i=(r=c.next()).done);i=!0)r.value.classList.add("active")}catch(e){a=!0,l=e}finally{try{!i&&c.return&&c.return()}finally{if(a)throw l}}}else{var d=!0,m=!1,u=void 0;try{for(var v,f=_.slice(0,y)[Symbol.iterator]();!(d=(v=f.next()).done);d=!0)v.value.classList.add("active")}catch(e){m=!0,u=e}finally{try{!d&&f.return&&f.return()}finally{if(m)throw u}}}g.innerHTML="+"+Math.ceil(.3*Math.round(L/300*100))}()};t.onmousedown=function(e){n=t.getBoundingClientRect().left+t.clientWidth/2,s=t.getBoundingClientRect().top+t.clientHeight/2,document.onmousemove=function(e){o=window.event.clientX,i=window.event.clientY,r(n,s,o,i)},document.onmouseup=function(){document.onmousemove=null,t.onmouseup=null},t.ondragstart=function(){return!1}},t.ontouchstart=function(e){n=t.getBoundingClientRect().left+t.clientWidth/2,s=t.getBoundingClientRect().top+t.clientHeight/2,document.ontouchmove=function(e){o=e.changedTouches[0].clientX,i=e.changedTouches[0].clientY,r(n,s,o,i)}}},!1),document.addEventListener("DOMContentLoaded",function(){for(var e=document.getElementsByClassName("device-filter__item"),t=0;t<e.length;t++)e[t].addEventListener("click",function(){var e=document.getElementsByClassName("device-filter__item");if(this.classList.contains("device-filter__item_active"))if(this.classList.contains("device-filter__item_show"))for(var t=0;t<e.length;t++)e[t].classList.remove("device-filter__item_show");else for(t=0;t<e.length;t++)e[t].classList.add("device-filter__item_show");else{document.getElementsByClassName("device-filter__item_active")[0].classList.remove("device-filter__item_active"),this.classList.add("device-filter__item_active");for(t=0;t<e.length;t++)e[t].classList.remove("device-filter__item_show")}})},!1),document.addEventListener("DOMContentLoaded",function(){for(var n=document.getElementsByClassName("modal-trigger"),e=function(t){n[t].addEventListener("click",function(){var e=String(n[t].getAttribute("data-modal"));document.getElementsByClassName(e)[0].classList.add("modal-wrap_active"),document.getElementsByClassName("wrap")[0].classList.add("blur"),document.body.style.overflow="hidden"})},t=0;t<n.length;t++)e(t)},!1);var container=void 0,step=void 0,promStep=void 0,nextPosition=void 0;function scrollTo(n){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,s=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1e3,o=n.scrollLeft,i=e-o,a=0;!function e(){a+=20;var t=Math.easeInOutQuad(a,o,i,s);n.scrollLeft=t,a<s&&setTimeout(e,20)}()}function scrollNext(e,t){container=document.getElementsByClassName(e)[0],step=container.hasAttribute("offset")?container.clientWidth-parseInt(container.getAttribute("offset")):container.clientWidth,promStep=Math.ceil(container.scrollLeft/step),nextPosition=Number.isInteger(Math.ceil(container.scrollLeft)/step)?(promStep+1)*step:promStep*step,scrollTo(container,nextPosition,500)}function scrollPrev(e){container=document.getElementsByClassName(e)[0],step=container.hasAttribute("offset")?container.clientWidth-parseInt(container.getAttribute("offset")):container.clientWidth,promStep=Math.floor(container.scrollLeft/step),nextPosition=Number.isInteger(container.scrollLeft/step)?(promStep-1)*step:promStep*step,scrollTo(container,nextPosition,500)}function filterSelection(e){var t,n;for(t=document.getElementsByClassName("card_horisontal-filter"),"all"==e&&(e=""),n=0;n<t.length;n++)w3RemoveClass(t[n],"card_horisontal-filter-show"),-1<t[n].className.indexOf(e)&&w3AddClass(t[n],"card_horisontal-filter-show")}function w3AddClass(e,t){var n,s,o;for(s=e.className.split(" "),o=t.split(" "),n=0;n<o.length;n++)-1==s.indexOf(o[n])&&(e.className+=" "+o[n])}function w3RemoveClass(e,t){var n,s,o;for(s=e.className.split(" "),o=t.split(" "),n=0;n<o.length;n++)for(;-1<s.indexOf(o[n]);)s.splice(s.indexOf(o[n]),1);e.className=s.join(" ")}Math.easeInOutQuad=function(e,t,n,s){return(e/=s/2)<1?n/2*e*e+t:-n/2*(--e*(e-2)-1)+t},document.addEventListener("DOMContentLoaded",function(){for(var i=document.getElementsByClassName("scroll-block"),e=function(e){var t=i[e],n=Array.prototype.slice.call(document.getElementsByClassName(String(t.dataset.controls))),s=n[0].getElementsByClassName("scroll-control__next")[0].getElementsByClassName("svg-scroll-arrow")[0],o=n[0].getElementsByClassName("scroll-control__prev")[0].getElementsByClassName("svg-scroll-arrow")[0];t.scrollWidth==t.clientWidth&&n[0].remove(),i[e].onscroll=function(){this.scrollWidth==this.scrollLeft+this.clientWidth?(s.classList.remove("svg-scroll-arrow_active"),o.classList.add("svg-scroll-arrow_active")):0==this.scrollLeft?(s.classList.add("svg-scroll-arrow_active"),o.classList.remove("svg-scroll-arrow_active")):(s.classList.add("svg-scroll-arrow_active"),o.classList.add("svg-scroll-arrow_active"))}},t=0;t<i.length;t++)e(t);document.getElementsByClassName("favor-cards")[0].onscroll=function(){var e=document.getElementsByClassName("arrow-reminder")[0];0==this.scrollTop?e.classList.remove("arrow-reminder_inactive"):e.classList.add("arrow-reminder_inactive")}},!1),filterSelection("all"),document.addEventListener("DOMContentLoaded",function(){for(var e=document.getElementsByClassName("select-filter__item"),t=0;t<e.length;t++)e[t].addEventListener("click",function(){this.parentElement.getElementsByClassName("select-filter__item_active")[0].classList.remove("select-filter__item_active"),this.classList.add("select-filter__item_active")})},!1);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImhlYWRlci1tZW51LmpzIiwibW9kYWwuanMiLCJrbm9iLmpzIiwibW9iaWxlLXNlbGVjdC5qcyIsInNjcm9sbC5qcyIsInNlbGVjdC5qcyJdLCJuYW1lcyI6WyJjbG9zZU1vZGFsIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50c0J5Q2xhc3NOYW1lIiwiY2xhc3NMaXN0IiwicmVtb3ZlIiwiYm9keSIsInN0eWxlIiwib3ZlcmZsb3ciLCJhZGRFdmVudExpc3RlbmVyIiwidG9nZ2xlIiwia25vYiIsImtub2JhcmVhIiwiY3VyciIsInRpY2tzIiwiQXJyYXkiLCJmcm9tIiwiY2VudGVyWCIsImNlbnRlclkiLCJtb3VzZVgiLCJtb3VzZVkiLCJhY3RpdmVzIiwiYSIsInBsdXNBbmdsZSIsImFuZ2xlIiwidHJhbnNmb3JtIiwiX2FyciIsIl9pIiwibGVuZ3RoIiwicHJvcCIsIk1hdGgiLCJkaXN0IiwieDEiLCJ5MSIsIngyIiwieTIiLCJzcXJ0IiwicmlnaHRBbmdsZSIsImF0YW4yIiwiUEkiLCJfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uIiwiX2RpZEl0ZXJhdG9yRXJyb3IiLCJfaXRlcmF0b3JFcnJvciIsInVuZGVmaW5lZCIsIl9zdGVwIiwiX2l0ZXJhdG9yIiwiU3ltYm9sIiwiaXRlcmF0b3IiLCJuZXh0IiwiZG9uZSIsInZhbHVlIiwiZXJyIiwicmV0dXJuIiwicm91bmQiLCJfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uMiIsIl9kaWRJdGVyYXRvckVycm9yMiIsIl9pdGVyYXRvckVycm9yMiIsIl9zdGVwMiIsIl9pdGVyYXRvcjIiLCJzbGljZSIsImFkZCIsIl9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24zIiwiX2RpZEl0ZXJhdG9yRXJyb3IzIiwiX2l0ZXJhdG9yRXJyb3IzIiwiX3N0ZXAzIiwiX2l0ZXJhdG9yMyIsImlubmVySFRNTCIsImNlaWwiLCJtYXh0ZW1wIiwic2V0QW5nbGUiLCJvbm1vdXNlZG93biIsImUiLCJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJsZWZ0IiwiY2xpZW50V2lkdGgiLCJ0b3AiLCJjbGllbnRIZWlnaHQiLCJvbm1vdXNlbW92ZSIsImV2ZW50Iiwid2luZG93IiwiY2xpZW50WCIsImNsaWVudFkiLCJvbm1vdXNldXAiLCJvbmRyYWdzdGFydCIsIm9udG91Y2hzdGFydCIsIm9udG91Y2htb3ZlIiwiY2hhbmdlZFRvdWNoZXMiLCJidG5zIiwiaSIsInNob3dpdGVtcyIsInRoaXMiLCJjb250YWlucyIsImQiLCJ0cmlnZ2VycyIsIl9sb29wIiwibW9kYWxDbGFzcyIsIlN0cmluZyIsImdldEF0dHJpYnV0ZSIsImNvbnRhaW5lciIsInN0ZXAiLCJwcm9tU3RlcCIsIm5leHRQb3NpdGlvbiIsInNjcm9sbFRvIiwiZWxlbWVudCIsInRvIiwiYXJndW1lbnRzIiwiZHVyYXRpb24iLCJzdGFydCIsInNjcm9sbExlZnQiLCJjaGFuZ2UiLCJjdXJyZW50VGltZSIsImFuaW1hdGVTY3JvbGwiLCJ2YWwiLCJlYXNlSW5PdXRRdWFkIiwic2V0VGltZW91dCIsInNjcm9sbE5leHQiLCJibG9jayIsImVsZW0iLCJoYXNBdHRyaWJ1dGUiLCJwYXJzZUludCIsIk51bWJlciIsImlzSW50ZWdlciIsInNjcm9sbFByZXYiLCJmbG9vciIsImZpbHRlclNlbGVjdGlvbiIsImMiLCJ4IiwidzNSZW1vdmVDbGFzcyIsImNsYXNzTmFtZSIsImluZGV4T2YiLCJ3M0FkZENsYXNzIiwibmFtZSIsImFycjEiLCJhcnIyIiwic3BsaXQiLCJzcGxpY2UiLCJqb2luIiwidCIsImIiLCJzY3JvbGxCbG9ja3MiLCJzY3JvbGxCbG9jayIsImNvbnRyb2xzIiwicHJvdG90eXBlIiwiY2FsbCIsImRhdGFzZXQiLCJwcmV2Iiwic2Nyb2xsV2lkdGgiLCJvbnNjcm9sbCIsInJlbWluZGVyIiwic2Nyb2xsVG9wIiwicGFyZW50RWxlbWVudCJdLCJtYXBwaW5ncyI6IkFBQUEsYUNtQkEsU0FBQUEsYUFDQUMsU0FBQUMsdUJBQUEscUJBQUEsR0FBQUMsVUFBQUMsT0FBQSxxQkFDQUgsU0FBQUMsdUJBQUEsUUFBQSxHQUFBQyxVQUFBQyxPQUFBLFFBQ0FILFNBQUFJLEtBQUFDLE1BQUFDLFNBQUEsT0RwQkFOLFNBQUFPLGlCQUFBLG1CQUFBLFdBQ0FQLFNBQUFDLHVCQUFBLHlCQUFBLEdBQUFNLGlCQUFBLFFBQUEsV0FDQVAsU0FBQUMsdUJBQUEsZUFBQSxHQUFBQyxVQUFBTSxPQUFBLDBCQUVBLEdFSkFSLFNBQUFPLGlCQUFBLG1CQUFBLFdBRUEsSUFBQUUsRUFBQVQsU0FBQUMsdUJBQUEsaUJBQUEsR0FDQVMsRUFBQVYsU0FBQUMsdUJBQUEsUUFBQSxHQUNBVSxFQUFBWCxTQUFBQyx1QkFBQSxlQUFBLEdBQ0FXLEVBQUFDLE1BQUFDLEtBQUFkLFNBQUFDLHVCQUFBLFNBQ0FjLE9BQUEsRUFDQUMsT0FBQSxFQUNBQyxPQUFBLEVBQ0FDLE9BQUEsRUFDQUMsT0FBQSxFQUNBQyxPQUFBLEVBQ0FDLE9BQUEsRUFJQUMsRUFBQSxJQUVBQyxFQUFBLFdBR0EsSUFGQSxJQUFBQyxFQUFBLENBQUEsWUFBQSxjQUFBLGtCQUFBLGVBQUEsY0FFQUMsRUFBQSxFQUFBQSxFQUFBRCxFQUFBRSxPQUFBRCxJQUFBLENBQ0EsSUFBQUUsRUFBQUgsRUFBQUMsR0FDQSxRQUFBLElBQUF6QixTQUFBSSxLQUFBQyxNQUFBc0IsR0FDQSxPQUFBQSxHQU5BLEdBNkZBQyxLQUFBQyxLQUFBLFNBQUFDLEVBQUFDLEVBQUFDLEVBQUFDLEdBR0EsT0FGQUQsSUFBQUEsRUFBQSxHQUNBQyxJQUFBQSxFQUFBLEdBQ0FMLEtBQUFNLE1BQUFGLEVBQUFGLElBQUFFLEVBQUFGLElBQUFHLEVBQUFGLElBQUFFLEVBQUFGLEtBR0EsSUFBQUksRUFBQSxTQUFBcEIsRUFBQUMsRUFBQUMsRUFBQUMsR0FDQSxHQUFBLEdBQUFVLEtBQUFDLEtBQUFaLEVBQUFDLEVBQUFILEVBQUFDLEtBQ0FJLEVBQUFRLEtBQUFRLE1BQUFsQixFQUFBRixFQUFBQyxFQUFBRixJQUFBLElBQUFhLEtBQUFTLElBWUEsR0FKQWYsRUFEQSxHQUxBRCxFQURBRCxFQUFBLEVBQ0EsSUFBQUEsRUFFQUEsSUFHQUMsRUFBQSxJQUNBQSxFQUFBLElBRUFBLEVBQUEsTUFFQUMsR0FBQSxLQUNBLE9BdkdBLFdBQ0FiLEVBQUFKLE1BQUFrQixHQUFBLFVBQUFELEVBQUEsT0FDQSxJQUFBZ0IsR0FBQSxFQUNBQyxHQUFBLEVBQ0FDLE9BQUFDLEVBRUEsSUFDQSxJQUFBLElBQUFDLEVBQUFDLEVBQUEvQixFQUFBZ0MsT0FBQUMsY0FBQVAsR0FBQUksRUFBQUMsRUFBQUcsUUFBQUMsTUFBQVQsR0FBQSxFQUNBSSxFQUFBTSxNQUVBOUMsVUFBQUMsT0FBQSxVQUVBLE1BQUE4QyxHQUNBVixHQUFBLEVBQ0FDLEVBQUFTLEVBQ0EsUUFDQSxLQUNBWCxHQUFBSyxFQUFBTyxRQUNBUCxFQUFBTyxTQUVBLFFBQ0EsR0FBQVgsRUFDQSxNQUFBQyxHQU1BLElBREFyQixFQUFBUyxLQUFBdUIsTUFBQTdCLEVBQUEsT0FDQSxFQUFBLENBQ0EsSUFBQThCLEdBQUEsRUFDQUMsR0FBQSxFQUNBQyxPQUFBYixFQUVBLElBQ0EsSUFBQSxJQUFBYyxFQUFBQyxFQUFBNUMsRUFBQTZDLE1BQUEsRUFBQSxHQUFBYixPQUFBQyxjQUFBTyxHQUFBRyxFQUFBQyxFQUFBVixRQUFBQyxNQUFBSyxHQUFBLEVBQ0FHLEVBQUFQLE1BRUE5QyxVQUFBd0QsSUFBQSxVQUVBLE1BQUFULEdBQ0FJLEdBQUEsRUFDQUMsRUFBQUwsRUFDQSxRQUNBLEtBQ0FHLEdBQUFJLEVBQUFOLFFBQ0FNLEVBQUFOLFNBRUEsUUFDQSxHQUFBRyxFQUNBLE1BQUFDLFFBSUEsQ0FDQSxJQUFBSyxHQUFBLEVBQ0FDLEdBQUEsRUFDQUMsT0FBQXBCLEVBRUEsSUFDQSxJQUFBLElBQUFxQixFQUFBQyxFQUFBbkQsRUFBQTZDLE1BQUEsRUFBQXRDLEdBQUF5QixPQUFBQyxjQUFBYyxHQUFBRyxFQUFBQyxFQUFBakIsUUFBQUMsTUFBQVksR0FBQSxFQUNBRyxFQUFBZCxNQUVBOUMsVUFBQXdELElBQUEsVUFFQSxNQUFBVCxHQUNBVyxHQUFBLEVBQ0FDLEVBQUFaLEVBQ0EsUUFDQSxLQUNBVSxHQUFBSSxFQUFBYixRQUNBYSxFQUFBYixTQUVBLFFBQ0EsR0FBQVUsRUFDQSxNQUFBQyxJQUtBbEQsRUFBQXFELFVBQUEsSUFBQXBDLEtBQUFxQyxLQUFBQyxHQUFBdEMsS0FBQXVCLE1BQUE3QixFQTdGQSxJQTZGQSxNQXdCQTZDLElBS0F6RCxFQUFBMEQsWUFBQSxTQUFBQyxHQUVBdEQsRUFBQUwsRUFBQTRELHdCQUFBQyxLQUFBN0QsRUFBQThELFlBQUEsRUFDQXhELEVBQUFOLEVBQUE0RCx3QkFBQUcsSUFBQS9ELEVBQUFnRSxhQUFBLEVBQ0ExRSxTQUFBMkUsWUFBQSxTQUFBQyxHQUNBM0QsRUFBQTRELE9BQUFELE1BQUFFLFFBQ0E1RCxFQUFBMkQsT0FBQUQsTUFBQUcsUUFDQTVDLEVBQUFwQixFQUFBQyxFQUFBQyxFQUFBQyxJQUVBbEIsU0FBQWdGLFVBQUEsV0FDQWhGLFNBQUEyRSxZQUFBLEtBQ0FqRSxFQUFBc0UsVUFBQSxNQUVBdEUsRUFBQXVFLFlBQUEsV0FDQSxPQUFBLElBSUF2RSxFQUFBd0UsYUFBQSxTQUFBYixHQUNBdEQsRUFBQUwsRUFBQTRELHdCQUFBQyxLQUFBN0QsRUFBQThELFlBQUEsRUFDQXhELEVBQUFOLEVBQUE0RCx3QkFBQUcsSUFBQS9ELEVBQUFnRSxhQUFBLEVBQ0ExRSxTQUFBbUYsWUFBQSxTQUFBUCxHQUNBM0QsRUFBQTJELEVBQUFRLGVBQUEsR0FBQU4sUUFDQTVELEVBQUEwRCxFQUFBUSxlQUFBLEdBQUFMLFFBQ0E1QyxFQUFBcEIsRUFBQUMsRUFBQUMsRUFBQUMsT0FHQSxHQ3BLQWxCLFNBQUFPLGlCQUFBLG1CQUFBLFdBRUEsSUFEQSxJQUFBOEUsRUFBQXJGLFNBQUFDLHVCQUFBLHVCQUNBcUYsRUFBQSxFQUFBQSxFQUFBRCxFQUFBM0QsT0FBQTRELElBQ0FELEVBQUFDLEdBQUEvRSxpQkFBQSxRQUFBLFdBQ0EsSUFBQWdGLEVBQUF2RixTQUFBQyx1QkFBQSx1QkFFQSxHQUFBdUYsS0FBQXRGLFVBQUF1RixTQUFBLDhCQUVBLEdBQUFELEtBQUF0RixVQUFBdUYsU0FBQSw0QkFFQSxJQUFBLElBQUFDLEVBQUEsRUFBQUEsRUFBQUgsRUFBQTdELE9BQUFnRSxJQUNBSCxFQUFBRyxHQUFBeEYsVUFBQUMsT0FBQSxpQ0FJQSxJQUFBdUYsRUFBQSxFQUFBQSxFQUFBSCxFQUFBN0QsT0FBQWdFLElBQ0FILEVBQUFHLEdBQUF4RixVQUFBd0QsSUFBQSxnQ0FHQSxDQUNBMUQsU0FBQUMsdUJBQUEsOEJBQUEsR0FBQUMsVUFBQUMsT0FBQSw4QkFDQXFGLEtBQUF0RixVQUFBd0QsSUFBQSw4QkFDQSxJQUFBZ0MsRUFBQSxFQUFBQSxFQUFBSCxFQUFBN0QsT0FBQWdFLElBQ0FILEVBQUFHLEdBQUF4RixVQUFBQyxPQUFBLGlDQUtBLEdGNUJBSCxTQUFBTyxpQkFBQSxtQkFBQSxXQVlBLElBWEEsSUFBQW9GLEVBQUEzRixTQUFBQyx1QkFBQSxpQkFFQTJGLEVBQUEsU0FBQU4sR0FDQUssRUFBQUwsR0FBQS9FLGlCQUFBLFFBQUEsV0FDQSxJQUFBc0YsRUFBQUMsT0FBQUgsRUFBQUwsR0FBQVMsYUFBQSxlQUNBL0YsU0FBQUMsdUJBQUE0RixHQUFBLEdBQUEzRixVQUFBd0QsSUFBQSxxQkFDQTFELFNBQUFDLHVCQUFBLFFBQUEsR0FBQUMsVUFBQXdELElBQUEsUUFDQTFELFNBQUFJLEtBQUFDLE1BQUFDLFNBQUEsWUFJQWdGLEVBQUEsRUFBQUEsRUFBQUssRUFBQWpFLE9BQUE0RCxJQUNBTSxFQUFBTixLQUVBLEdHZkEsSUFBQVUsZUFBQSxFQUNBQyxVQUFBLEVBQ0FDLGNBQUEsRUFDQUMsa0JBQUEsRUFFQSxTQUFBQyxTQUFBQyxHQUNBLElBQUFDLEVBQUEsRUFBQUMsVUFBQTdFLGFBQUFlLElBQUE4RCxVQUFBLEdBQUFBLFVBQUEsR0FBQSxFQUNBQyxFQUFBLEVBQUFELFVBQUE3RSxhQUFBZSxJQUFBOEQsVUFBQSxHQUFBQSxVQUFBLEdBQUEsSUFHQUUsRUFBQUosRUFBQUssV0FDQUMsRUFBQUwsRUFBQUcsRUFFQUcsRUFBQSxHQUVBLFNBQUFDLElBRUFELEdBTEEsR0FPQSxJQUFBRSxFQUFBbEYsS0FBQW1GLGNBQUFILEVBQUFILEVBQUFFLEVBQUFILEdBRUFILEVBQUFLLFdBQUFJLEVBRUFGLEVBQUFKLEdBQ0FRLFdBQUFILEVBWkEsSUFnQkFBLEdBV0EsU0FBQUksV0FBQUMsRUFBQUMsR0FFQW5CLFVBQUFoRyxTQUFBQyx1QkFBQWlILEdBQUEsR0FHQWpCLEtBREFELFVBQUFvQixhQUFBLFVBQ0FwQixVQUFBeEIsWUFBQTZDLFNBQUFyQixVQUFBRCxhQUFBLFdBRUFDLFVBQUF4QixZQUVBMEIsU0FBQXRFLEtBQUFxQyxLQUFBK0IsVUFBQVUsV0FBQVQsTUFHQUUsYUFEQW1CLE9BQUFDLFVBQUEzRixLQUFBcUMsS0FBQStCLFVBQUFVLFlBQUFULE9BQ0FDLFNBQUEsR0FBQUQsS0FFQUMsU0FBQUQsS0FFQUcsU0FBQUosVUFBQUcsYUFBQSxLQUdBLFNBQUFxQixXQUFBTixHQUVBbEIsVUFBQWhHLFNBQUFDLHVCQUFBaUgsR0FBQSxHQUdBakIsS0FEQUQsVUFBQW9CLGFBQUEsVUFDQXBCLFVBQUF4QixZQUFBNkMsU0FBQXJCLFVBQUFELGFBQUEsV0FFQUMsVUFBQXhCLFlBRUEwQixTQUFBdEUsS0FBQTZGLE1BQUF6QixVQUFBVSxXQUFBVCxNQUVBRSxhQURBbUIsT0FBQUMsVUFBQXZCLFVBQUFVLFdBQUFULE9BQ0FDLFNBQUEsR0FBQUQsS0FFQUMsU0FBQUQsS0FHQUcsU0FBQUosVUFBQUcsYUFBQSxLQ3hFQSxTQUFBdUIsZ0JBQUFDLEdBQ0EsSUFBQUMsRUFBQXRDLEVBSUEsSUFIQXNDLEVBQUE1SCxTQUFBQyx1QkFBQSwwQkFDQSxPQUFBMEgsSUFBQUEsRUFBQSxJQUVBckMsRUFBQSxFQUFBQSxFQUFBc0MsRUFBQWxHLE9BQUE0RCxJQUNBdUMsY0FBQUQsRUFBQXRDLEdBQUEsZ0NBQ0EsRUFBQXNDLEVBQUF0QyxHQUFBd0MsVUFBQUMsUUFBQUosSUFBQUssV0FBQUosRUFBQXRDLEdBQUEsK0JBS0EsU0FBQTBDLFdBQUEzQixFQUFBNEIsR0FDQSxJQUFBM0MsRUFBQTRDLEVBQUFDLEVBR0EsSUFGQUQsRUFBQTdCLEVBQUF5QixVQUFBTSxNQUFBLEtBQ0FELEVBQUFGLEVBQUFHLE1BQUEsS0FDQTlDLEVBQUEsRUFBQUEsRUFBQTZDLEVBQUF6RyxPQUFBNEQsS0FDQSxHQUFBNEMsRUFBQUgsUUFBQUksRUFBQTdDLE1BQ0FlLEVBQUF5QixXQUFBLElBQUFLLEVBQUE3QyxJQU1BLFNBQUF1QyxjQUFBeEIsRUFBQTRCLEdBQ0EsSUFBQTNDLEVBQUE0QyxFQUFBQyxFQUdBLElBRkFELEVBQUE3QixFQUFBeUIsVUFBQU0sTUFBQSxLQUNBRCxFQUFBRixFQUFBRyxNQUFBLEtBQ0E5QyxFQUFBLEVBQUFBLEVBQUE2QyxFQUFBekcsT0FBQTRELElBQ0EsTUFBQSxFQUFBNEMsRUFBQUgsUUFBQUksRUFBQTdDLEtBQ0E0QyxFQUFBRyxPQUFBSCxFQUFBSCxRQUFBSSxFQUFBN0MsSUFBQSxHQUdBZSxFQUFBeUIsVUFBQUksRUFBQUksS0FBQSxLREpBMUcsS0FBQW1GLGNBQUEsU0FBQXdCLEVBQUFDLEVBQUFiLEVBQUFqQyxHQUdBLE9BREE2QyxHQUFBN0MsRUFBQSxHQUNBLEVBQUFpQyxFQUFBLEVBQUFZLEVBQUFBLEVBQUFDLEdBRUFiLEVBQUEsS0FEQVksR0FDQUEsRUFBQSxHQUFBLEdBQUFDLEdBeUNBeEksU0FBQU8saUJBQUEsbUJBQUEsV0E0QkEsSUEzQkEsSUFBQWtJLEVBQUF6SSxTQUFBQyx1QkFBQSxnQkFFQTJGLEVBQUEsU0FBQU4sR0FDQSxJQUFBb0QsRUFBQUQsRUFBQW5ELEdBQ0FxRCxFQUFBOUgsTUFBQStILFVBQUFuRixNQUFBb0YsS0FBQTdJLFNBQUFDLHVCQUFBNkYsT0FBQTRDLEVBQUFJLFFBQUFILFlBQ0E3RixFQUFBNkYsRUFBQSxHQUFBMUksdUJBQUEsd0JBQUEsR0FBQUEsdUJBQUEsb0JBQUEsR0FDQThJLEVBQUFKLEVBQUEsR0FBQTFJLHVCQUFBLHdCQUFBLEdBQUFBLHVCQUFBLG9CQUFBLEdBQ0F5SSxFQUFBTSxhQUFBTixFQUFBbEUsYUFDQW1FLEVBQUEsR0FBQXhJLFNBR0FzSSxFQUFBbkQsR0FBQTJELFNBQUEsV0FHQXpELEtBQUF3RCxhQUFBeEQsS0FBQWtCLFdBQUFsQixLQUFBaEIsYUFDQTFCLEVBQUE1QyxVQUFBQyxPQUFBLDJCQUNBNEksRUFBQTdJLFVBQUF3RCxJQUFBLDRCQUNBLEdBQUE4QixLQUFBa0IsWUFDQTVELEVBQUE1QyxVQUFBd0QsSUFBQSwyQkFDQXFGLEVBQUE3SSxVQUFBQyxPQUFBLDZCQUVBMkMsRUFBQTVDLFVBQUF3RCxJQUFBLDJCQUNBcUYsRUFBQTdJLFVBQUF3RCxJQUFBLDhCQUtBNEIsRUFBQSxFQUFBQSxFQUFBbUQsRUFBQS9HLE9BQUE0RCxJQUNBTSxFQUFBTixHQUlBdEYsU0FBQUMsdUJBQUEsZUFBQSxHQUFBZ0osU0FBQSxXQUNBLElBQUFDLEVBQUFsSixTQUFBQyx1QkFBQSxrQkFBQSxHQUNBLEdBQUF1RixLQUFBMkQsVUFDQUQsRUFBQWhKLFVBQUFDLE9BQUEsMkJBRUErSSxFQUFBaEosVUFBQXdELElBQUEsOEJBS0EsR0N4SEFnRSxnQkFBQSxPQXNDQTFILFNBQUFPLGlCQUFBLG1CQUFBLFdBRUEsSUFEQSxJQUFBOEUsRUFBQXJGLFNBQUFDLHVCQUFBLHVCQUNBcUYsRUFBQSxFQUFBQSxFQUFBRCxFQUFBM0QsT0FBQTRELElBQ0FELEVBQUFDLEdBQUEvRSxpQkFBQSxRQUFBLFdBQ0FpRixLQUFBNEQsY0FBQW5KLHVCQUFBLDhCQUFBLEdBQUFDLFVBQUFDLE9BQUEsOEJBQ0FxRixLQUFBdEYsVUFBQXdELElBQUEsa0NBR0EiLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcblxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGZ1bmN0aW9uICgpIHtcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdoZWFkZXItbWVudV9fc3dpdGNoZXInKVswXS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnaGVhZGVyLW1lbnUnKVswXS5jbGFzc0xpc3QudG9nZ2xlKCdoZWFkZXItbWVudV9hY3RpdmUnKTtcbiAgICB9KTtcbn0sIGZhbHNlKTsiLCIndXNlIHN0cmljdCc7XG5cbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHRyaWdnZXJzID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnbW9kYWwtdHJpZ2dlcicpO1xuXG4gICAgdmFyIF9sb29wID0gZnVuY3Rpb24gX2xvb3AoaSkge1xuICAgICAgICB0cmlnZ2Vyc1tpXS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIG1vZGFsQ2xhc3MgPSBTdHJpbmcodHJpZ2dlcnNbaV0uZ2V0QXR0cmlidXRlKCdkYXRhLW1vZGFsJykpO1xuICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShtb2RhbENsYXNzKVswXS5jbGFzc0xpc3QuYWRkKCdtb2RhbC13cmFwX2FjdGl2ZScpO1xuICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnd3JhcCcpWzBdLmNsYXNzTGlzdC5hZGQoJ2JsdXInKTtcbiAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuc3R5bGUub3ZlcmZsb3cgPSBcImhpZGRlblwiO1xuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0cmlnZ2Vycy5sZW5ndGg7IGkrKykge1xuICAgICAgICBfbG9vcChpKTtcbiAgICB9XG59LCBmYWxzZSk7XG5cbmZ1bmN0aW9uIGNsb3NlTW9kYWwoKSB7XG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnbW9kYWwtd3JhcF9hY3RpdmUnKVswXS5jbGFzc0xpc3QucmVtb3ZlKCdtb2RhbC13cmFwX2FjdGl2ZScpO1xuICAgIGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ2JsdXInKVswXS5jbGFzc0xpc3QucmVtb3ZlKCdibHVyJyk7XG4gICAgZG9jdW1lbnQuYm9keS5zdHlsZS5vdmVyZmxvdyA9IFwiYXV0b1wiO1xufSIsIid1c2Ugc3RyaWN0JztcblxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGZ1bmN0aW9uICgpIHtcblxuICAgIHZhciBrbm9iID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgna25vYl9fY29udHJvbCcpWzBdO1xuICAgIHZhciBrbm9iYXJlYSA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ2tub2InKVswXTtcbiAgICB2YXIgY3VyciA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ2tub2JfX3ZhbHVlJylbMF07XG4gICAgdmFyIHRpY2tzID0gQXJyYXkuZnJvbShkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCd0aWNrJykpO1xuICAgIHZhciBjZW50ZXJYID0gdm9pZCAwLFxuICAgICAgICBjZW50ZXJZID0gdm9pZCAwLFxuICAgICAgICBtb3VzZVggPSB2b2lkIDAsXG4gICAgICAgIG1vdXNlWSA9IHZvaWQgMCxcbiAgICAgICAgYWN0aXZlcyA9IHZvaWQgMCxcbiAgICAgICAgYSA9IHZvaWQgMCxcbiAgICAgICAgcGx1c0FuZ2xlID0gdm9pZCAwO1xuXG4gICAgdmFyIG1pbiA9IDA7XG4gICAgdmFyIG1heCA9IDMwMDtcbiAgICB2YXIgYW5nbGUgPSAyMjg7XG4gICAgdmFyIG1heHRlbXAgPSAzMDtcbiAgICB2YXIgdHJhbnNmb3JtID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgX2FyciA9IFsndHJhbnNmb3JtJywgJ21zVHJhbnNmb3JtJywgJ3dlYmtpdFRyYW5zZm9ybScsICdtb3pUcmFuc2Zvcm0nLCAnb1RyYW5zZm9ybSddO1xuXG4gICAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBfYXJyLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgdmFyIHByb3AgPSBfYXJyW19pXTtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgZG9jdW1lbnQuYm9keS5zdHlsZVtwcm9wXSAhPSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICAgIHJldHVybiBwcm9wO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSgpO1xuXG4gICAgZnVuY3Rpb24gc2V0QW5nbGUoKSB7XG4gICAgICAgIGtub2Iuc3R5bGVbdHJhbnNmb3JtXSA9ICdyb3RhdGUoJyArIGFuZ2xlICsgJ2RlZyknO1xuICAgICAgICB2YXIgX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbiA9IHRydWU7XG4gICAgICAgIHZhciBfZGlkSXRlcmF0b3JFcnJvciA9IGZhbHNlO1xuICAgICAgICB2YXIgX2l0ZXJhdG9yRXJyb3IgPSB1bmRlZmluZWQ7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGZvciAodmFyIF9pdGVyYXRvciA9IHRpY2tzW1N5bWJvbC5pdGVyYXRvcl0oKSwgX3N0ZXA7ICEoX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbiA9IChfc3RlcCA9IF9pdGVyYXRvci5uZXh0KCkpLmRvbmUpOyBfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uID0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgIHZhciB0aWNrID0gX3N0ZXAudmFsdWU7XG5cbiAgICAgICAgICAgICAgICB0aWNrLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgIF9kaWRJdGVyYXRvckVycm9yID0gdHJ1ZTtcbiAgICAgICAgICAgIF9pdGVyYXRvckVycm9yID0gZXJyO1xuICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBpZiAoIV9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24gJiYgX2l0ZXJhdG9yLnJldHVybikge1xuICAgICAgICAgICAgICAgICAgICBfaXRlcmF0b3IucmV0dXJuKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgICAgICBpZiAoX2RpZEl0ZXJhdG9yRXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgX2l0ZXJhdG9yRXJyb3I7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgYWN0aXZlcyA9IE1hdGgucm91bmQoYW5nbGUgLyAyLjYpO1xuICAgICAgICBpZiAoYWN0aXZlcyA8PSAwKSB7XG4gICAgICAgICAgICB2YXIgX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbjIgPSB0cnVlO1xuICAgICAgICAgICAgdmFyIF9kaWRJdGVyYXRvckVycm9yMiA9IGZhbHNlO1xuICAgICAgICAgICAgdmFyIF9pdGVyYXRvckVycm9yMiA9IHVuZGVmaW5lZDtcblxuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBfaXRlcmF0b3IyID0gdGlja3Muc2xpY2UoMCwgMSlbU3ltYm9sLml0ZXJhdG9yXSgpLCBfc3RlcDI7ICEoX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbjIgPSAoX3N0ZXAyID0gX2l0ZXJhdG9yMi5uZXh0KCkpLmRvbmUpOyBfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uMiA9IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIF90aWNrID0gX3N0ZXAyLnZhbHVlO1xuXG4gICAgICAgICAgICAgICAgICAgIF90aWNrLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgIF9kaWRJdGVyYXRvckVycm9yMiA9IHRydWU7XG4gICAgICAgICAgICAgICAgX2l0ZXJhdG9yRXJyb3IyID0gZXJyO1xuICAgICAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIV9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24yICYmIF9pdGVyYXRvcjIucmV0dXJuKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBfaXRlcmF0b3IyLnJldHVybigpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKF9kaWRJdGVyYXRvckVycm9yMikge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgX2l0ZXJhdG9yRXJyb3IyO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdmFyIF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24zID0gdHJ1ZTtcbiAgICAgICAgICAgIHZhciBfZGlkSXRlcmF0b3JFcnJvcjMgPSBmYWxzZTtcbiAgICAgICAgICAgIHZhciBfaXRlcmF0b3JFcnJvcjMgPSB1bmRlZmluZWQ7XG5cbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgX2l0ZXJhdG9yMyA9IHRpY2tzLnNsaWNlKDAsIGFjdGl2ZXMpW1N5bWJvbC5pdGVyYXRvcl0oKSwgX3N0ZXAzOyAhKF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24zID0gKF9zdGVwMyA9IF9pdGVyYXRvcjMubmV4dCgpKS5kb25lKTsgX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbjMgPSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBfdGljazIgPSBfc3RlcDMudmFsdWU7XG5cbiAgICAgICAgICAgICAgICAgICAgX3RpY2syLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgIF9kaWRJdGVyYXRvckVycm9yMyA9IHRydWU7XG4gICAgICAgICAgICAgICAgX2l0ZXJhdG9yRXJyb3IzID0gZXJyO1xuICAgICAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIV9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24zICYmIF9pdGVyYXRvcjMucmV0dXJuKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBfaXRlcmF0b3IzLnJldHVybigpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKF9kaWRJdGVyYXRvckVycm9yMykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgX2l0ZXJhdG9yRXJyb3IzO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGN1cnIuaW5uZXJIVE1MID0gJysnICsgTWF0aC5jZWlsKG1heHRlbXAgLyAxMDAgKiBNYXRoLnJvdW5kKGFuZ2xlIC8gbWF4ICogMTAwKSk7XG4gICAgfVxuXG4gICAgTWF0aC5kaXN0ID0gZnVuY3Rpb24gKHgxLCB5MSwgeDIsIHkyKSB7XG4gICAgICAgIGlmICgheDIpIHgyID0gMDtcbiAgICAgICAgaWYgKCF5MikgeTIgPSAwO1xuICAgICAgICByZXR1cm4gTWF0aC5zcXJ0KCh4MiAtIHgxKSAqICh4MiAtIHgxKSArICh5MiAtIHkxKSAqICh5MiAtIHkxKSk7XG4gICAgfTtcblxuICAgIHZhciByaWdodEFuZ2xlID0gZnVuY3Rpb24gcmlnaHRBbmdsZShjZW50ZXJYLCBjZW50ZXJZLCBtb3VzZVgsIG1vdXNlWSkge1xuICAgICAgICBpZiAoTWF0aC5kaXN0KG1vdXNlWCwgbW91c2VZLCBjZW50ZXJYLCBjZW50ZXJZKSA+IDEwKSB7XG4gICAgICAgICAgICBhID0gTWF0aC5hdGFuMihtb3VzZVkgLSBjZW50ZXJZLCBtb3VzZVggLSBjZW50ZXJYKSAqICgxODAgLyBNYXRoLlBJKTtcbiAgICAgICAgICAgIGlmIChhIDwgMCkge1xuICAgICAgICAgICAgICAgIHBsdXNBbmdsZSA9IDM2MCArIGE7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHBsdXNBbmdsZSA9IGE7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChwbHVzQW5nbGUgPiAwICYmIHBsdXNBbmdsZSA8IDEyMCkge1xuICAgICAgICAgICAgICAgIGFuZ2xlID0gcGx1c0FuZ2xlICsgMjQwO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBhbmdsZSA9IHBsdXNBbmdsZSAtIDEyMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChhbmdsZSA+IDAgJiYgYW5nbGUgPD0gMzAzKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHNldEFuZ2xlKGFuZ2xlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG5cbiAgICBrbm9iYXJlYS5vbm1vdXNlZG93biA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIC8vIDEuINC+0YLRgdC70LXQtNC40YLRjCDQvdCw0LbQsNGC0LjQtVxuICAgICAgICBjZW50ZXJYID0ga25vYmFyZWEuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkubGVmdCArIGtub2JhcmVhLmNsaWVudFdpZHRoIC8gMjtcbiAgICAgICAgY2VudGVyWSA9IGtub2JhcmVhLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLnRvcCArIGtub2JhcmVhLmNsaWVudEhlaWdodCAvIDI7XG4gICAgICAgIGRvY3VtZW50Lm9ubW91c2Vtb3ZlID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgICBtb3VzZVggPSB3aW5kb3cuZXZlbnQuY2xpZW50WDtcbiAgICAgICAgICAgIG1vdXNlWSA9IHdpbmRvdy5ldmVudC5jbGllbnRZO1xuICAgICAgICAgICAgcmlnaHRBbmdsZShjZW50ZXJYLCBjZW50ZXJZLCBtb3VzZVgsIG1vdXNlWSk7XG4gICAgICAgIH07XG4gICAgICAgIGRvY3VtZW50Lm9ubW91c2V1cCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGRvY3VtZW50Lm9ubW91c2Vtb3ZlID0gbnVsbDtcbiAgICAgICAgICAgIGtub2JhcmVhLm9ubW91c2V1cCA9IG51bGw7XG4gICAgICAgIH07XG4gICAgICAgIGtub2JhcmVhLm9uZHJhZ3N0YXJ0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9O1xuICAgIH07XG5cbiAgICBrbm9iYXJlYS5vbnRvdWNoc3RhcnQgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICBjZW50ZXJYID0ga25vYmFyZWEuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkubGVmdCArIGtub2JhcmVhLmNsaWVudFdpZHRoIC8gMjtcbiAgICAgICAgY2VudGVyWSA9IGtub2JhcmVhLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLnRvcCArIGtub2JhcmVhLmNsaWVudEhlaWdodCAvIDI7XG4gICAgICAgIGRvY3VtZW50Lm9udG91Y2htb3ZlID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgICBtb3VzZVggPSBldmVudC5jaGFuZ2VkVG91Y2hlc1swXS5jbGllbnRYO1xuICAgICAgICAgICAgbW91c2VZID0gZXZlbnQuY2hhbmdlZFRvdWNoZXNbMF0uY2xpZW50WTtcbiAgICAgICAgICAgIHJpZ2h0QW5nbGUoY2VudGVyWCwgY2VudGVyWSwgbW91c2VYLCBtb3VzZVkpO1xuICAgICAgICB9O1xuICAgIH07XG59LCBmYWxzZSk7IiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGJ0bnMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwiZGV2aWNlLWZpbHRlcl9faXRlbVwiKTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGJ0bnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgYnRuc1tpXS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHNob3dpdGVtcyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJkZXZpY2UtZmlsdGVyX19pdGVtXCIpO1xuXG4gICAgICAgICAgICBpZiAodGhpcy5jbGFzc0xpc3QuY29udGFpbnMoXCJkZXZpY2UtZmlsdGVyX19pdGVtX2FjdGl2ZVwiKSkge1xuXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuY2xhc3NMaXN0LmNvbnRhaW5zKFwiZGV2aWNlLWZpbHRlcl9faXRlbV9zaG93XCIpKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgZCA9IDA7IGQgPCBzaG93aXRlbXMubGVuZ3RoOyBkKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNob3dpdGVtc1tkXS5jbGFzc0xpc3QucmVtb3ZlKFwiZGV2aWNlLWZpbHRlcl9faXRlbV9zaG93XCIpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBkID0gMDsgZCA8IHNob3dpdGVtcy5sZW5ndGg7IGQrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2hvd2l0ZW1zW2RdLmNsYXNzTGlzdC5hZGQoXCJkZXZpY2UtZmlsdGVyX19pdGVtX3Nob3dcIik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJkZXZpY2UtZmlsdGVyX19pdGVtX2FjdGl2ZVwiKVswXS5jbGFzc0xpc3QucmVtb3ZlKFwiZGV2aWNlLWZpbHRlcl9faXRlbV9hY3RpdmVcIik7XG4gICAgICAgICAgICAgICAgdGhpcy5jbGFzc0xpc3QuYWRkKFwiZGV2aWNlLWZpbHRlcl9faXRlbV9hY3RpdmVcIik7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgZCA9IDA7IGQgPCBzaG93aXRlbXMubGVuZ3RoOyBkKyspIHtcbiAgICAgICAgICAgICAgICAgICAgc2hvd2l0ZW1zW2RdLmNsYXNzTGlzdC5yZW1vdmUoXCJkZXZpY2UtZmlsdGVyX19pdGVtX3Nob3dcIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG59LCBmYWxzZSk7IiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgY29udGFpbmVyID0gdm9pZCAwO1xudmFyIHN0ZXAgPSB2b2lkIDA7XG52YXIgcHJvbVN0ZXAgPSB2b2lkIDA7XG52YXIgbmV4dFBvc2l0aW9uID0gdm9pZCAwO1xuXG5mdW5jdGlvbiBzY3JvbGxUbyhlbGVtZW50KSB7XG4gICAgdmFyIHRvID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiAwO1xuICAgIHZhciBkdXJhdGlvbiA9IGFyZ3VtZW50cy5sZW5ndGggPiAyICYmIGFyZ3VtZW50c1syXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzJdIDogMTAwMDtcblxuXG4gICAgdmFyIHN0YXJ0ID0gZWxlbWVudC5zY3JvbGxMZWZ0O1xuICAgIHZhciBjaGFuZ2UgPSB0byAtIHN0YXJ0O1xuICAgIHZhciBpbmNyZW1lbnQgPSAyMDtcbiAgICB2YXIgY3VycmVudFRpbWUgPSAwO1xuXG4gICAgdmFyIGFuaW1hdGVTY3JvbGwgPSBmdW5jdGlvbiBhbmltYXRlU2Nyb2xsKCkge1xuXG4gICAgICAgIGN1cnJlbnRUaW1lICs9IGluY3JlbWVudDtcblxuICAgICAgICB2YXIgdmFsID0gTWF0aC5lYXNlSW5PdXRRdWFkKGN1cnJlbnRUaW1lLCBzdGFydCwgY2hhbmdlLCBkdXJhdGlvbik7XG5cbiAgICAgICAgZWxlbWVudC5zY3JvbGxMZWZ0ID0gdmFsO1xuXG4gICAgICAgIGlmIChjdXJyZW50VGltZSA8IGR1cmF0aW9uKSB7XG4gICAgICAgICAgICBzZXRUaW1lb3V0KGFuaW1hdGVTY3JvbGwsIGluY3JlbWVudCk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgYW5pbWF0ZVNjcm9sbCgpO1xufTtcblxuTWF0aC5lYXNlSW5PdXRRdWFkID0gZnVuY3Rpb24gKHQsIGIsIGMsIGQpIHtcblxuICAgIHQgLz0gZCAvIDI7XG4gICAgaWYgKHQgPCAxKSByZXR1cm4gYyAvIDIgKiB0ICogdCArIGI7XG4gICAgdC0tO1xuICAgIHJldHVybiAtYyAvIDIgKiAodCAqICh0IC0gMikgLSAxKSArIGI7XG59O1xuXG5mdW5jdGlvbiBzY3JvbGxOZXh0KGJsb2NrLCBlbGVtKSB7XG5cbiAgICBjb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKGJsb2NrKVswXTtcblxuICAgIGlmIChjb250YWluZXIuaGFzQXR0cmlidXRlKCdvZmZzZXQnKSkge1xuICAgICAgICBzdGVwID0gY29udGFpbmVyLmNsaWVudFdpZHRoIC0gcGFyc2VJbnQoY29udGFpbmVyLmdldEF0dHJpYnV0ZSgnb2Zmc2V0JykpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHN0ZXAgPSBjb250YWluZXIuY2xpZW50V2lkdGg7XG4gICAgfVxuICAgIHByb21TdGVwID0gTWF0aC5jZWlsKGNvbnRhaW5lci5zY3JvbGxMZWZ0IC8gc3RlcCk7XG5cbiAgICBpZiAoTnVtYmVyLmlzSW50ZWdlcihNYXRoLmNlaWwoY29udGFpbmVyLnNjcm9sbExlZnQpIC8gc3RlcCkpIHtcbiAgICAgICAgbmV4dFBvc2l0aW9uID0gKHByb21TdGVwICsgMSkgKiBzdGVwO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIG5leHRQb3NpdGlvbiA9IHByb21TdGVwICogc3RlcDtcbiAgICB9XG4gICAgc2Nyb2xsVG8oY29udGFpbmVyLCBuZXh0UG9zaXRpb24sIDUwMCk7XG59O1xuXG5mdW5jdGlvbiBzY3JvbGxQcmV2KGJsb2NrKSB7XG5cbiAgICBjb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKGJsb2NrKVswXTtcblxuICAgIGlmIChjb250YWluZXIuaGFzQXR0cmlidXRlKCdvZmZzZXQnKSkge1xuICAgICAgICBzdGVwID0gY29udGFpbmVyLmNsaWVudFdpZHRoIC0gcGFyc2VJbnQoY29udGFpbmVyLmdldEF0dHJpYnV0ZSgnb2Zmc2V0JykpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHN0ZXAgPSBjb250YWluZXIuY2xpZW50V2lkdGg7XG4gICAgfVxuICAgIHByb21TdGVwID0gTWF0aC5mbG9vcihjb250YWluZXIuc2Nyb2xsTGVmdCAvIHN0ZXApO1xuICAgIGlmIChOdW1iZXIuaXNJbnRlZ2VyKGNvbnRhaW5lci5zY3JvbGxMZWZ0IC8gc3RlcCkpIHtcbiAgICAgICAgbmV4dFBvc2l0aW9uID0gKHByb21TdGVwIC0gMSkgKiBzdGVwO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIG5leHRQb3NpdGlvbiA9IHByb21TdGVwICogc3RlcDtcbiAgICB9XG5cbiAgICBzY3JvbGxUbyhjb250YWluZXIsIG5leHRQb3NpdGlvbiwgNTAwKTtcbn07XG5cbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHNjcm9sbEJsb2NrcyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ3Njcm9sbC1ibG9jaycpO1xuXG4gICAgdmFyIF9sb29wID0gZnVuY3Rpb24gX2xvb3AoaSkge1xuICAgICAgICB2YXIgc2Nyb2xsQmxvY2sgPSBzY3JvbGxCbG9ja3NbaV07XG4gICAgICAgIHZhciBjb250cm9scyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoU3RyaW5nKHNjcm9sbEJsb2NrLmRhdGFzZXQuY29udHJvbHMpKSk7XG4gICAgICAgIHZhciBuZXh0ID0gY29udHJvbHNbMF0uZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnc2Nyb2xsLWNvbnRyb2xfX25leHQnKVswXS5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdzdmctc2Nyb2xsLWFycm93JylbMF07XG4gICAgICAgIHZhciBwcmV2ID0gY29udHJvbHNbMF0uZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnc2Nyb2xsLWNvbnRyb2xfX3ByZXYnKVswXS5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdzdmctc2Nyb2xsLWFycm93JylbMF07XG4gICAgICAgIGlmIChzY3JvbGxCbG9jay5zY3JvbGxXaWR0aCA9PSBzY3JvbGxCbG9jay5jbGllbnRXaWR0aCkge1xuICAgICAgICAgICAgY29udHJvbHNbMF0ucmVtb3ZlKCk7XG4gICAgICAgIH1cblxuICAgICAgICBzY3JvbGxCbG9ja3NbaV0ub25zY3JvbGwgPSBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgIC8vIGxldCBlbGVtID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnZmF2b3ItZGV2aWNlcycpWzBdXG4gICAgICAgICAgICBpZiAodGhpcy5zY3JvbGxXaWR0aCA9PSB0aGlzLnNjcm9sbExlZnQgKyB0aGlzLmNsaWVudFdpZHRoKSB7XG4gICAgICAgICAgICAgICAgbmV4dC5jbGFzc0xpc3QucmVtb3ZlKCdzdmctc2Nyb2xsLWFycm93X2FjdGl2ZScpO1xuICAgICAgICAgICAgICAgIHByZXYuY2xhc3NMaXN0LmFkZCgnc3ZnLXNjcm9sbC1hcnJvd19hY3RpdmUnKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5zY3JvbGxMZWZ0ID09IDApIHtcbiAgICAgICAgICAgICAgICBuZXh0LmNsYXNzTGlzdC5hZGQoJ3N2Zy1zY3JvbGwtYXJyb3dfYWN0aXZlJyk7XG4gICAgICAgICAgICAgICAgcHJldi5jbGFzc0xpc3QucmVtb3ZlKCdzdmctc2Nyb2xsLWFycm93X2FjdGl2ZScpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBuZXh0LmNsYXNzTGlzdC5hZGQoJ3N2Zy1zY3JvbGwtYXJyb3dfYWN0aXZlJyk7XG4gICAgICAgICAgICAgICAgcHJldi5jbGFzc0xpc3QuYWRkKCdzdmctc2Nyb2xsLWFycm93X2FjdGl2ZScpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH07XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNjcm9sbEJsb2Nrcy5sZW5ndGg7IGkrKykge1xuICAgICAgICBfbG9vcChpKTtcbiAgICB9XG5cbiAgICAvLyDQn9C+0LrQsNC30YvQstCw0LXQvCDQuNC70Lgg0YPQsdC40YDQsNC10Lwg0YHRgtGA0LXQu9C60YMgLSDQvdCw0L/QvtC80LjQvdCw0LvQutGDINCyINCz0LvQsNCy0L3QvtC8INCx0LvQvtC60LVcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdmYXZvci1jYXJkcycpWzBdLm9uc2Nyb2xsID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgcmVtaW5kZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdhcnJvdy1yZW1pbmRlcicpWzBdO1xuICAgICAgICBpZiAodGhpcy5zY3JvbGxUb3AgPT0gMCkge1xuICAgICAgICAgICAgcmVtaW5kZXIuY2xhc3NMaXN0LnJlbW92ZSgnYXJyb3ctcmVtaW5kZXJfaW5hY3RpdmUnKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJlbWluZGVyLmNsYXNzTGlzdC5hZGQoJ2Fycm93LXJlbWluZGVyX2luYWN0aXZlJyk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgLy8gZWxlbS5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdzdmctc2Nyb2xsLWFycm93JylbMF0ucmVtb3ZlKCdzY3JvbGwtY29udHJvbF9hY3RpdmUnKTtcbn0sIGZhbHNlKTsiLCJcInVzZSBzdHJpY3RcIjtcblxuZmlsdGVyU2VsZWN0aW9uKFwiYWxsXCIpO1xuXG5mdW5jdGlvbiBmaWx0ZXJTZWxlY3Rpb24oYykge1xuICAgIHZhciB4LCBpO1xuICAgIHggPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwiY2FyZF9ob3Jpc29udGFsLWZpbHRlclwiKTtcbiAgICBpZiAoYyA9PSBcImFsbFwiKSBjID0gXCJcIjtcbiAgICAvLyBBZGQgdGhlIFwiY2FyZF9ob3Jpc29udGFsLWZpbHRlci1zaG93XCIgY2xhc3MgKGRpc3BsYXk6YmxvY2spIHRvIHRoZSBmaWx0ZXJlZCBlbGVtZW50cywgYW5kIHJlbW92ZSB0aGUgXCJjYXJkX2hvcmlzb250YWwtZmlsdGVyLXNob3dcIiBjbGFzcyBmcm9tIHRoZSBlbGVtZW50cyB0aGF0IGFyZSBub3Qgc2VsZWN0ZWRcbiAgICBmb3IgKGkgPSAwOyBpIDwgeC5sZW5ndGg7IGkrKykge1xuICAgICAgICB3M1JlbW92ZUNsYXNzKHhbaV0sIFwiY2FyZF9ob3Jpc29udGFsLWZpbHRlci1zaG93XCIpO1xuICAgICAgICBpZiAoeFtpXS5jbGFzc05hbWUuaW5kZXhPZihjKSA+IC0xKSB3M0FkZENsYXNzKHhbaV0sIFwiY2FyZF9ob3Jpc29udGFsLWZpbHRlci1zaG93XCIpO1xuICAgIH1cbn1cblxuLy8gY2FyZF9ob3Jpc29udGFsLWZpbHRlci1zaG93IGZpbHRlcmVkIGVsZW1lbnRzXG5mdW5jdGlvbiB3M0FkZENsYXNzKGVsZW1lbnQsIG5hbWUpIHtcbiAgICB2YXIgaSwgYXJyMSwgYXJyMjtcbiAgICBhcnIxID0gZWxlbWVudC5jbGFzc05hbWUuc3BsaXQoXCIgXCIpO1xuICAgIGFycjIgPSBuYW1lLnNwbGl0KFwiIFwiKTtcbiAgICBmb3IgKGkgPSAwOyBpIDwgYXJyMi5sZW5ndGg7IGkrKykge1xuICAgICAgICBpZiAoYXJyMS5pbmRleE9mKGFycjJbaV0pID09IC0xKSB7XG4gICAgICAgICAgICBlbGVtZW50LmNsYXNzTmFtZSArPSBcIiBcIiArIGFycjJbaV07XG4gICAgICAgIH1cbiAgICB9XG59XG5cbi8vIEhpZGUgZWxlbWVudHMgdGhhdCBhcmUgbm90IHNlbGVjdGVkXG5mdW5jdGlvbiB3M1JlbW92ZUNsYXNzKGVsZW1lbnQsIG5hbWUpIHtcbiAgICB2YXIgaSwgYXJyMSwgYXJyMjtcbiAgICBhcnIxID0gZWxlbWVudC5jbGFzc05hbWUuc3BsaXQoXCIgXCIpO1xuICAgIGFycjIgPSBuYW1lLnNwbGl0KFwiIFwiKTtcbiAgICBmb3IgKGkgPSAwOyBpIDwgYXJyMi5sZW5ndGg7IGkrKykge1xuICAgICAgICB3aGlsZSAoYXJyMS5pbmRleE9mKGFycjJbaV0pID4gLTEpIHtcbiAgICAgICAgICAgIGFycjEuc3BsaWNlKGFycjEuaW5kZXhPZihhcnIyW2ldKSwgMSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxlbWVudC5jbGFzc05hbWUgPSBhcnIxLmpvaW4oXCIgXCIpO1xufVxuXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgZnVuY3Rpb24gKCkge1xuICAgIHZhciBidG5zID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcInNlbGVjdC1maWx0ZXJfX2l0ZW1cIik7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBidG5zLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGJ0bnNbaV0uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMucGFyZW50RWxlbWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwic2VsZWN0LWZpbHRlcl9faXRlbV9hY3RpdmVcIilbMF0uY2xhc3NMaXN0LnJlbW92ZShcInNlbGVjdC1maWx0ZXJfX2l0ZW1fYWN0aXZlXCIpO1xuICAgICAgICAgICAgdGhpcy5jbGFzc0xpc3QuYWRkKFwic2VsZWN0LWZpbHRlcl9faXRlbV9hY3RpdmVcIik7XG4gICAgICAgIH0pO1xuICAgIH1cbn0sIGZhbHNlKTsiXX0=
