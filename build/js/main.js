"use strict";function closeModal(){document.getElementsByClassName("modal-wrap_active")[0].classList.remove("modal-wrap_active"),document.getElementsByClassName("blur")[0].classList.remove("blur"),document.body.style.overflow="auto"}document.addEventListener("DOMContentLoaded",function(){document.getElementsByClassName("header-menu__switcher")[0].addEventListener("click",function(){document.getElementsByClassName("header-menu")[0].classList.toggle("header-menu_active")})},!1),document.addEventListener("DOMContentLoaded",function(){var L=document.getElementsByClassName("knob__control")[0],p=document.getElementsByClassName("knob__value")[0],E=Array.from(document.getElementsByClassName("tick")),C=300,N=228,w=30,B=function(){for(var e=["transform","msTransform","webkitTransform","mozTransform","oTransform"],t=0;t<e.length;t++){var s=e[t];if(void 0!==document.body.style[s])return s}}();function n(e){return N=e&&N+2<=C?N+2:!e&&0<=N-2?N-2:N,function(){L.style[B]="rotate("+N+"deg)";var e=!0,t=!1,s=void 0;try{for(var n,o=E[Symbol.iterator]();!(e=(n=o.next()).done);e=!0){var a=n.value;a.classList.remove("active")}}catch(e){t=!0,s=e}finally{try{!e&&o.return&&o.return()}finally{if(t)throw s}}var r=Math.round(N/2.6);if(r<=0){var l=!0,i=!1,c=void 0;try{for(var m,d=E.slice(0,1)[Symbol.iterator]();!(l=(m=d.next()).done);l=!0){var u=m.value;u.classList.add("active")}}catch(e){i=!0,c=e}finally{try{!l&&d.return&&d.return()}finally{if(i)throw c}}}else{var v=!0,f=!1,g=void 0;try{for(var h,_=E.slice(0,r)[Symbol.iterator]();!(v=(h=_.next()).done);v=!0){var y=h.value;y.classList.add("active")}}catch(e){f=!0,g=e}finally{try{!v&&_.return&&_.return()}finally{if(f)throw g}}}p.innerHTML="+"+Math.ceil(w/100*Math.round(N/C*100))}()}var s=document.getElementsByClassName("knob")[0];s.onmousedown=function(e){var s=e.pageX;document.onmousemove=function(e){e.pageX>s?n(!0):n(!1),s=e.pageX;var t=document.getElementsByClassName("knob")[0];document.onmouseup=function(){document.onmousemove=null,t.onmouseup=null},L.ondragstart=function(){return!1}}},s.ontouchstart=function(e){var t=e.changedTouches[0].pageX;s.ontouchmove=function(e){e.changedTouches[0].pageX>t?n(!0):n(!1),t=e.changedTouches[0].pageX}}},!1),document.addEventListener("DOMContentLoaded",function(){for(var e=document.getElementsByClassName("device-filter__item"),t=0;t<e.length;t++)e[t].addEventListener("click",function(){var e=document.getElementsByClassName("device-filter__item");if(this.classList.contains("device-filter__item_active"))if(this.classList.contains("device-filter__item_show"))for(var t=0;t<e.length;t++)e[t].classList.remove("device-filter__item_show");else for(t=0;t<e.length;t++)e[t].classList.add("device-filter__item_show");else{document.getElementsByClassName("device-filter__item_active")[0].classList.remove("device-filter__item_active"),this.classList.add("device-filter__item_active");for(t=0;t<e.length;t++)e[t].classList.remove("device-filter__item_show")}})},!1),document.addEventListener("DOMContentLoaded",function(){for(var s=document.getElementsByClassName("modal-trigger"),e=function(t){s[t].addEventListener("click",function(){var e=String(s[t].getAttribute("data-modal"));document.getElementsByClassName(e)[0].classList.add("modal-wrap_active"),document.getElementsByClassName("wrap")[0].classList.add("blur"),document.body.style.overflow="hidden"})},t=0;t<s.length;t++)e(t)},!1);var container=void 0,step=void 0,promStep=void 0,nextPosition=void 0;function scrollTo(s){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1e3,o=s.scrollLeft,a=e-o,r=0;!function e(){r+=20;var t=Math.easeInOutQuad(r,o,a,n);s.scrollLeft=t,r<n&&setTimeout(e,20)}()}function scrollNext(e,t){container=document.getElementsByClassName(e)[0],step=container.hasAttribute("offset")?container.clientWidth-parseInt(container.getAttribute("offset")):container.clientWidth,promStep=Math.ceil(container.scrollLeft/step),nextPosition=Number.isInteger(Math.ceil(container.scrollLeft)/step)?(promStep+1)*step:promStep*step,scrollTo(container,nextPosition,500)}function scrollPrev(e){container=document.getElementsByClassName(e)[0],step=container.hasAttribute("offset")?container.clientWidth-parseInt(container.getAttribute("offset")):container.clientWidth,promStep=Math.floor(container.scrollLeft/step),nextPosition=Number.isInteger(container.scrollLeft/step)?(promStep-1)*step:promStep*step,scrollTo(container,nextPosition,500)}function filterSelection(e){var t,s;for(t=document.getElementsByClassName("card_horisontal-filter"),"all"==e&&(e=""),s=0;s<t.length;s++)w3RemoveClass(t[s],"card_horisontal-filter-show"),-1<t[s].className.indexOf(e)&&w3AddClass(t[s],"card_horisontal-filter-show")}function w3AddClass(e,t){var s,n,o;for(n=e.className.split(" "),o=t.split(" "),s=0;s<o.length;s++)-1==n.indexOf(o[s])&&(e.className+=" "+o[s])}function w3RemoveClass(e,t){var s,n,o;for(n=e.className.split(" "),o=t.split(" "),s=0;s<o.length;s++)for(;-1<n.indexOf(o[s]);)n.splice(n.indexOf(o[s]),1);e.className=n.join(" ")}Math.easeInOutQuad=function(e,t,s,n){return(e/=n/2)<1?s/2*e*e+t:-s/2*(--e*(e-2)-1)+t},document.addEventListener("DOMContentLoaded",function(){for(var a=document.getElementsByClassName("scroll-block"),e=function(e){var t=a[e],s=Array.prototype.slice.call(document.getElementsByClassName(String(t.dataset.controls))),n=s[0].getElementsByClassName("scroll-control__next")[0].getElementsByClassName("svg-scroll-arrow")[0],o=s[0].getElementsByClassName("scroll-control__prev")[0].getElementsByClassName("svg-scroll-arrow")[0];t.scrollWidth==t.clientWidth&&s[0].remove(),a[e].onscroll=function(){this.scrollWidth==this.scrollLeft+this.clientWidth?(n.classList.remove("svg-scroll-arrow_active"),o.classList.add("svg-scroll-arrow_active")):0==this.scrollLeft?(n.classList.add("svg-scroll-arrow_active"),o.classList.remove("svg-scroll-arrow_active")):(n.classList.add("svg-scroll-arrow_active"),o.classList.add("svg-scroll-arrow_active"))}},t=0;t<a.length;t++)e(t);document.getElementsByClassName("favor-cards")[0].onscroll=function(){var e=document.getElementsByClassName("arrow-reminder")[0];0==this.scrollTop?e.classList.remove("arrow-reminder_inactive"):e.classList.add("arrow-reminder_inactive")}},!1),filterSelection("all"),document.addEventListener("DOMContentLoaded",function(){for(var e=document.getElementsByClassName("select-filter__item"),t=0;t<e.length;t++)e[t].addEventListener("click",function(){this.parentElement.getElementsByClassName("select-filter__item_active")[0].classList.remove("select-filter__item_active"),this.classList.add("select-filter__item_active")})},!1);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImhlYWRlci1tZW51LmpzIiwibW9kYWwuanMiLCJrbm9iLmpzIiwibW9iaWxlLXNlbGVjdC5qcyIsInNjcm9sbC5qcyIsInNlbGVjdC5qcyJdLCJuYW1lcyI6WyJjbG9zZU1vZGFsIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50c0J5Q2xhc3NOYW1lIiwiY2xhc3NMaXN0IiwicmVtb3ZlIiwiYm9keSIsInN0eWxlIiwib3ZlcmZsb3ciLCJhZGRFdmVudExpc3RlbmVyIiwidG9nZ2xlIiwia25vYiIsImN1cnIiLCJ0aWNrcyIsIkFycmF5IiwiZnJvbSIsIm1heCIsImFuZ2xlIiwibWF4dGVtcCIsInRyYW5zZm9ybSIsIl9hcnIiLCJfaSIsImxlbmd0aCIsInByb3AiLCJ0dXJudFVwIiwiYm9vbCIsIl9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24iLCJfZGlkSXRlcmF0b3JFcnJvciIsIl9pdGVyYXRvckVycm9yIiwidW5kZWZpbmVkIiwiX3N0ZXAiLCJfaXRlcmF0b3IiLCJTeW1ib2wiLCJpdGVyYXRvciIsIm5leHQiLCJkb25lIiwidGljayIsInZhbHVlIiwiZXJyIiwicmV0dXJuIiwiYWN0aXZlcyIsIk1hdGgiLCJyb3VuZCIsIl9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24yIiwiX2RpZEl0ZXJhdG9yRXJyb3IyIiwiX2l0ZXJhdG9yRXJyb3IyIiwiX3N0ZXAyIiwiX2l0ZXJhdG9yMiIsInNsaWNlIiwiX3RpY2siLCJhZGQiLCJfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uMyIsIl9kaWRJdGVyYXRvckVycm9yMyIsIl9pdGVyYXRvckVycm9yMyIsIl9zdGVwMyIsIl9pdGVyYXRvcjMiLCJfdGljazIiLCJpbm5lckhUTUwiLCJjZWlsIiwic2V0QW5nbGUiLCJrbm9iYXJlYSIsIm9ubW91c2Vkb3duIiwiZSIsInN0YXJ0IiwicGFnZVgiLCJvbm1vdXNlbW92ZSIsIm9ubW91c2V1cCIsIm9uZHJhZ3N0YXJ0Iiwib250b3VjaHN0YXJ0IiwiY2hhbmdlZFRvdWNoZXMiLCJvbnRvdWNobW92ZSIsImJ0bnMiLCJpIiwic2hvd2l0ZW1zIiwidGhpcyIsImNvbnRhaW5zIiwiZCIsInRyaWdnZXJzIiwiX2xvb3AiLCJtb2RhbENsYXNzIiwiU3RyaW5nIiwiZ2V0QXR0cmlidXRlIiwiY29udGFpbmVyIiwic3RlcCIsInByb21TdGVwIiwibmV4dFBvc2l0aW9uIiwic2Nyb2xsVG8iLCJlbGVtZW50IiwidG8iLCJhcmd1bWVudHMiLCJkdXJhdGlvbiIsInNjcm9sbExlZnQiLCJjaGFuZ2UiLCJjdXJyZW50VGltZSIsImFuaW1hdGVTY3JvbGwiLCJ2YWwiLCJlYXNlSW5PdXRRdWFkIiwic2V0VGltZW91dCIsInNjcm9sbE5leHQiLCJibG9jayIsImVsZW0iLCJoYXNBdHRyaWJ1dGUiLCJjbGllbnRXaWR0aCIsInBhcnNlSW50IiwiTnVtYmVyIiwiaXNJbnRlZ2VyIiwic2Nyb2xsUHJldiIsImZsb29yIiwiZmlsdGVyU2VsZWN0aW9uIiwiYyIsIngiLCJ3M1JlbW92ZUNsYXNzIiwiY2xhc3NOYW1lIiwiaW5kZXhPZiIsInczQWRkQ2xhc3MiLCJuYW1lIiwiYXJyMSIsImFycjIiLCJzcGxpdCIsInNwbGljZSIsImpvaW4iLCJ0IiwiYiIsInNjcm9sbEJsb2NrcyIsInNjcm9sbEJsb2NrIiwiY29udHJvbHMiLCJwcm90b3R5cGUiLCJjYWxsIiwiZGF0YXNldCIsInByZXYiLCJzY3JvbGxXaWR0aCIsIm9uc2Nyb2xsIiwicmVtaW5kZXIiLCJzY3JvbGxUb3AiLCJwYXJlbnRFbGVtZW50Il0sIm1hcHBpbmdzIjoiQUFBQSxhQ21CQSxTQUFBQSxhQUNBQyxTQUFBQyx1QkFBQSxxQkFBQSxHQUFBQyxVQUFBQyxPQUFBLHFCQUNBSCxTQUFBQyx1QkFBQSxRQUFBLEdBQUFDLFVBQUFDLE9BQUEsUUFDQUgsU0FBQUksS0FBQUMsTUFBQUMsU0FBQSxPRHBCQU4sU0FBQU8saUJBQUEsbUJBQUEsV0FDQVAsU0FBQUMsdUJBQUEseUJBQUEsR0FBQU0saUJBQUEsUUFBQSxXQUNBUCxTQUFBQyx1QkFBQSxlQUFBLEdBQUFDLFVBQUFNLE9BQUEsMEJBRUEsR0VKQVIsU0FBQU8saUJBQUEsbUJBQUEsV0FFQSxJQUFBRSxFQUFBVCxTQUFBQyx1QkFBQSxpQkFBQSxHQUNBUyxFQUFBVixTQUFBQyx1QkFBQSxlQUFBLEdBQ0FVLEVBQUFDLE1BQUFDLEtBQUFiLFNBQUFDLHVCQUFBLFNBR0FhLEVBQUEsSUFDQUMsRUFBQSxJQUNBQyxFQUFBLEdBQ0FDLEVBQUEsV0FHQSxJQUZBLElBQUFDLEVBQUEsQ0FBQSxZQUFBLGNBQUEsa0JBQUEsZUFBQSxjQUVBQyxFQUFBLEVBQUFBLEVBQUFELEVBQUFFLE9BQUFELElBQUEsQ0FDQSxJQUFBRSxFQUFBSCxFQUFBQyxHQUNBLFFBQUEsSUFBQW5CLFNBQUFJLEtBQUFDLE1BQUFnQixHQUNBLE9BQUFBLEdBTkEsR0FXQSxTQUFBQyxFQUFBQyxHQUVBLE9BREFSLEVBQUFRLEdBQUFSLEVBQUEsR0FBQUQsRUFBQUMsRUFBQSxHQUFBUSxHQWhCQSxHQWdCQVIsRUFBQSxFQUFBQSxFQUFBLEVBQUFBLEVBSUEsV0FFQU4sRUFBQUosTUFBQVksR0FBQSxVQUFBRixFQUFBLE9BR0EsSUFBQVMsR0FBQSxFQUNBQyxHQUFBLEVBQ0FDLE9BQUFDLEVBRUEsSUFDQSxJQUFBLElBQUFDLEVBQUFDLEVBQUFsQixFQUFBbUIsT0FBQUMsY0FBQVAsR0FBQUksRUFBQUMsRUFBQUcsUUFBQUMsTUFBQVQsR0FBQSxFQUFBLENBQ0EsSUFBQVUsRUFBQU4sRUFBQU8sTUFFQUQsRUFBQWhDLFVBQUFDLE9BQUEsV0FJQSxNQUFBaUMsR0FDQVgsR0FBQSxFQUNBQyxFQUFBVSxFQUNBLFFBQ0EsS0FDQVosR0FBQUssRUFBQVEsUUFDQVIsRUFBQVEsU0FFQSxRQUNBLEdBQUFaLEVBQ0EsTUFBQUMsR0FLQSxJQUFBWSxFQUFBQyxLQUFBQyxNQUFBekIsRUFBQSxLQUVBLEdBQUF1QixHQUFBLEVBQUEsQ0FDQSxJQUFBRyxHQUFBLEVBQ0FDLEdBQUEsRUFDQUMsT0FBQWhCLEVBRUEsSUFDQSxJQUFBLElBQUFpQixFQUFBQyxFQUFBbEMsRUFBQW1DLE1BQUEsRUFBQSxHQUFBaEIsT0FBQUMsY0FBQVUsR0FBQUcsRUFBQUMsRUFBQWIsUUFBQUMsTUFBQVEsR0FBQSxFQUFBLENBQ0EsSUFBQU0sRUFBQUgsRUFBQVQsTUFFQVksRUFBQTdDLFVBQUE4QyxJQUFBLFdBRUEsTUFBQVosR0FDQU0sR0FBQSxFQUNBQyxFQUFBUCxFQUNBLFFBQ0EsS0FDQUssR0FBQUksRUFBQVIsUUFDQVEsRUFBQVIsU0FFQSxRQUNBLEdBQUFLLEVBQ0EsTUFBQUMsUUFJQSxDQUNBLElBQUFNLEdBQUEsRUFDQUMsR0FBQSxFQUNBQyxPQUFBeEIsRUFFQSxJQUNBLElBQUEsSUFBQXlCLEVBQUFDLEVBQUExQyxFQUFBbUMsTUFBQSxFQUFBUixHQUFBUixPQUFBQyxjQUFBa0IsR0FBQUcsRUFBQUMsRUFBQXJCLFFBQUFDLE1BQUFnQixHQUFBLEVBQUEsQ0FDQSxJQUFBSyxFQUFBRixFQUFBakIsTUFFQW1CLEVBQUFwRCxVQUFBOEMsSUFBQSxXQUVBLE1BQUFaLEdBQ0FjLEdBQUEsRUFDQUMsRUFBQWYsRUFDQSxRQUNBLEtBQ0FhLEdBQUFJLEVBQUFoQixRQUNBZ0IsRUFBQWhCLFNBRUEsUUFDQSxHQUFBYSxFQUNBLE1BQUFDLElBT0F6QyxFQUFBNkMsVUFBQSxJQUFBaEIsS0FBQWlCLEtBQUF4QyxFQUFBLElBQUF1QixLQUFBQyxNQUFBekIsRUFBQUQsRUFBQSxNQTFGQTJDLEdBNkZBLElBQUFDLEVBQUExRCxTQUFBQyx1QkFBQSxRQUFBLEdBRUF5RCxFQUFBQyxZQUFBLFNBQUFDLEdBRUEsSUFBQUMsRUFBQUQsRUFBQUUsTUFDQTlELFNBQUErRCxZQUFBLFNBQUFILEdBRUFBLEVBQUFFLE1BQUFELEVBQ0F2QyxHQUFBLEdBRUFBLEdBQUEsR0FHQXVDLEVBQUFELEVBQUFFLE1BQ0EsSUFBQUosRUFBQTFELFNBQUFDLHVCQUFBLFFBQUEsR0FDQUQsU0FBQWdFLFVBQUEsV0FDQWhFLFNBQUErRCxZQUFBLEtBQ0FMLEVBQUFNLFVBQUEsTUFHQXZELEVBQUF3RCxZQUFBLFdBQ0EsT0FBQSxLQUtBUCxFQUFBUSxhQUFBLFNBQUFOLEdBQ0EsSUFBQUMsRUFBQUQsRUFBQU8sZUFBQSxHQUFBTCxNQUNBSixFQUFBVSxZQUFBLFNBQUFSLEdBRUFBLEVBQUFPLGVBQUEsR0FBQUwsTUFBQUQsRUFDQXZDLEdBQUEsR0FFQUEsR0FBQSxHQUdBdUMsRUFBQUQsRUFBQU8sZUFBQSxHQUFBTCxVQUdBLEdDM0pBOUQsU0FBQU8saUJBQUEsbUJBQUEsV0FFQSxJQURBLElBQUE4RCxFQUFBckUsU0FBQUMsdUJBQUEsdUJBQ0FxRSxFQUFBLEVBQUFBLEVBQUFELEVBQUFqRCxPQUFBa0QsSUFDQUQsRUFBQUMsR0FBQS9ELGlCQUFBLFFBQUEsV0FDQSxJQUFBZ0UsRUFBQXZFLFNBQUFDLHVCQUFBLHVCQUVBLEdBQUF1RSxLQUFBdEUsVUFBQXVFLFNBQUEsOEJBRUEsR0FBQUQsS0FBQXRFLFVBQUF1RSxTQUFBLDRCQUVBLElBQUEsSUFBQUMsRUFBQSxFQUFBQSxFQUFBSCxFQUFBbkQsT0FBQXNELElBQ0FILEVBQUFHLEdBQUF4RSxVQUFBQyxPQUFBLGlDQUlBLElBQUF1RSxFQUFBLEVBQUFBLEVBQUFILEVBQUFuRCxPQUFBc0QsSUFDQUgsRUFBQUcsR0FBQXhFLFVBQUE4QyxJQUFBLGdDQUdBLENBQ0FoRCxTQUFBQyx1QkFBQSw4QkFBQSxHQUFBQyxVQUFBQyxPQUFBLDhCQUNBcUUsS0FBQXRFLFVBQUE4QyxJQUFBLDhCQUNBLElBQUEwQixFQUFBLEVBQUFBLEVBQUFILEVBQUFuRCxPQUFBc0QsSUFDQUgsRUFBQUcsR0FBQXhFLFVBQUFDLE9BQUEsaUNBS0EsR0Y1QkFILFNBQUFPLGlCQUFBLG1CQUFBLFdBWUEsSUFYQSxJQUFBb0UsRUFBQTNFLFNBQUFDLHVCQUFBLGlCQUVBMkUsRUFBQSxTQUFBTixHQUNBSyxFQUFBTCxHQUFBL0QsaUJBQUEsUUFBQSxXQUNBLElBQUFzRSxFQUFBQyxPQUFBSCxFQUFBTCxHQUFBUyxhQUFBLGVBQ0EvRSxTQUFBQyx1QkFBQTRFLEdBQUEsR0FBQTNFLFVBQUE4QyxJQUFBLHFCQUNBaEQsU0FBQUMsdUJBQUEsUUFBQSxHQUFBQyxVQUFBOEMsSUFBQSxRQUNBaEQsU0FBQUksS0FBQUMsTUFBQUMsU0FBQSxZQUlBZ0UsRUFBQSxFQUFBQSxFQUFBSyxFQUFBdkQsT0FBQWtELElBQ0FNLEVBQUFOLEtBRUEsR0dmQSxJQUFBVSxlQUFBLEVBQ0FDLFVBQUEsRUFDQUMsY0FBQSxFQUNBQyxrQkFBQSxFQUVBLFNBQUFDLFNBQUFDLEdBQ0EsSUFBQUMsRUFBQSxFQUFBQyxVQUFBbkUsYUFBQU8sSUFBQTRELFVBQUEsR0FBQUEsVUFBQSxHQUFBLEVBQ0FDLEVBQUEsRUFBQUQsVUFBQW5FLGFBQUFPLElBQUE0RCxVQUFBLEdBQUFBLFVBQUEsR0FBQSxJQUdBMUIsRUFBQXdCLEVBQUFJLFdBQ0FDLEVBQUFKLEVBQUF6QixFQUVBOEIsRUFBQSxHQUVBLFNBQUFDLElBRUFELEdBTEEsR0FPQSxJQUFBRSxFQUFBdEQsS0FBQXVELGNBQUFILEVBQUE5QixFQUFBNkIsRUFBQUYsR0FFQUgsRUFBQUksV0FBQUksRUFFQUYsRUFBQUgsR0FDQU8sV0FBQUgsRUFaQSxJQWdCQUEsR0FXQSxTQUFBSSxXQUFBQyxFQUFBQyxHQUVBbEIsVUFBQWhGLFNBQUFDLHVCQUFBZ0csR0FBQSxHQUdBaEIsS0FEQUQsVUFBQW1CLGFBQUEsVUFDQW5CLFVBQUFvQixZQUFBQyxTQUFBckIsVUFBQUQsYUFBQSxXQUVBQyxVQUFBb0IsWUFFQWxCLFNBQUEzQyxLQUFBaUIsS0FBQXdCLFVBQUFTLFdBQUFSLE1BR0FFLGFBREFtQixPQUFBQyxVQUFBaEUsS0FBQWlCLEtBQUF3QixVQUFBUyxZQUFBUixPQUNBQyxTQUFBLEdBQUFELEtBRUFDLFNBQUFELEtBRUFHLFNBQUFKLFVBQUFHLGFBQUEsS0FHQSxTQUFBcUIsV0FBQVAsR0FFQWpCLFVBQUFoRixTQUFBQyx1QkFBQWdHLEdBQUEsR0FHQWhCLEtBREFELFVBQUFtQixhQUFBLFVBQ0FuQixVQUFBb0IsWUFBQUMsU0FBQXJCLFVBQUFELGFBQUEsV0FFQUMsVUFBQW9CLFlBRUFsQixTQUFBM0MsS0FBQWtFLE1BQUF6QixVQUFBUyxXQUFBUixNQUVBRSxhQURBbUIsT0FBQUMsVUFBQXZCLFVBQUFTLFdBQUFSLE9BQ0FDLFNBQUEsR0FBQUQsS0FFQUMsU0FBQUQsS0FHQUcsU0FBQUosVUFBQUcsYUFBQSxLQ3hFQSxTQUFBdUIsZ0JBQUFDLEdBQ0EsSUFBQUMsRUFBQXRDLEVBSUEsSUFIQXNDLEVBQUE1RyxTQUFBQyx1QkFBQSwwQkFDQSxPQUFBMEcsSUFBQUEsRUFBQSxJQUVBckMsRUFBQSxFQUFBQSxFQUFBc0MsRUFBQXhGLE9BQUFrRCxJQUNBdUMsY0FBQUQsRUFBQXRDLEdBQUEsZ0NBQ0EsRUFBQXNDLEVBQUF0QyxHQUFBd0MsVUFBQUMsUUFBQUosSUFBQUssV0FBQUosRUFBQXRDLEdBQUEsK0JBS0EsU0FBQTBDLFdBQUEzQixFQUFBNEIsR0FDQSxJQUFBM0MsRUFBQTRDLEVBQUFDLEVBR0EsSUFGQUQsRUFBQTdCLEVBQUF5QixVQUFBTSxNQUFBLEtBQ0FELEVBQUFGLEVBQUFHLE1BQUEsS0FDQTlDLEVBQUEsRUFBQUEsRUFBQTZDLEVBQUEvRixPQUFBa0QsS0FDQSxHQUFBNEMsRUFBQUgsUUFBQUksRUFBQTdDLE1BQ0FlLEVBQUF5QixXQUFBLElBQUFLLEVBQUE3QyxJQU1BLFNBQUF1QyxjQUFBeEIsRUFBQTRCLEdBQ0EsSUFBQTNDLEVBQUE0QyxFQUFBQyxFQUdBLElBRkFELEVBQUE3QixFQUFBeUIsVUFBQU0sTUFBQSxLQUNBRCxFQUFBRixFQUFBRyxNQUFBLEtBQ0E5QyxFQUFBLEVBQUFBLEVBQUE2QyxFQUFBL0YsT0FBQWtELElBQ0EsTUFBQSxFQUFBNEMsRUFBQUgsUUFBQUksRUFBQTdDLEtBQ0E0QyxFQUFBRyxPQUFBSCxFQUFBSCxRQUFBSSxFQUFBN0MsSUFBQSxHQUdBZSxFQUFBeUIsVUFBQUksRUFBQUksS0FBQSxLREpBL0UsS0FBQXVELGNBQUEsU0FBQXlCLEVBQUFDLEVBQUFiLEVBQUFqQyxHQUdBLE9BREE2QyxHQUFBN0MsRUFBQSxHQUNBLEVBQUFpQyxFQUFBLEVBQUFZLEVBQUFBLEVBQUFDLEdBRUFiLEVBQUEsS0FEQVksR0FDQUEsRUFBQSxHQUFBLEdBQUFDLEdBeUNBeEgsU0FBQU8saUJBQUEsbUJBQUEsV0E0QkEsSUEzQkEsSUFBQWtILEVBQUF6SCxTQUFBQyx1QkFBQSxnQkFFQTJFLEVBQUEsU0FBQU4sR0FDQSxJQUFBb0QsRUFBQUQsRUFBQW5ELEdBQ0FxRCxFQUFBL0csTUFBQWdILFVBQUE5RSxNQUFBK0UsS0FBQTdILFNBQUFDLHVCQUFBNkUsT0FBQTRDLEVBQUFJLFFBQUFILFlBQ0EzRixFQUFBMkYsRUFBQSxHQUFBMUgsdUJBQUEsd0JBQUEsR0FBQUEsdUJBQUEsb0JBQUEsR0FDQThILEVBQUFKLEVBQUEsR0FBQTFILHVCQUFBLHdCQUFBLEdBQUFBLHVCQUFBLG9CQUFBLEdBQ0F5SCxFQUFBTSxhQUFBTixFQUFBdEIsYUFDQXVCLEVBQUEsR0FBQXhILFNBR0FzSCxFQUFBbkQsR0FBQTJELFNBQUEsV0FHQXpELEtBQUF3RCxhQUFBeEQsS0FBQWlCLFdBQUFqQixLQUFBNEIsYUFDQXBFLEVBQUE5QixVQUFBQyxPQUFBLDJCQUNBNEgsRUFBQTdILFVBQUE4QyxJQUFBLDRCQUNBLEdBQUF3QixLQUFBaUIsWUFDQXpELEVBQUE5QixVQUFBOEMsSUFBQSwyQkFDQStFLEVBQUE3SCxVQUFBQyxPQUFBLDZCQUVBNkIsRUFBQTlCLFVBQUE4QyxJQUFBLDJCQUNBK0UsRUFBQTdILFVBQUE4QyxJQUFBLDhCQUtBc0IsRUFBQSxFQUFBQSxFQUFBbUQsRUFBQXJHLE9BQUFrRCxJQUNBTSxFQUFBTixHQUlBdEUsU0FBQUMsdUJBQUEsZUFBQSxHQUFBZ0ksU0FBQSxXQUNBLElBQUFDLEVBQUFsSSxTQUFBQyx1QkFBQSxrQkFBQSxHQUNBLEdBQUF1RSxLQUFBMkQsVUFDQUQsRUFBQWhJLFVBQUFDLE9BQUEsMkJBRUErSCxFQUFBaEksVUFBQThDLElBQUEsOEJBS0EsR0N4SEEwRCxnQkFBQSxPQXNDQTFHLFNBQUFPLGlCQUFBLG1CQUFBLFdBRUEsSUFEQSxJQUFBOEQsRUFBQXJFLFNBQUFDLHVCQUFBLHVCQUNBcUUsRUFBQSxFQUFBQSxFQUFBRCxFQUFBakQsT0FBQWtELElBQ0FELEVBQUFDLEdBQUEvRCxpQkFBQSxRQUFBLFdBQ0FpRSxLQUFBNEQsY0FBQW5JLHVCQUFBLDhCQUFBLEdBQUFDLFVBQUFDLE9BQUEsOEJBQ0FxRSxLQUFBdEUsVUFBQThDLElBQUEsa0NBR0EiLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcblxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGZ1bmN0aW9uICgpIHtcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdoZWFkZXItbWVudV9fc3dpdGNoZXInKVswXS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnaGVhZGVyLW1lbnUnKVswXS5jbGFzc0xpc3QudG9nZ2xlKCdoZWFkZXItbWVudV9hY3RpdmUnKTtcbiAgICB9KTtcbn0sIGZhbHNlKTsiLCIndXNlIHN0cmljdCc7XG5cbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHRyaWdnZXJzID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnbW9kYWwtdHJpZ2dlcicpO1xuXG4gICAgdmFyIF9sb29wID0gZnVuY3Rpb24gX2xvb3AoaSkge1xuICAgICAgICB0cmlnZ2Vyc1tpXS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIG1vZGFsQ2xhc3MgPSBTdHJpbmcodHJpZ2dlcnNbaV0uZ2V0QXR0cmlidXRlKCdkYXRhLW1vZGFsJykpO1xuICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShtb2RhbENsYXNzKVswXS5jbGFzc0xpc3QuYWRkKCdtb2RhbC13cmFwX2FjdGl2ZScpO1xuICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnd3JhcCcpWzBdLmNsYXNzTGlzdC5hZGQoJ2JsdXInKTtcbiAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuc3R5bGUub3ZlcmZsb3cgPSBcImhpZGRlblwiO1xuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0cmlnZ2Vycy5sZW5ndGg7IGkrKykge1xuICAgICAgICBfbG9vcChpKTtcbiAgICB9XG59LCBmYWxzZSk7XG5cbmZ1bmN0aW9uIGNsb3NlTW9kYWwoKSB7XG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnbW9kYWwtd3JhcF9hY3RpdmUnKVswXS5jbGFzc0xpc3QucmVtb3ZlKCdtb2RhbC13cmFwX2FjdGl2ZScpO1xuICAgIGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ2JsdXInKVswXS5jbGFzc0xpc3QucmVtb3ZlKCdibHVyJyk7XG4gICAgZG9jdW1lbnQuYm9keS5zdHlsZS5vdmVyZmxvdyA9IFwiYXV0b1wiO1xufSIsIid1c2Ugc3RyaWN0JztcblxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGZ1bmN0aW9uICgpIHtcblxuICAgIHZhciBrbm9iID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgna25vYl9fY29udHJvbCcpWzBdO1xuICAgIHZhciBjdXJyID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgna25vYl9fdmFsdWUnKVswXTtcbiAgICB2YXIgdGlja3MgPSBBcnJheS5mcm9tKGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ3RpY2snKSk7XG5cbiAgICB2YXIgbWluID0gMDtcbiAgICB2YXIgbWF4ID0gMzAwO1xuICAgIHZhciBhbmdsZSA9IDIyODtcbiAgICB2YXIgbWF4dGVtcCA9IDMwO1xuICAgIHZhciB0cmFuc2Zvcm0gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBfYXJyID0gWyd0cmFuc2Zvcm0nLCAnbXNUcmFuc2Zvcm0nLCAnd2Via2l0VHJhbnNmb3JtJywgJ21velRyYW5zZm9ybScsICdvVHJhbnNmb3JtJ107XG5cbiAgICAgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IF9hcnIubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICB2YXIgcHJvcCA9IF9hcnJbX2ldO1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBkb2N1bWVudC5ib2R5LnN0eWxlW3Byb3BdICE9ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHByb3A7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9KCk7XG5cbiAgICBmdW5jdGlvbiB0dXJudFVwKGJvb2wpIHtcbiAgICAgICAgYW5nbGUgPSBib29sICYmIGFuZ2xlICsgMiA8PSBtYXggPyBhbmdsZSArIDIgOiAhYm9vbCAmJiBhbmdsZSAtIDIgPj0gbWluID8gYW5nbGUgLSAyIDogYW5nbGU7XG4gICAgICAgIHJldHVybiBzZXRBbmdsZSgpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHNldEFuZ2xlKCkge1xuICAgICAgICAvLyByb3RhdGUga25vYlxuICAgICAgICBrbm9iLnN0eWxlW3RyYW5zZm9ybV0gPSAncm90YXRlKCcgKyBhbmdsZSArICdkZWcpJztcblxuICAgICAgICAvLyBxdWlja2x5IHJlc2V0IHRpY2tzXG4gICAgICAgIHZhciBfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uID0gdHJ1ZTtcbiAgICAgICAgdmFyIF9kaWRJdGVyYXRvckVycm9yID0gZmFsc2U7XG4gICAgICAgIHZhciBfaXRlcmF0b3JFcnJvciA9IHVuZGVmaW5lZDtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgZm9yICh2YXIgX2l0ZXJhdG9yID0gdGlja3NbU3ltYm9sLml0ZXJhdG9yXSgpLCBfc3RlcDsgIShfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uID0gKF9zdGVwID0gX2l0ZXJhdG9yLm5leHQoKSkuZG9uZSk7IF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24gPSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgdmFyIHRpY2sgPSBfc3RlcC52YWx1ZTtcblxuICAgICAgICAgICAgICAgIHRpY2suY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIGFkZCBnbG93IHRvICdhY3RpdmUnIHRpY2tzXG4gICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgX2RpZEl0ZXJhdG9yRXJyb3IgPSB0cnVlO1xuICAgICAgICAgICAgX2l0ZXJhdG9yRXJyb3IgPSBlcnI7XG4gICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGlmICghX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbiAmJiBfaXRlcmF0b3IucmV0dXJuKSB7XG4gICAgICAgICAgICAgICAgICAgIF9pdGVyYXRvci5yZXR1cm4oKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgICAgIGlmIChfZGlkSXRlcmF0b3JFcnJvcikge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBfaXRlcmF0b3JFcnJvcjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgYWN0aXZlcyA9IE1hdGgucm91bmQoYW5nbGUgLyAyLjYpO1xuXG4gICAgICAgIGlmIChhY3RpdmVzIDw9IDApIHtcbiAgICAgICAgICAgIHZhciBfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uMiA9IHRydWU7XG4gICAgICAgICAgICB2YXIgX2RpZEl0ZXJhdG9yRXJyb3IyID0gZmFsc2U7XG4gICAgICAgICAgICB2YXIgX2l0ZXJhdG9yRXJyb3IyID0gdW5kZWZpbmVkO1xuXG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGZvciAodmFyIF9pdGVyYXRvcjIgPSB0aWNrcy5zbGljZSgwLCAxKVtTeW1ib2wuaXRlcmF0b3JdKCksIF9zdGVwMjsgIShfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uMiA9IChfc3RlcDIgPSBfaXRlcmF0b3IyLm5leHQoKSkuZG9uZSk7IF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24yID0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgX3RpY2sgPSBfc3RlcDIudmFsdWU7XG5cbiAgICAgICAgICAgICAgICAgICAgX3RpY2suY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgX2RpZEl0ZXJhdG9yRXJyb3IyID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBfaXRlcmF0b3JFcnJvcjIgPSBlcnI7XG4gICAgICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbjIgJiYgX2l0ZXJhdG9yMi5yZXR1cm4pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9pdGVyYXRvcjIucmV0dXJuKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoX2RpZEl0ZXJhdG9yRXJyb3IyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBfaXRlcmF0b3JFcnJvcjI7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB2YXIgX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbjMgPSB0cnVlO1xuICAgICAgICAgICAgdmFyIF9kaWRJdGVyYXRvckVycm9yMyA9IGZhbHNlO1xuICAgICAgICAgICAgdmFyIF9pdGVyYXRvckVycm9yMyA9IHVuZGVmaW5lZDtcblxuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBfaXRlcmF0b3IzID0gdGlja3Muc2xpY2UoMCwgYWN0aXZlcylbU3ltYm9sLml0ZXJhdG9yXSgpLCBfc3RlcDM7ICEoX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbjMgPSAoX3N0ZXAzID0gX2l0ZXJhdG9yMy5uZXh0KCkpLmRvbmUpOyBfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uMyA9IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIF90aWNrMiA9IF9zdGVwMy52YWx1ZTtcblxuICAgICAgICAgICAgICAgICAgICBfdGljazIuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgX2RpZEl0ZXJhdG9yRXJyb3IzID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBfaXRlcmF0b3JFcnJvcjMgPSBlcnI7XG4gICAgICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbjMgJiYgX2l0ZXJhdG9yMy5yZXR1cm4pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9pdGVyYXRvcjMucmV0dXJuKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoX2RpZEl0ZXJhdG9yRXJyb3IzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBfaXRlcmF0b3JFcnJvcjM7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyB1cGRhdGUgJSB2YWx1ZSBhcyB0ZXh0XG4gICAgICAgIGN1cnIuaW5uZXJIVE1MID0gJysnICsgTWF0aC5jZWlsKG1heHRlbXAgLyAxMDAgKiBNYXRoLnJvdW5kKGFuZ2xlIC8gbWF4ICogMTAwKSk7XG4gICAgfVxuXG4gICAgdmFyIGtub2JhcmVhID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgna25vYicpWzBdO1xuXG4gICAga25vYmFyZWEub25tb3VzZWRvd24gPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAvLyAxLiDQvtGC0YHQu9C10LTQuNGC0Ywg0L3QsNC20LDRgtC40LVcbiAgICAgICAgdmFyIHN0YXJ0ID0gZS5wYWdlWDtcbiAgICAgICAgZG9jdW1lbnQub25tb3VzZW1vdmUgPSBmdW5jdGlvbiAoZSkge1xuXG4gICAgICAgICAgICBpZiAoZS5wYWdlWCA+IHN0YXJ0KSB7XG4gICAgICAgICAgICAgICAgdHVybnRVcCh0cnVlKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdHVybnRVcChmYWxzZSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHN0YXJ0ID0gZS5wYWdlWDtcbiAgICAgICAgICAgIHZhciBrbm9iYXJlYSA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ2tub2InKVswXTtcbiAgICAgICAgICAgIGRvY3VtZW50Lm9ubW91c2V1cCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5vbm1vdXNlbW92ZSA9IG51bGw7XG4gICAgICAgICAgICAgICAga25vYmFyZWEub25tb3VzZXVwID0gbnVsbDtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIGtub2Iub25kcmFnc3RhcnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfTtcbiAgICB9O1xuXG4gICAga25vYmFyZWEub250b3VjaHN0YXJ0ID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgdmFyIHN0YXJ0ID0gZS5jaGFuZ2VkVG91Y2hlc1swXS5wYWdlWDtcbiAgICAgICAga25vYmFyZWEub250b3VjaG1vdmUgPSBmdW5jdGlvbiAoZSkge1xuXG4gICAgICAgICAgICBpZiAoZS5jaGFuZ2VkVG91Y2hlc1swXS5wYWdlWCA+IHN0YXJ0KSB7XG4gICAgICAgICAgICAgICAgdHVybnRVcCh0cnVlKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdHVybnRVcChmYWxzZSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHN0YXJ0ID0gZS5jaGFuZ2VkVG91Y2hlc1swXS5wYWdlWDtcbiAgICAgICAgfTsgLy8gICBhbGVydChlLmNoYW5nZWRUb3VjaGVzWzBdLnBhZ2VYKSAvLyDQv9C+0LrQsNC3INC60L7RgNGA0LTQuNC90LDRgiDQvNC10YHRgtCwINC/0YDQuNC60L7RgdC90L7QstC10L3QuNGPINC/0L4gWC3Rgy5cbiAgICB9O1xufSwgZmFsc2UpO1xuXG4vLyBmdW5jdGlvbiBnZXRDdXJDb29yZHNJbnNpZGVSZWN0KGUpIHtcbi8vICAgICB2YXIgeCA9IGUub2Zmc2V0WCA9PSB1bmRlZmluZWQgPyBlLmxheWVyWCA6IGUub2Zmc2V0WDtcbi8vICAgICB2YXIgeSA9IGUub2Zmc2V0WSA9PSB1bmRlZmluZWQgPyBlLmxheWVyWSA6IGUub2Zmc2V0WTtcblxuLy8gICAgIGFsZXJ0KHggKyAneCcgKyB5KTtcbi8vIH1cblxuLy8gZnVuY3Rpb24gZ2V0RWxlbWVudChlLCBlbGVtZW50KSB7XG4vLyAgICAgZ2V0Q3VyQ29vcmRzSW5zaWRlUmVjdChlLCBlbGVtZW50KTtcbi8vIH0iLCJcInVzZSBzdHJpY3RcIjtcblxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgYnRucyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJkZXZpY2UtZmlsdGVyX19pdGVtXCIpO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYnRucy5sZW5ndGg7IGkrKykge1xuICAgICAgICBidG5zW2ldLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgc2hvd2l0ZW1zID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcImRldmljZS1maWx0ZXJfX2l0ZW1cIik7XG5cbiAgICAgICAgICAgIGlmICh0aGlzLmNsYXNzTGlzdC5jb250YWlucyhcImRldmljZS1maWx0ZXJfX2l0ZW1fYWN0aXZlXCIpKSB7XG5cbiAgICAgICAgICAgICAgICBpZiAodGhpcy5jbGFzc0xpc3QuY29udGFpbnMoXCJkZXZpY2UtZmlsdGVyX19pdGVtX3Nob3dcIikpIHtcblxuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBkID0gMDsgZCA8IHNob3dpdGVtcy5sZW5ndGg7IGQrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2hvd2l0ZW1zW2RdLmNsYXNzTGlzdC5yZW1vdmUoXCJkZXZpY2UtZmlsdGVyX19pdGVtX3Nob3dcIik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuXG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGQgPSAwOyBkIDwgc2hvd2l0ZW1zLmxlbmd0aDsgZCsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzaG93aXRlbXNbZF0uY2xhc3NMaXN0LmFkZChcImRldmljZS1maWx0ZXJfX2l0ZW1fc2hvd1wiKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcImRldmljZS1maWx0ZXJfX2l0ZW1fYWN0aXZlXCIpWzBdLmNsYXNzTGlzdC5yZW1vdmUoXCJkZXZpY2UtZmlsdGVyX19pdGVtX2FjdGl2ZVwiKTtcbiAgICAgICAgICAgICAgICB0aGlzLmNsYXNzTGlzdC5hZGQoXCJkZXZpY2UtZmlsdGVyX19pdGVtX2FjdGl2ZVwiKTtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBkID0gMDsgZCA8IHNob3dpdGVtcy5sZW5ndGg7IGQrKykge1xuICAgICAgICAgICAgICAgICAgICBzaG93aXRlbXNbZF0uY2xhc3NMaXN0LnJlbW92ZShcImRldmljZS1maWx0ZXJfX2l0ZW1fc2hvd1wiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbn0sIGZhbHNlKTsiLCIndXNlIHN0cmljdCc7XG5cbnZhciBjb250YWluZXIgPSB2b2lkIDA7XG52YXIgc3RlcCA9IHZvaWQgMDtcbnZhciBwcm9tU3RlcCA9IHZvaWQgMDtcbnZhciBuZXh0UG9zaXRpb24gPSB2b2lkIDA7XG5cbmZ1bmN0aW9uIHNjcm9sbFRvKGVsZW1lbnQpIHtcbiAgICB2YXIgdG8gPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IDA7XG4gICAgdmFyIGR1cmF0aW9uID0gYXJndW1lbnRzLmxlbmd0aCA+IDIgJiYgYXJndW1lbnRzWzJdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMl0gOiAxMDAwO1xuXG5cbiAgICB2YXIgc3RhcnQgPSBlbGVtZW50LnNjcm9sbExlZnQ7XG4gICAgdmFyIGNoYW5nZSA9IHRvIC0gc3RhcnQ7XG4gICAgdmFyIGluY3JlbWVudCA9IDIwO1xuICAgIHZhciBjdXJyZW50VGltZSA9IDA7XG5cbiAgICB2YXIgYW5pbWF0ZVNjcm9sbCA9IGZ1bmN0aW9uIGFuaW1hdGVTY3JvbGwoKSB7XG5cbiAgICAgICAgY3VycmVudFRpbWUgKz0gaW5jcmVtZW50O1xuXG4gICAgICAgIHZhciB2YWwgPSBNYXRoLmVhc2VJbk91dFF1YWQoY3VycmVudFRpbWUsIHN0YXJ0LCBjaGFuZ2UsIGR1cmF0aW9uKTtcblxuICAgICAgICBlbGVtZW50LnNjcm9sbExlZnQgPSB2YWw7XG5cbiAgICAgICAgaWYgKGN1cnJlbnRUaW1lIDwgZHVyYXRpb24pIHtcbiAgICAgICAgICAgIHNldFRpbWVvdXQoYW5pbWF0ZVNjcm9sbCwgaW5jcmVtZW50KTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICBhbmltYXRlU2Nyb2xsKCk7XG59O1xuXG5NYXRoLmVhc2VJbk91dFF1YWQgPSBmdW5jdGlvbiAodCwgYiwgYywgZCkge1xuXG4gICAgdCAvPSBkIC8gMjtcbiAgICBpZiAodCA8IDEpIHJldHVybiBjIC8gMiAqIHQgKiB0ICsgYjtcbiAgICB0LS07XG4gICAgcmV0dXJuIC1jIC8gMiAqICh0ICogKHQgLSAyKSAtIDEpICsgYjtcbn07XG5cbmZ1bmN0aW9uIHNjcm9sbE5leHQoYmxvY2ssIGVsZW0pIHtcblxuICAgIGNvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoYmxvY2spWzBdO1xuXG4gICAgaWYgKGNvbnRhaW5lci5oYXNBdHRyaWJ1dGUoJ29mZnNldCcpKSB7XG4gICAgICAgIHN0ZXAgPSBjb250YWluZXIuY2xpZW50V2lkdGggLSBwYXJzZUludChjb250YWluZXIuZ2V0QXR0cmlidXRlKCdvZmZzZXQnKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgc3RlcCA9IGNvbnRhaW5lci5jbGllbnRXaWR0aDtcbiAgICB9XG4gICAgcHJvbVN0ZXAgPSBNYXRoLmNlaWwoY29udGFpbmVyLnNjcm9sbExlZnQgLyBzdGVwKTtcblxuICAgIGlmIChOdW1iZXIuaXNJbnRlZ2VyKE1hdGguY2VpbChjb250YWluZXIuc2Nyb2xsTGVmdCkgLyBzdGVwKSkge1xuICAgICAgICBuZXh0UG9zaXRpb24gPSAocHJvbVN0ZXAgKyAxKSAqIHN0ZXA7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgbmV4dFBvc2l0aW9uID0gcHJvbVN0ZXAgKiBzdGVwO1xuICAgIH1cbiAgICBzY3JvbGxUbyhjb250YWluZXIsIG5leHRQb3NpdGlvbiwgNTAwKTtcbn07XG5cbmZ1bmN0aW9uIHNjcm9sbFByZXYoYmxvY2spIHtcblxuICAgIGNvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoYmxvY2spWzBdO1xuXG4gICAgaWYgKGNvbnRhaW5lci5oYXNBdHRyaWJ1dGUoJ29mZnNldCcpKSB7XG4gICAgICAgIHN0ZXAgPSBjb250YWluZXIuY2xpZW50V2lkdGggLSBwYXJzZUludChjb250YWluZXIuZ2V0QXR0cmlidXRlKCdvZmZzZXQnKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgc3RlcCA9IGNvbnRhaW5lci5jbGllbnRXaWR0aDtcbiAgICB9XG4gICAgcHJvbVN0ZXAgPSBNYXRoLmZsb29yKGNvbnRhaW5lci5zY3JvbGxMZWZ0IC8gc3RlcCk7XG4gICAgaWYgKE51bWJlci5pc0ludGVnZXIoY29udGFpbmVyLnNjcm9sbExlZnQgLyBzdGVwKSkge1xuICAgICAgICBuZXh0UG9zaXRpb24gPSAocHJvbVN0ZXAgLSAxKSAqIHN0ZXA7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgbmV4dFBvc2l0aW9uID0gcHJvbVN0ZXAgKiBzdGVwO1xuICAgIH1cblxuICAgIHNjcm9sbFRvKGNvbnRhaW5lciwgbmV4dFBvc2l0aW9uLCA1MDApO1xufTtcblxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgc2Nyb2xsQmxvY2tzID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnc2Nyb2xsLWJsb2NrJyk7XG5cbiAgICB2YXIgX2xvb3AgPSBmdW5jdGlvbiBfbG9vcChpKSB7XG4gICAgICAgIHZhciBzY3JvbGxCbG9jayA9IHNjcm9sbEJsb2Nrc1tpXTtcbiAgICAgICAgdmFyIGNvbnRyb2xzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShTdHJpbmcoc2Nyb2xsQmxvY2suZGF0YXNldC5jb250cm9scykpKTtcbiAgICAgICAgdmFyIG5leHQgPSBjb250cm9sc1swXS5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdzY3JvbGwtY29udHJvbF9fbmV4dCcpWzBdLmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ3N2Zy1zY3JvbGwtYXJyb3cnKVswXTtcbiAgICAgICAgdmFyIHByZXYgPSBjb250cm9sc1swXS5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdzY3JvbGwtY29udHJvbF9fcHJldicpWzBdLmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ3N2Zy1zY3JvbGwtYXJyb3cnKVswXTtcbiAgICAgICAgaWYgKHNjcm9sbEJsb2NrLnNjcm9sbFdpZHRoID09IHNjcm9sbEJsb2NrLmNsaWVudFdpZHRoKSB7XG4gICAgICAgICAgICBjb250cm9sc1swXS5yZW1vdmUoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHNjcm9sbEJsb2Nrc1tpXS5vbnNjcm9sbCA9IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgLy8gbGV0IGVsZW0gPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdmYXZvci1kZXZpY2VzJylbMF1cbiAgICAgICAgICAgIGlmICh0aGlzLnNjcm9sbFdpZHRoID09IHRoaXMuc2Nyb2xsTGVmdCArIHRoaXMuY2xpZW50V2lkdGgpIHtcbiAgICAgICAgICAgICAgICBuZXh0LmNsYXNzTGlzdC5yZW1vdmUoJ3N2Zy1zY3JvbGwtYXJyb3dfYWN0aXZlJyk7XG4gICAgICAgICAgICAgICAgcHJldi5jbGFzc0xpc3QuYWRkKCdzdmctc2Nyb2xsLWFycm93X2FjdGl2ZScpO1xuICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLnNjcm9sbExlZnQgPT0gMCkge1xuICAgICAgICAgICAgICAgIG5leHQuY2xhc3NMaXN0LmFkZCgnc3ZnLXNjcm9sbC1hcnJvd19hY3RpdmUnKTtcbiAgICAgICAgICAgICAgICBwcmV2LmNsYXNzTGlzdC5yZW1vdmUoJ3N2Zy1zY3JvbGwtYXJyb3dfYWN0aXZlJyk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIG5leHQuY2xhc3NMaXN0LmFkZCgnc3ZnLXNjcm9sbC1hcnJvd19hY3RpdmUnKTtcbiAgICAgICAgICAgICAgICBwcmV2LmNsYXNzTGlzdC5hZGQoJ3N2Zy1zY3JvbGwtYXJyb3dfYWN0aXZlJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfTtcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc2Nyb2xsQmxvY2tzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIF9sb29wKGkpO1xuICAgIH1cblxuICAgIC8vINCf0L7QutCw0LfRi9Cy0LDQtdC8INC40LvQuCDRg9Cx0LjRgNCw0LXQvCDRgdGC0YDQtdC70LrRgyAtINC90LDQv9C+0LzQuNC90LDQu9C60YMg0LIg0LPQu9Cw0LLQvdC+0Lwg0LHQu9C+0LrQtVxuICAgIGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ2Zhdm9yLWNhcmRzJylbMF0ub25zY3JvbGwgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciByZW1pbmRlciA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ2Fycm93LXJlbWluZGVyJylbMF07XG4gICAgICAgIGlmICh0aGlzLnNjcm9sbFRvcCA9PSAwKSB7XG4gICAgICAgICAgICByZW1pbmRlci5jbGFzc0xpc3QucmVtb3ZlKCdhcnJvdy1yZW1pbmRlcl9pbmFjdGl2ZScpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmVtaW5kZXIuY2xhc3NMaXN0LmFkZCgnYXJyb3ctcmVtaW5kZXJfaW5hY3RpdmUnKTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICAvLyBlbGVtLmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ3N2Zy1zY3JvbGwtYXJyb3cnKVswXS5yZW1vdmUoJ3Njcm9sbC1jb250cm9sX2FjdGl2ZScpO1xufSwgZmFsc2UpOyIsIlwidXNlIHN0cmljdFwiO1xuXG5maWx0ZXJTZWxlY3Rpb24oXCJhbGxcIik7XG5cbmZ1bmN0aW9uIGZpbHRlclNlbGVjdGlvbihjKSB7XG4gICAgdmFyIHgsIGk7XG4gICAgeCA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJjYXJkX2hvcmlzb250YWwtZmlsdGVyXCIpO1xuICAgIGlmIChjID09IFwiYWxsXCIpIGMgPSBcIlwiO1xuICAgIC8vIEFkZCB0aGUgXCJjYXJkX2hvcmlzb250YWwtZmlsdGVyLXNob3dcIiBjbGFzcyAoZGlzcGxheTpibG9jaykgdG8gdGhlIGZpbHRlcmVkIGVsZW1lbnRzLCBhbmQgcmVtb3ZlIHRoZSBcImNhcmRfaG9yaXNvbnRhbC1maWx0ZXItc2hvd1wiIGNsYXNzIGZyb20gdGhlIGVsZW1lbnRzIHRoYXQgYXJlIG5vdCBzZWxlY3RlZFxuICAgIGZvciAoaSA9IDA7IGkgPCB4Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHczUmVtb3ZlQ2xhc3MoeFtpXSwgXCJjYXJkX2hvcmlzb250YWwtZmlsdGVyLXNob3dcIik7XG4gICAgICAgIGlmICh4W2ldLmNsYXNzTmFtZS5pbmRleE9mKGMpID4gLTEpIHczQWRkQ2xhc3MoeFtpXSwgXCJjYXJkX2hvcmlzb250YWwtZmlsdGVyLXNob3dcIik7XG4gICAgfVxufVxuXG4vLyBjYXJkX2hvcmlzb250YWwtZmlsdGVyLXNob3cgZmlsdGVyZWQgZWxlbWVudHNcbmZ1bmN0aW9uIHczQWRkQ2xhc3MoZWxlbWVudCwgbmFtZSkge1xuICAgIHZhciBpLCBhcnIxLCBhcnIyO1xuICAgIGFycjEgPSBlbGVtZW50LmNsYXNzTmFtZS5zcGxpdChcIiBcIik7XG4gICAgYXJyMiA9IG5hbWUuc3BsaXQoXCIgXCIpO1xuICAgIGZvciAoaSA9IDA7IGkgPCBhcnIyLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGlmIChhcnIxLmluZGV4T2YoYXJyMltpXSkgPT0gLTEpIHtcbiAgICAgICAgICAgIGVsZW1lbnQuY2xhc3NOYW1lICs9IFwiIFwiICsgYXJyMltpXTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuLy8gSGlkZSBlbGVtZW50cyB0aGF0IGFyZSBub3Qgc2VsZWN0ZWRcbmZ1bmN0aW9uIHczUmVtb3ZlQ2xhc3MoZWxlbWVudCwgbmFtZSkge1xuICAgIHZhciBpLCBhcnIxLCBhcnIyO1xuICAgIGFycjEgPSBlbGVtZW50LmNsYXNzTmFtZS5zcGxpdChcIiBcIik7XG4gICAgYXJyMiA9IG5hbWUuc3BsaXQoXCIgXCIpO1xuICAgIGZvciAoaSA9IDA7IGkgPCBhcnIyLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHdoaWxlIChhcnIxLmluZGV4T2YoYXJyMltpXSkgPiAtMSkge1xuICAgICAgICAgICAgYXJyMS5zcGxpY2UoYXJyMS5pbmRleE9mKGFycjJbaV0pLCAxKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbGVtZW50LmNsYXNzTmFtZSA9IGFycjEuam9pbihcIiBcIik7XG59XG5cbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGJ0bnMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwic2VsZWN0LWZpbHRlcl9faXRlbVwiKTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGJ0bnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgYnRuc1tpXS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5wYXJlbnRFbGVtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJzZWxlY3QtZmlsdGVyX19pdGVtX2FjdGl2ZVwiKVswXS5jbGFzc0xpc3QucmVtb3ZlKFwic2VsZWN0LWZpbHRlcl9faXRlbV9hY3RpdmVcIik7XG4gICAgICAgICAgICB0aGlzLmNsYXNzTGlzdC5hZGQoXCJzZWxlY3QtZmlsdGVyX19pdGVtX2FjdGl2ZVwiKTtcbiAgICAgICAgfSk7XG4gICAgfVxufSwgZmFsc2UpOyJdfQ==
