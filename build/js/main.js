"use strict";function closeModal(){document.getElementsByClassName("modal-wrap_active")[0].classList.remove("modal-wrap_active"),document.getElementsByClassName("blur")[0].classList.remove("blur"),document.body.style.overflow="auto"}document.addEventListener("DOMContentLoaded",function(){var p=document.getElementsByClassName("knob__control")[0],L=document.getElementsByClassName("knob__value")[0],C=Array.from(document.getElementsByClassName("tick")),E=300,N=228,w=30,B=function(){for(var e=["transform","msTransform","webkitTransform","mozTransform","oTransform"],t=0;t<e.length;t++){var s=e[t];if(void 0!==document.body.style[s])return s}}();function o(e){return N=e&&N+2<=E?N+2:!e&&0<=N-2?N-2:N,function(){p.style[B]="rotate("+N+"deg)";var e=!0,t=!1,s=void 0;try{for(var o,n=C[Symbol.iterator]();!(e=(o=n.next()).done);e=!0){var a=o.value;a.classList.remove("active")}}catch(e){t=!0,s=e}finally{try{!e&&n.return&&n.return()}finally{if(t)throw s}}var l=Math.round(N/3-1);if(console.log(l),l<=0){var r=!0,i=!1,c=void 0;try{for(var m,d=C.slice(0,1)[Symbol.iterator]();!(r=(m=d.next()).done);r=!0){var v=m.value;v.classList.add("active")}}catch(e){i=!0,c=e}finally{try{!r&&d.return&&d.return()}finally{if(i)throw c}}}else{var u=!0,f=!1,g=void 0;try{for(var h,_=C.slice(0,l)[Symbol.iterator]();!(u=(h=_.next()).done);u=!0){var y=h.value;y.classList.add("active")}}catch(e){f=!0,g=e}finally{try{!u&&_.return&&_.return()}finally{if(f)throw g}}}L.innerHTML="+"+Math.ceil(w/100*Math.round(N/E*100))}()}var s=document.getElementsByClassName("knob")[0];s.onmousedown=function(e){var s=e.pageX;document.onmousemove=function(e){e.pageX>s?o(!0):o(!1),s=e.pageX;var t=document.getElementsByClassName("knob")[0];document.onmouseup=function(){document.onmousemove=null,t.onmouseup=null},p.ondragstart=function(){return!1}}},s.ontouchstart=function(e){var t=e.changedTouches[0].pageX;console.log("touch"),s.ontouchmove=function(e){e.changedTouches[0].pageX>t?o(!0):o(!1),t=e.changedTouches[0].pageX}}},!1),document.addEventListener("DOMContentLoaded",function(){for(var e=document.getElementsByClassName("device-filter__item"),t=0;t<e.length;t++)e[t].addEventListener("click",function(){var e=document.getElementsByClassName("device-filter__item");if(console.log(e),this.classList.contains("device-filter__item_active"))if(console.log("active"),console.log(this),this.classList.contains("device-filter__item_show")){console.log("true");for(var t=0;t<e.length;t++)e[t].classList.remove("device-filter__item_show")}else{console.log("false");for(t=0;t<e.length;t++)e[t].classList.add("device-filter__item_show")}else{document.getElementsByClassName("device-filter__item_active")[0].classList.remove("device-filter__item_active"),this.classList.add("device-filter__item_active");for(t=0;t<e.length;t++)e[t].classList.remove("device-filter__item_show")}})},!1),document.addEventListener("DOMContentLoaded",function(){for(var s=document.getElementsByClassName("modal-trigger"),e=function(t){s[t].addEventListener("click",function(){var e=String(s[t].getAttribute("data-modal"));document.getElementsByClassName(e)[0].classList.add("modal-wrap_active"),document.getElementsByClassName("wrap")[0].classList.add("blur"),document.body.style.overflow="hidden"})},t=0;t<s.length;t++)e(t)},!1);var container=void 0,step=void 0,promStep=void 0,nextPosition=void 0;function scrollTo(s){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1e3,n=s.scrollLeft,a=e-n,l=0;!function e(){l+=20;var t=Math.easeInOutQuad(l,n,a,o);s.scrollLeft=t,l<o&&setTimeout(e,20)}()}function scrollNext(e,t){container=document.getElementsByClassName(e)[0],step=container.hasAttribute("offset")?container.clientWidth-parseInt(container.getAttribute("offset")):container.clientWidth,promStep=Math.ceil(container.scrollLeft/step),nextPosition=Number.isInteger(Math.ceil(container.scrollLeft)/step)?(promStep+1)*step:promStep*step,scrollTo(container,nextPosition,500)}function scrollPrev(e){container=document.getElementsByClassName(e)[0],step=container.hasAttribute("offset")?container.clientWidth-parseInt(container.getAttribute("offset")):container.clientWidth,promStep=Math.floor(container.scrollLeft/step),nextPosition=Number.isInteger(container.scrollLeft/step)?(promStep-1)*step:promStep*step,scrollTo(container,nextPosition,500)}function filterSelection(e){var t,s;for(t=document.getElementsByClassName("card_horisontal-filter"),"all"==e&&(e=""),s=0;s<t.length;s++)w3RemoveClass(t[s],"card_horisontal-filter-show"),-1<t[s].className.indexOf(e)&&w3AddClass(t[s],"card_horisontal-filter-show")}function w3AddClass(e,t){var s,o,n;for(o=e.className.split(" "),n=t.split(" "),s=0;s<n.length;s++)-1==o.indexOf(n[s])&&(e.className+=" "+n[s])}function w3RemoveClass(e,t){var s,o,n;for(o=e.className.split(" "),n=t.split(" "),s=0;s<n.length;s++)for(;-1<o.indexOf(n[s]);)o.splice(o.indexOf(n[s]),1);e.className=o.join(" ")}Math.easeInOutQuad=function(e,t,s,o){return(e/=o/2)<1?s/2*e*e+t:-s/2*(--e*(e-2)-1)+t},document.addEventListener("DOMContentLoaded",function(){for(var a=document.getElementsByClassName("scroll-block"),e=function(e){var t=a[e],s=Array.prototype.slice.call(document.getElementsByClassName(String(t.dataset.controls))),o=s[0].getElementsByClassName("scroll-control__next")[0].getElementsByClassName("svg-scroll-arrow")[0],n=s[0].getElementsByClassName("scroll-control__prev")[0].getElementsByClassName("svg-scroll-arrow")[0];t.scrollWidth==t.clientWidth&&s[0].remove(),a[e].onscroll=function(){this.scrollWidth==this.scrollLeft+this.clientWidth?(o.classList.remove("svg-scroll-arrow_active"),n.classList.add("svg-scroll-arrow_active")):0==this.scrollLeft?(o.classList.add("svg-scroll-arrow_active"),n.classList.remove("svg-scroll-arrow_active")):(o.classList.add("svg-scroll-arrow_active"),n.classList.add("svg-scroll-arrow_active"))}},t=0;t<a.length;t++)e(t);document.getElementsByClassName("favor-cards")[0].onscroll=function(){var e=document.getElementsByClassName("arrow-reminder")[0];0==this.scrollTop?e.classList.remove("arrow-reminder_inactive"):e.classList.add("arrow-reminder_inactive")}},!1),filterSelection("all"),document.addEventListener("DOMContentLoaded",function(){for(var e=document.getElementsByClassName("select-filter__item"),t=0;t<e.length;t++)e[t].addEventListener("click",function(){this.parentElement.getElementsByClassName("select-filter__item_active")[0].classList.remove("select-filter__item_active"),this.classList.add("select-filter__item_active")})},!1);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImtub2IuanMiLCJtb2RhbC5qcyIsIm1vYmlsZS1zZWxlY3QuanMiLCJzY3JvbGwuanMiLCJzZWxlY3QuanMiXSwibmFtZXMiOlsiY2xvc2VNb2RhbCIsImRvY3VtZW50IiwiZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSIsImNsYXNzTGlzdCIsInJlbW92ZSIsImJvZHkiLCJzdHlsZSIsIm92ZXJmbG93IiwiYWRkRXZlbnRMaXN0ZW5lciIsImtub2IiLCJjdXJyIiwidGlja3MiLCJBcnJheSIsImZyb20iLCJtYXgiLCJhbmdsZSIsIm1heHRlbXAiLCJ0cmFuc2Zvcm0iLCJfYXJyIiwiX2kiLCJsZW5ndGgiLCJwcm9wIiwidHVybnRVcCIsImJvb2wiLCJfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uIiwiX2RpZEl0ZXJhdG9yRXJyb3IiLCJfaXRlcmF0b3JFcnJvciIsInVuZGVmaW5lZCIsIl9zdGVwIiwiX2l0ZXJhdG9yIiwiU3ltYm9sIiwiaXRlcmF0b3IiLCJuZXh0IiwiZG9uZSIsInRpY2siLCJ2YWx1ZSIsImVyciIsInJldHVybiIsImFjdGl2ZXMiLCJNYXRoIiwicm91bmQiLCJjb25zb2xlIiwibG9nIiwiX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbjIiLCJfZGlkSXRlcmF0b3JFcnJvcjIiLCJfaXRlcmF0b3JFcnJvcjIiLCJfc3RlcDIiLCJfaXRlcmF0b3IyIiwic2xpY2UiLCJfdGljayIsImFkZCIsIl9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24zIiwiX2RpZEl0ZXJhdG9yRXJyb3IzIiwiX2l0ZXJhdG9yRXJyb3IzIiwiX3N0ZXAzIiwiX2l0ZXJhdG9yMyIsIl90aWNrMiIsImlubmVySFRNTCIsImNlaWwiLCJzZXRBbmdsZSIsImtub2JhcmVhIiwib25tb3VzZWRvd24iLCJlIiwic3RhcnQiLCJwYWdlWCIsIm9ubW91c2Vtb3ZlIiwib25tb3VzZXVwIiwib25kcmFnc3RhcnQiLCJvbnRvdWNoc3RhcnQiLCJjaGFuZ2VkVG91Y2hlcyIsIm9udG91Y2htb3ZlIiwiYnRucyIsImkiLCJzaG93aXRlbXMiLCJ0aGlzIiwiY29udGFpbnMiLCJkIiwidHJpZ2dlcnMiLCJfbG9vcCIsIm1vZGFsQ2xhc3MiLCJTdHJpbmciLCJnZXRBdHRyaWJ1dGUiLCJjb250YWluZXIiLCJzdGVwIiwicHJvbVN0ZXAiLCJuZXh0UG9zaXRpb24iLCJzY3JvbGxUbyIsImVsZW1lbnQiLCJ0byIsImFyZ3VtZW50cyIsImR1cmF0aW9uIiwic2Nyb2xsTGVmdCIsImNoYW5nZSIsImN1cnJlbnRUaW1lIiwiYW5pbWF0ZVNjcm9sbCIsInZhbCIsImVhc2VJbk91dFF1YWQiLCJzZXRUaW1lb3V0Iiwic2Nyb2xsTmV4dCIsImJsb2NrIiwiZWxlbSIsImhhc0F0dHJpYnV0ZSIsImNsaWVudFdpZHRoIiwicGFyc2VJbnQiLCJOdW1iZXIiLCJpc0ludGVnZXIiLCJzY3JvbGxQcmV2IiwiZmxvb3IiLCJmaWx0ZXJTZWxlY3Rpb24iLCJjIiwieCIsInczUmVtb3ZlQ2xhc3MiLCJjbGFzc05hbWUiLCJpbmRleE9mIiwidzNBZGRDbGFzcyIsIm5hbWUiLCJhcnIxIiwiYXJyMiIsInNwbGl0Iiwic3BsaWNlIiwiam9pbiIsInQiLCJiIiwic2Nyb2xsQmxvY2tzIiwic2Nyb2xsQmxvY2siLCJjb250cm9scyIsInByb3RvdHlwZSIsImNhbGwiLCJkYXRhc2V0IiwicHJldiIsInNjcm9sbFdpZHRoIiwib25zY3JvbGwiLCJyZW1pbmRlciIsInNjcm9sbFRvcCIsInBhcmVudEVsZW1lbnQiXSwibWFwcGluZ3MiOiJBQUFBLGFDbUJBLFNBQUFBLGFBQ0FDLFNBQUFDLHVCQUFBLHFCQUFBLEdBQUFDLFVBQUFDLE9BQUEscUJBQ0FILFNBQUFDLHVCQUFBLFFBQUEsR0FBQUMsVUFBQUMsT0FBQSxRQUNBSCxTQUFBSSxLQUFBQyxNQUFBQyxTQUFBLE9EcEJBTixTQUFBTyxpQkFBQSxtQkFBQSxXQUVBLElBQUFDLEVBQUFSLFNBQUFDLHVCQUFBLGlCQUFBLEdBQ0FRLEVBQUFULFNBQUFDLHVCQUFBLGVBQUEsR0FD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QUEsT0FzQ0EzRyxTQUFBTyxpQkFBQSxtQkFBQSxXQUVBLElBREEsSUFBQStELEVBQUF0RSxTQUFBQyx1QkFBQSx1QkFDQXNFLEVBQUEsRUFBQUEsRUFBQUQsRUFBQW5ELE9BQUFvRCxJQUNBRCxFQUFBQyxHQUFBaEUsaUJBQUEsUUFBQSxXQUNBa0UsS0FBQTRELGNBQUFwSSx1QkFBQSw4QkFBQSxHQUFBQyxVQUFBQyxPQUFBLDhCQUNBc0UsS0FBQXZFLFVBQUErQyxJQUFBLGtDQUdBIiwiZmlsZSI6Im1haW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG5cbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCBmdW5jdGlvbiAoKSB7XG5cbiAgICB2YXIga25vYiA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ2tub2JfX2NvbnRyb2wnKVswXTtcbiAgICB2YXIgY3VyciA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ2tub2JfX3ZhbHVlJylbMF07XG4gICAgdmFyIHRpY2tzID0gQXJyYXkuZnJvbShkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCd0aWNrJykpO1xuXG4gICAgdmFyIG1pbiA9IDA7XG4gICAgdmFyIG1heCA9IDMwMDtcbiAgICB2YXIgYW5nbGUgPSAyMjg7XG4gICAgdmFyIG1heHRlbXAgPSAzMDtcbiAgICB2YXIgdHJhbnNmb3JtID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgX2FyciA9IFsndHJhbnNmb3JtJywgJ21zVHJhbnNmb3JtJywgJ3dlYmtpdFRyYW5zZm9ybScsICdtb3pUcmFuc2Zvcm0nLCAnb1RyYW5zZm9ybSddO1xuXG4gICAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBfYXJyLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgdmFyIHByb3AgPSBfYXJyW19pXTtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgZG9jdW1lbnQuYm9keS5zdHlsZVtwcm9wXSAhPSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICAgIHJldHVybiBwcm9wO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSgpO1xuXG4gICAgZnVuY3Rpb24gdHVybnRVcChib29sKSB7XG4gICAgICAgIGFuZ2xlID0gYm9vbCAmJiBhbmdsZSArIDIgPD0gbWF4ID8gYW5nbGUgKyAyIDogIWJvb2wgJiYgYW5nbGUgLSAyID49IG1pbiA/IGFuZ2xlIC0gMiA6IGFuZ2xlO1xuICAgICAgICByZXR1cm4gc2V0QW5nbGUoKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBzZXRBbmdsZSgpIHtcbiAgICAgICAgLy8gcm90YXRlIGtub2JcbiAgICAgICAga25vYi5zdHlsZVt0cmFuc2Zvcm1dID0gJ3JvdGF0ZSgnICsgYW5nbGUgKyAnZGVnKSc7XG5cbiAgICAgICAgLy8gcXVpY2tseSByZXNldCB0aWNrc1xuICAgICAgICB2YXIgX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbiA9IHRydWU7XG4gICAgICAgIHZhciBfZGlkSXRlcmF0b3JFcnJvciA9IGZhbHNlO1xuICAgICAgICB2YXIgX2l0ZXJhdG9yRXJyb3IgPSB1bmRlZmluZWQ7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGZvciAodmFyIF9pdGVyYXRvciA9IHRpY2tzW1N5bWJvbC5pdGVyYXRvcl0oKSwgX3N0ZXA7ICEoX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbiA9IChfc3RlcCA9IF9pdGVyYXRvci5uZXh0KCkpLmRvbmUpOyBfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uID0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgIHZhciB0aWNrID0gX3N0ZXAudmFsdWU7XG5cbiAgICAgICAgICAgICAgICB0aWNrLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBhZGQgZ2xvdyB0byAnYWN0aXZlJyB0aWNrc1xuICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgIF9kaWRJdGVyYXRvckVycm9yID0gdHJ1ZTtcbiAgICAgICAgICAgIF9pdGVyYXRvckVycm9yID0gZXJyO1xuICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBpZiAoIV9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24gJiYgX2l0ZXJhdG9yLnJldHVybikge1xuICAgICAgICAgICAgICAgICAgICBfaXRlcmF0b3IucmV0dXJuKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgICAgICBpZiAoX2RpZEl0ZXJhdG9yRXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgX2l0ZXJhdG9yRXJyb3I7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGFjdGl2ZXMgPSBNYXRoLnJvdW5kKGFuZ2xlIC8gMyAtIDEpO1xuICAgICAgICBjb25zb2xlLmxvZyhhY3RpdmVzKTtcbiAgICAgICAgaWYgKGFjdGl2ZXMgPD0gMCkge1xuICAgICAgICAgICAgdmFyIF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24yID0gdHJ1ZTtcbiAgICAgICAgICAgIHZhciBfZGlkSXRlcmF0b3JFcnJvcjIgPSBmYWxzZTtcbiAgICAgICAgICAgIHZhciBfaXRlcmF0b3JFcnJvcjIgPSB1bmRlZmluZWQ7XG5cbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgX2l0ZXJhdG9yMiA9IHRpY2tzLnNsaWNlKDAsIDEpW1N5bWJvbC5pdGVyYXRvcl0oKSwgX3N0ZXAyOyAhKF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24yID0gKF9zdGVwMiA9IF9pdGVyYXRvcjIubmV4dCgpKS5kb25lKTsgX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbjIgPSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBfdGljayA9IF9zdGVwMi52YWx1ZTtcblxuICAgICAgICAgICAgICAgICAgICBfdGljay5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICBfZGlkSXRlcmF0b3JFcnJvcjIgPSB0cnVlO1xuICAgICAgICAgICAgICAgIF9pdGVyYXRvckVycm9yMiA9IGVycjtcbiAgICAgICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uMiAmJiBfaXRlcmF0b3IyLnJldHVybikge1xuICAgICAgICAgICAgICAgICAgICAgICAgX2l0ZXJhdG9yMi5yZXR1cm4oKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChfZGlkSXRlcmF0b3JFcnJvcjIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IF9pdGVyYXRvckVycm9yMjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHZhciBfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uMyA9IHRydWU7XG4gICAgICAgICAgICB2YXIgX2RpZEl0ZXJhdG9yRXJyb3IzID0gZmFsc2U7XG4gICAgICAgICAgICB2YXIgX2l0ZXJhdG9yRXJyb3IzID0gdW5kZWZpbmVkO1xuXG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGZvciAodmFyIF9pdGVyYXRvcjMgPSB0aWNrcy5zbGljZSgwLCBhY3RpdmVzKVtTeW1ib2wuaXRlcmF0b3JdKCksIF9zdGVwMzsgIShfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uMyA9IChfc3RlcDMgPSBfaXRlcmF0b3IzLm5leHQoKSkuZG9uZSk7IF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24zID0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgX3RpY2syID0gX3N0ZXAzLnZhbHVlO1xuXG4gICAgICAgICAgICAgICAgICAgIF90aWNrMi5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICBfZGlkSXRlcmF0b3JFcnJvcjMgPSB0cnVlO1xuICAgICAgICAgICAgICAgIF9pdGVyYXRvckVycm9yMyA9IGVycjtcbiAgICAgICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uMyAmJiBfaXRlcmF0b3IzLnJldHVybikge1xuICAgICAgICAgICAgICAgICAgICAgICAgX2l0ZXJhdG9yMy5yZXR1cm4oKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChfZGlkSXRlcmF0b3JFcnJvcjMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IF9pdGVyYXRvckVycm9yMztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIHVwZGF0ZSAlIHZhbHVlIGFzIHRleHRcbiAgICAgICAgY3Vyci5pbm5lckhUTUwgPSAnKycgKyBNYXRoLmNlaWwobWF4dGVtcCAvIDEwMCAqIE1hdGgucm91bmQoYW5nbGUgLyBtYXggKiAxMDApKTtcbiAgICB9XG5cbiAgICB2YXIga25vYmFyZWEgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdrbm9iJylbMF07XG5cbiAgICBrbm9iYXJlYS5vbm1vdXNlZG93biA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIC8vIDEuINC+0YLRgdC70LXQtNC40YLRjCDQvdCw0LbQsNGC0LjQtVxuICAgICAgICB2YXIgc3RhcnQgPSBlLnBhZ2VYO1xuICAgICAgICBkb2N1bWVudC5vbm1vdXNlbW92ZSA9IGZ1bmN0aW9uIChlKSB7XG5cbiAgICAgICAgICAgIGlmIChlLnBhZ2VYID4gc3RhcnQpIHtcbiAgICAgICAgICAgICAgICB0dXJudFVwKHRydWUpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0dXJudFVwKGZhbHNlKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgc3RhcnQgPSBlLnBhZ2VYO1xuICAgICAgICAgICAgdmFyIGtub2JhcmVhID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgna25vYicpWzBdO1xuICAgICAgICAgICAgZG9jdW1lbnQub25tb3VzZXVwID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGRvY3VtZW50Lm9ubW91c2Vtb3ZlID0gbnVsbDtcbiAgICAgICAgICAgICAgICBrbm9iYXJlYS5vbm1vdXNldXAgPSBudWxsO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAga25vYi5vbmRyYWdzdGFydCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9O1xuICAgIH07XG5cbiAgICBrbm9iYXJlYS5vbnRvdWNoc3RhcnQgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICB2YXIgc3RhcnQgPSBlLmNoYW5nZWRUb3VjaGVzWzBdLnBhZ2VYO1xuICAgICAgICBjb25zb2xlLmxvZygndG91Y2gnKTtcbiAgICAgICAga25vYmFyZWEub250b3VjaG1vdmUgPSBmdW5jdGlvbiAoZSkge1xuXG4gICAgICAgICAgICBpZiAoZS5jaGFuZ2VkVG91Y2hlc1swXS5wYWdlWCA+IHN0YXJ0KSB7XG4gICAgICAgICAgICAgICAgdHVybnRVcCh0cnVlKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdHVybnRVcChmYWxzZSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHN0YXJ0ID0gZS5jaGFuZ2VkVG91Y2hlc1swXS5wYWdlWDtcbiAgICAgICAgfTsgLy8gICBhbGVydChlLmNoYW5nZWRUb3VjaGVzWzBdLnBhZ2VYKSAvLyDQv9C+0LrQsNC3INC60L7RgNGA0LTQuNC90LDRgiDQvNC10YHRgtCwINC/0YDQuNC60L7RgdC90L7QstC10L3QuNGPINC/0L4gWC3Rgy5cbiAgICB9O1xufSwgZmFsc2UpO1xuXG4vLyBmdW5jdGlvbiBnZXRDdXJDb29yZHNJbnNpZGVSZWN0KGUpIHtcbi8vICAgICB2YXIgeCA9IGUub2Zmc2V0WCA9PSB1bmRlZmluZWQgPyBlLmxheWVyWCA6IGUub2Zmc2V0WDtcbi8vICAgICB2YXIgeSA9IGUub2Zmc2V0WSA9PSB1bmRlZmluZWQgPyBlLmxheWVyWSA6IGUub2Zmc2V0WTtcblxuLy8gICAgIGFsZXJ0KHggKyAneCcgKyB5KTtcbi8vIH1cblxuLy8gZnVuY3Rpb24gZ2V0RWxlbWVudChlLCBlbGVtZW50KSB7XG4vLyAgICAgZ2V0Q3VyQ29vcmRzSW5zaWRlUmVjdChlLCBlbGVtZW50KTtcbi8vIH0iLCIndXNlIHN0cmljdCc7XG5cbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHRyaWdnZXJzID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnbW9kYWwtdHJpZ2dlcicpO1xuXG4gICAgdmFyIF9sb29wID0gZnVuY3Rpb24gX2xvb3AoaSkge1xuICAgICAgICB0cmlnZ2Vyc1tpXS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIG1vZGFsQ2xhc3MgPSBTdHJpbmcodHJpZ2dlcnNbaV0uZ2V0QXR0cmlidXRlKCdkYXRhLW1vZGFsJykpO1xuICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShtb2RhbENsYXNzKVswXS5jbGFzc0xpc3QuYWRkKCdtb2RhbC13cmFwX2FjdGl2ZScpO1xuICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnd3JhcCcpWzBdLmNsYXNzTGlzdC5hZGQoJ2JsdXInKTtcbiAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuc3R5bGUub3ZlcmZsb3cgPSBcImhpZGRlblwiO1xuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0cmlnZ2Vycy5sZW5ndGg7IGkrKykge1xuICAgICAgICBfbG9vcChpKTtcbiAgICB9XG59LCBmYWxzZSk7XG5cbmZ1bmN0aW9uIGNsb3NlTW9kYWwoKSB7XG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnbW9kYWwtd3JhcF9hY3RpdmUnKVswXS5jbGFzc0xpc3QucmVtb3ZlKCdtb2RhbC13cmFwX2FjdGl2ZScpO1xuICAgIGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ2JsdXInKVswXS5jbGFzc0xpc3QucmVtb3ZlKCdibHVyJyk7XG4gICAgZG9jdW1lbnQuYm9keS5zdHlsZS5vdmVyZmxvdyA9IFwiYXV0b1wiO1xufSIsIlwidXNlIHN0cmljdFwiO1xuXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgZnVuY3Rpb24gKCkge1xuICAgIHZhciBidG5zID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcImRldmljZS1maWx0ZXJfX2l0ZW1cIik7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBidG5zLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGJ0bnNbaV0uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBzaG93aXRlbXMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwiZGV2aWNlLWZpbHRlcl9faXRlbVwiKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHNob3dpdGVtcyk7XG4gICAgICAgICAgICBpZiAodGhpcy5jbGFzc0xpc3QuY29udGFpbnMoXCJkZXZpY2UtZmlsdGVyX19pdGVtX2FjdGl2ZVwiKSkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdhY3RpdmUnKTtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyh0aGlzKTtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5jbGFzc0xpc3QuY29udGFpbnMoXCJkZXZpY2UtZmlsdGVyX19pdGVtX3Nob3dcIikpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJ0cnVlXCIpO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBkID0gMDsgZCA8IHNob3dpdGVtcy5sZW5ndGg7IGQrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2hvd2l0ZW1zW2RdLmNsYXNzTGlzdC5yZW1vdmUoXCJkZXZpY2UtZmlsdGVyX19pdGVtX3Nob3dcIik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcImZhbHNlXCIpO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBkID0gMDsgZCA8IHNob3dpdGVtcy5sZW5ndGg7IGQrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2hvd2l0ZW1zW2RdLmNsYXNzTGlzdC5hZGQoXCJkZXZpY2UtZmlsdGVyX19pdGVtX3Nob3dcIik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJkZXZpY2UtZmlsdGVyX19pdGVtX2FjdGl2ZVwiKVswXS5jbGFzc0xpc3QucmVtb3ZlKFwiZGV2aWNlLWZpbHRlcl9faXRlbV9hY3RpdmVcIik7XG4gICAgICAgICAgICAgICAgdGhpcy5jbGFzc0xpc3QuYWRkKFwiZGV2aWNlLWZpbHRlcl9faXRlbV9hY3RpdmVcIik7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgZCA9IDA7IGQgPCBzaG93aXRlbXMubGVuZ3RoOyBkKyspIHtcbiAgICAgICAgICAgICAgICAgICAgc2hvd2l0ZW1zW2RdLmNsYXNzTGlzdC5yZW1vdmUoXCJkZXZpY2UtZmlsdGVyX19pdGVtX3Nob3dcIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG59LCBmYWxzZSk7IiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgY29udGFpbmVyID0gdm9pZCAwO1xudmFyIHN0ZXAgPSB2b2lkIDA7XG52YXIgcHJvbVN0ZXAgPSB2b2lkIDA7XG52YXIgbmV4dFBvc2l0aW9uID0gdm9pZCAwO1xuXG5mdW5jdGlvbiBzY3JvbGxUbyhlbGVtZW50KSB7XG4gICAgdmFyIHRvID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiAwO1xuICAgIHZhciBkdXJhdGlvbiA9IGFyZ3VtZW50cy5sZW5ndGggPiAyICYmIGFyZ3VtZW50c1syXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzJdIDogMTAwMDtcblxuXG4gICAgdmFyIHN0YXJ0ID0gZWxlbWVudC5zY3JvbGxMZWZ0O1xuICAgIHZhciBjaGFuZ2UgPSB0byAtIHN0YXJ0O1xuICAgIHZhciBpbmNyZW1lbnQgPSAyMDtcbiAgICB2YXIgY3VycmVudFRpbWUgPSAwO1xuXG4gICAgdmFyIGFuaW1hdGVTY3JvbGwgPSBmdW5jdGlvbiBhbmltYXRlU2Nyb2xsKCkge1xuXG4gICAgICAgIGN1cnJlbnRUaW1lICs9IGluY3JlbWVudDtcblxuICAgICAgICB2YXIgdmFsID0gTWF0aC5lYXNlSW5PdXRRdWFkKGN1cnJlbnRUaW1lLCBzdGFydCwgY2hhbmdlLCBkdXJhdGlvbik7XG5cbiAgICAgICAgZWxlbWVudC5zY3JvbGxMZWZ0ID0gdmFsO1xuXG4gICAgICAgIGlmIChjdXJyZW50VGltZSA8IGR1cmF0aW9uKSB7XG4gICAgICAgICAgICBzZXRUaW1lb3V0KGFuaW1hdGVTY3JvbGwsIGluY3JlbWVudCk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgYW5pbWF0ZVNjcm9sbCgpO1xufTtcblxuTWF0aC5lYXNlSW5PdXRRdWFkID0gZnVuY3Rpb24gKHQsIGIsIGMsIGQpIHtcblxuICAgIHQgLz0gZCAvIDI7XG4gICAgaWYgKHQgPCAxKSByZXR1cm4gYyAvIDIgKiB0ICogdCArIGI7XG4gICAgdC0tO1xuICAgIHJldHVybiAtYyAvIDIgKiAodCAqICh0IC0gMikgLSAxKSArIGI7XG59O1xuXG5mdW5jdGlvbiBzY3JvbGxOZXh0KGJsb2NrLCBlbGVtKSB7XG5cbiAgICBjb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKGJsb2NrKVswXTtcblxuICAgIGlmIChjb250YWluZXIuaGFzQXR0cmlidXRlKCdvZmZzZXQnKSkge1xuICAgICAgICBzdGVwID0gY29udGFpbmVyLmNsaWVudFdpZHRoIC0gcGFyc2VJbnQoY29udGFpbmVyLmdldEF0dHJpYnV0ZSgnb2Zmc2V0JykpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHN0ZXAgPSBjb250YWluZXIuY2xpZW50V2lkdGg7XG4gICAgfVxuICAgIHByb21TdGVwID0gTWF0aC5jZWlsKGNvbnRhaW5lci5zY3JvbGxMZWZ0IC8gc3RlcCk7XG5cbiAgICBpZiAoTnVtYmVyLmlzSW50ZWdlcihNYXRoLmNlaWwoY29udGFpbmVyLnNjcm9sbExlZnQpIC8gc3RlcCkpIHtcbiAgICAgICAgbmV4dFBvc2l0aW9uID0gKHByb21TdGVwICsgMSkgKiBzdGVwO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIG5leHRQb3NpdGlvbiA9IHByb21TdGVwICogc3RlcDtcbiAgICB9XG4gICAgc2Nyb2xsVG8oY29udGFpbmVyLCBuZXh0UG9zaXRpb24sIDUwMCk7XG59O1xuXG5mdW5jdGlvbiBzY3JvbGxQcmV2KGJsb2NrKSB7XG5cbiAgICBjb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKGJsb2NrKVswXTtcblxuICAgIGlmIChjb250YWluZXIuaGFzQXR0cmlidXRlKCdvZmZzZXQnKSkge1xuICAgICAgICBzdGVwID0gY29udGFpbmVyLmNsaWVudFdpZHRoIC0gcGFyc2VJbnQoY29udGFpbmVyLmdldEF0dHJpYnV0ZSgnb2Zmc2V0JykpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHN0ZXAgPSBjb250YWluZXIuY2xpZW50V2lkdGg7XG4gICAgfVxuICAgIHByb21TdGVwID0gTWF0aC5mbG9vcihjb250YWluZXIuc2Nyb2xsTGVmdCAvIHN0ZXApO1xuICAgIGlmIChOdW1iZXIuaXNJbnRlZ2VyKGNvbnRhaW5lci5zY3JvbGxMZWZ0IC8gc3RlcCkpIHtcbiAgICAgICAgbmV4dFBvc2l0aW9uID0gKHByb21TdGVwIC0gMSkgKiBzdGVwO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIG5leHRQb3NpdGlvbiA9IHByb21TdGVwICogc3RlcDtcbiAgICB9XG5cbiAgICBzY3JvbGxUbyhjb250YWluZXIsIG5leHRQb3NpdGlvbiwgNTAwKTtcbn07XG5cbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHNjcm9sbEJsb2NrcyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ3Njcm9sbC1ibG9jaycpO1xuXG4gICAgdmFyIF9sb29wID0gZnVuY3Rpb24gX2xvb3AoaSkge1xuICAgICAgICB2YXIgc2Nyb2xsQmxvY2sgPSBzY3JvbGxCbG9ja3NbaV07XG4gICAgICAgIHZhciBjb250cm9scyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoU3RyaW5nKHNjcm9sbEJsb2NrLmRhdGFzZXQuY29udHJvbHMpKSk7XG4gICAgICAgIHZhciBuZXh0ID0gY29udHJvbHNbMF0uZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnc2Nyb2xsLWNvbnRyb2xfX25leHQnKVswXS5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdzdmctc2Nyb2xsLWFycm93JylbMF07XG4gICAgICAgIHZhciBwcmV2ID0gY29udHJvbHNbMF0uZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnc2Nyb2xsLWNvbnRyb2xfX3ByZXYnKVswXS5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdzdmctc2Nyb2xsLWFycm93JylbMF07XG4gICAgICAgIGlmIChzY3JvbGxCbG9jay5zY3JvbGxXaWR0aCA9PSBzY3JvbGxCbG9jay5jbGllbnRXaWR0aCkge1xuICAgICAgICAgICAgY29udHJvbHNbMF0ucmVtb3ZlKCk7XG4gICAgICAgIH1cblxuICAgICAgICBzY3JvbGxCbG9ja3NbaV0ub25zY3JvbGwgPSBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgIC8vIGxldCBlbGVtID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnZmF2b3ItZGV2aWNlcycpWzBdXG4gICAgICAgICAgICBpZiAodGhpcy5zY3JvbGxXaWR0aCA9PSB0aGlzLnNjcm9sbExlZnQgKyB0aGlzLmNsaWVudFdpZHRoKSB7XG4gICAgICAgICAgICAgICAgbmV4dC5jbGFzc0xpc3QucmVtb3ZlKCdzdmctc2Nyb2xsLWFycm93X2FjdGl2ZScpO1xuICAgICAgICAgICAgICAgIHByZXYuY2xhc3NMaXN0LmFkZCgnc3ZnLXNjcm9sbC1hcnJvd19hY3RpdmUnKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5zY3JvbGxMZWZ0ID09IDApIHtcbiAgICAgICAgICAgICAgICBuZXh0LmNsYXNzTGlzdC5hZGQoJ3N2Zy1zY3JvbGwtYXJyb3dfYWN0aXZlJyk7XG4gICAgICAgICAgICAgICAgcHJldi5jbGFzc0xpc3QucmVtb3ZlKCdzdmctc2Nyb2xsLWFycm93X2FjdGl2ZScpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBuZXh0LmNsYXNzTGlzdC5hZGQoJ3N2Zy1zY3JvbGwtYXJyb3dfYWN0aXZlJyk7XG4gICAgICAgICAgICAgICAgcHJldi5jbGFzc0xpc3QuYWRkKCdzdmctc2Nyb2xsLWFycm93X2FjdGl2ZScpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH07XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNjcm9sbEJsb2Nrcy5sZW5ndGg7IGkrKykge1xuICAgICAgICBfbG9vcChpKTtcbiAgICB9XG5cbiAgICAvLyDQn9C+0LrQsNC30YvQstCw0LXQvCDQuNC70Lgg0YPQsdC40YDQsNC10Lwg0YHRgtGA0LXQu9C60YMgLSDQvdCw0L/QvtC80LjQvdCw0LvQutGDINCyINCz0LvQsNCy0L3QvtC8INCx0LvQvtC60LVcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdmYXZvci1jYXJkcycpWzBdLm9uc2Nyb2xsID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgcmVtaW5kZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdhcnJvdy1yZW1pbmRlcicpWzBdO1xuICAgICAgICBpZiAodGhpcy5zY3JvbGxUb3AgPT0gMCkge1xuICAgICAgICAgICAgcmVtaW5kZXIuY2xhc3NMaXN0LnJlbW92ZSgnYXJyb3ctcmVtaW5kZXJfaW5hY3RpdmUnKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJlbWluZGVyLmNsYXNzTGlzdC5hZGQoJ2Fycm93LXJlbWluZGVyX2luYWN0aXZlJyk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgLy8gZWxlbS5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdzdmctc2Nyb2xsLWFycm93JylbMF0ucmVtb3ZlKCdzY3JvbGwtY29udHJvbF9hY3RpdmUnKTtcbn0sIGZhbHNlKTsiLCJcInVzZSBzdHJpY3RcIjtcblxuZmlsdGVyU2VsZWN0aW9uKFwiYWxsXCIpO1xuXG5mdW5jdGlvbiBmaWx0ZXJTZWxlY3Rpb24oYykge1xuICAgIHZhciB4LCBpO1xuICAgIHggPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwiY2FyZF9ob3Jpc29udGFsLWZpbHRlclwiKTtcbiAgICBpZiAoYyA9PSBcImFsbFwiKSBjID0gXCJcIjtcbiAgICAvLyBBZGQgdGhlIFwiY2FyZF9ob3Jpc29udGFsLWZpbHRlci1zaG93XCIgY2xhc3MgKGRpc3BsYXk6YmxvY2spIHRvIHRoZSBmaWx0ZXJlZCBlbGVtZW50cywgYW5kIHJlbW92ZSB0aGUgXCJjYXJkX2hvcmlzb250YWwtZmlsdGVyLXNob3dcIiBjbGFzcyBmcm9tIHRoZSBlbGVtZW50cyB0aGF0IGFyZSBub3Qgc2VsZWN0ZWRcbiAgICBmb3IgKGkgPSAwOyBpIDwgeC5sZW5ndGg7IGkrKykge1xuICAgICAgICB3M1JlbW92ZUNsYXNzKHhbaV0sIFwiY2FyZF9ob3Jpc29udGFsLWZpbHRlci1zaG93XCIpO1xuICAgICAgICBpZiAoeFtpXS5jbGFzc05hbWUuaW5kZXhPZihjKSA+IC0xKSB3M0FkZENsYXNzKHhbaV0sIFwiY2FyZF9ob3Jpc29udGFsLWZpbHRlci1zaG93XCIpO1xuICAgIH1cbn1cblxuLy8gY2FyZF9ob3Jpc29udGFsLWZpbHRlci1zaG93IGZpbHRlcmVkIGVsZW1lbnRzXG5mdW5jdGlvbiB3M0FkZENsYXNzKGVsZW1lbnQsIG5hbWUpIHtcbiAgICB2YXIgaSwgYXJyMSwgYXJyMjtcbiAgICBhcnIxID0gZWxlbWVudC5jbGFzc05hbWUuc3BsaXQoXCIgXCIpO1xuICAgIGFycjIgPSBuYW1lLnNwbGl0KFwiIFwiKTtcbiAgICBmb3IgKGkgPSAwOyBpIDwgYXJyMi5sZW5ndGg7IGkrKykge1xuICAgICAgICBpZiAoYXJyMS5pbmRleE9mKGFycjJbaV0pID09IC0xKSB7XG4gICAgICAgICAgICBlbGVtZW50LmNsYXNzTmFtZSArPSBcIiBcIiArIGFycjJbaV07XG4gICAgICAgIH1cbiAgICB9XG59XG5cbi8vIEhpZGUgZWxlbWVudHMgdGhhdCBhcmUgbm90IHNlbGVjdGVkXG5mdW5jdGlvbiB3M1JlbW92ZUNsYXNzKGVsZW1lbnQsIG5hbWUpIHtcbiAgICB2YXIgaSwgYXJyMSwgYXJyMjtcbiAgICBhcnIxID0gZWxlbWVudC5jbGFzc05hbWUuc3BsaXQoXCIgXCIpO1xuICAgIGFycjIgPSBuYW1lLnNwbGl0KFwiIFwiKTtcbiAgICBmb3IgKGkgPSAwOyBpIDwgYXJyMi5sZW5ndGg7IGkrKykge1xuICAgICAgICB3aGlsZSAoYXJyMS5pbmRleE9mKGFycjJbaV0pID4gLTEpIHtcbiAgICAgICAgICAgIGFycjEuc3BsaWNlKGFycjEuaW5kZXhPZihhcnIyW2ldKSwgMSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxlbWVudC5jbGFzc05hbWUgPSBhcnIxLmpvaW4oXCIgXCIpO1xufVxuXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgZnVuY3Rpb24gKCkge1xuICAgIHZhciBidG5zID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcInNlbGVjdC1maWx0ZXJfX2l0ZW1cIik7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBidG5zLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGJ0bnNbaV0uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMucGFyZW50RWxlbWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwic2VsZWN0LWZpbHRlcl9faXRlbV9hY3RpdmVcIilbMF0uY2xhc3NMaXN0LnJlbW92ZShcInNlbGVjdC1maWx0ZXJfX2l0ZW1fYWN0aXZlXCIpO1xuICAgICAgICAgICAgdGhpcy5jbGFzc0xpc3QuYWRkKFwic2VsZWN0LWZpbHRlcl9faXRlbV9hY3RpdmVcIik7XG4gICAgICAgIH0pO1xuICAgIH1cbn0sIGZhbHNlKTsiXX0=
