"use strict";function closeModal(){document.getElementsByClassName("modal-wrap_active")[0].classList.remove("modal-wrap_active"),document.getElementsByClassName("blur")[0].classList.remove("blur"),document.body.style.overflow="auto"}document.addEventListener("DOMContentLoaded",function(){document.getElementsByClassName("header-menu__switcher")[0].addEventListener("click",function(){document.getElementsByClassName("header-menu")[0].classList.toggle("header-menu_active")})},!1),document.addEventListener("DOMContentLoaded",function(){var L=document.getElementsByClassName("knob__control")[0],p=document.getElementsByClassName("knob__value")[0],E=Array.from(document.getElementsByClassName("tick")),C=300,N=228,w=30,B=function(){for(var e=["transform","msTransform","webkitTransform","mozTransform","oTransform"],t=0;t<e.length;t++){var s=e[t];if(void 0!==document.body.style[s])return s}}();function n(e){return N=e&&N+2<=C?N+2:!e&&0<=N-2?N-2:N,function(){L.style[B]="rotate("+N+"deg)";var e=!0,t=!1,s=void 0;try{for(var n,o=E[Symbol.iterator]();!(e=(n=o.next()).done);e=!0){var a=n.value;a.classList.remove("active")}}catch(e){t=!0,s=e}finally{try{!e&&o.return&&o.return()}finally{if(t)throw s}}var r=Math.round(N/3-1);if(r<=0){var l=!0,i=!1,c=void 0;try{for(var m,d=E.slice(0,1)[Symbol.iterator]();!(l=(m=d.next()).done);l=!0){var u=m.value;u.classList.add("active")}}catch(e){i=!0,c=e}finally{try{!l&&d.return&&d.return()}finally{if(i)throw c}}}else{var v=!0,f=!1,g=void 0;try{for(var h,_=E.slice(0,r)[Symbol.iterator]();!(v=(h=_.next()).done);v=!0){var y=h.value;y.classList.add("active")}}catch(e){f=!0,g=e}finally{try{!v&&_.return&&_.return()}finally{if(f)throw g}}}p.innerHTML="+"+Math.ceil(w/100*Math.round(N/C*100))}()}var s=document.getElementsByClassName("knob")[0];s.onmousedown=function(e){var s=e.pageX;document.onmousemove=function(e){e.pageX>s?n(!0):n(!1),s=e.pageX;var t=document.getElementsByClassName("knob")[0];document.onmouseup=function(){document.onmousemove=null,t.onmouseup=null},L.ondragstart=function(){return!1}}},s.ontouchstart=function(e){var t=e.changedTouches[0].pageX;s.ontouchmove=function(e){e.changedTouches[0].pageX>t?n(!0):n(!1),t=e.changedTouches[0].pageX}}},!1),document.addEventListener("DOMContentLoaded",function(){for(var e=document.getElementsByClassName("device-filter__item"),t=0;t<e.length;t++)e[t].addEventListener("click",function(){var e=document.getElementsByClassName("device-filter__item");if(this.classList.contains("device-filter__item_active"))if(this.classList.contains("device-filter__item_show"))for(var t=0;t<e.length;t++)e[t].classList.remove("device-filter__item_show");else for(t=0;t<e.length;t++)e[t].classList.add("device-filter__item_show");else{document.getElementsByClassName("device-filter__item_active")[0].classList.remove("device-filter__item_active"),this.classList.add("device-filter__item_active");for(t=0;t<e.length;t++)e[t].classList.remove("device-filter__item_show")}})},!1),document.addEventListener("DOMContentLoaded",function(){for(var s=document.getElementsByClassName("modal-trigger"),e=function(t){s[t].addEventListener("click",function(){var e=String(s[t].getAttribute("data-modal"));document.getElementsByClassName(e)[0].classList.add("modal-wrap_active"),document.getElementsByClassName("wrap")[0].classList.add("blur"),document.body.style.overflow="hidden"})},t=0;t<s.length;t++)e(t)},!1);var container=void 0,step=void 0,promStep=void 0,nextPosition=void 0;function scrollTo(s){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1e3,o=s.scrollLeft,a=e-o,r=0;!function e(){r+=20;var t=Math.easeInOutQuad(r,o,a,n);s.scrollLeft=t,r<n&&setTimeout(e,20)}()}function scrollNext(e,t){container=document.getElementsByClassName(e)[0],step=container.hasAttribute("offset")?container.clientWidth-parseInt(container.getAttribute("offset")):container.clientWidth,promStep=Math.ceil(container.scrollLeft/step),nextPosition=Number.isInteger(Math.ceil(container.scrollLeft)/step)?(promStep+1)*step:promStep*step,scrollTo(container,nextPosition,500)}function scrollPrev(e){container=document.getElementsByClassName(e)[0],step=container.hasAttribute("offset")?container.clientWidth-parseInt(container.getAttribute("offset")):container.clientWidth,promStep=Math.floor(container.scrollLeft/step),nextPosition=Number.isInteger(container.scrollLeft/step)?(promStep-1)*step:promStep*step,scrollTo(container,nextPosition,500)}function filterSelection(e){var t,s;for(t=document.getElementsByClassName("card_horisontal-filter"),"all"==e&&(e=""),s=0;s<t.length;s++)w3RemoveClass(t[s],"card_horisontal-filter-show"),-1<t[s].className.indexOf(e)&&w3AddClass(t[s],"card_horisontal-filter-show")}function w3AddClass(e,t){var s,n,o;for(n=e.className.split(" "),o=t.split(" "),s=0;s<o.length;s++)-1==n.indexOf(o[s])&&(e.className+=" "+o[s])}function w3RemoveClass(e,t){var s,n,o;for(n=e.className.split(" "),o=t.split(" "),s=0;s<o.length;s++)for(;-1<n.indexOf(o[s]);)n.splice(n.indexOf(o[s]),1);e.className=n.join(" ")}Math.easeInOutQuad=function(e,t,s,n){return(e/=n/2)<1?s/2*e*e+t:-s/2*(--e*(e-2)-1)+t},document.addEventListener("DOMContentLoaded",function(){for(var a=document.getElementsByClassName("scroll-block"),e=function(e){var t=a[e],s=Array.prototype.slice.call(document.getElementsByClassName(String(t.dataset.controls))),n=s[0].getElementsByClassName("scroll-control__next")[0].getElementsByClassName("svg-scroll-arrow")[0],o=s[0].getElementsByClassName("scroll-control__prev")[0].getElementsByClassName("svg-scroll-arrow")[0];t.scrollWidth==t.clientWidth&&s[0].remove(),a[e].onscroll=function(){this.scrollWidth==this.scrollLeft+this.clientWidth?(n.classList.remove("svg-scroll-arrow_active"),o.classList.add("svg-scroll-arrow_active")):0==this.scrollLeft?(n.classList.add("svg-scroll-arrow_active"),o.classList.remove("svg-scroll-arrow_active")):(n.classList.add("svg-scroll-arrow_active"),o.classList.add("svg-scroll-arrow_active"))}},t=0;t<a.length;t++)e(t);document.getElementsByClassName("favor-cards")[0].onscroll=function(){var e=document.getElementsByClassName("arrow-reminder")[0];0==this.scrollTop?e.classList.remove("arrow-reminder_inactive"):e.classList.add("arrow-reminder_inactive")}},!1),filterSelection("all"),document.addEventListener("DOMContentLoaded",function(){for(var e=document.getElementsByClassName("select-filter__item"),t=0;t<e.length;t++)e[t].addEventListener("click",function(){this.parentElement.getElementsByClassName("select-filter__item_active")[0].classList.remove("select-filter__item_active"),this.classList.add("select-filter__item_active")})},!1);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImhlYWRlci1tZW51LmpzIiwibW9kYWwuanMiLCJrbm9iLmpzIiwibW9iaWxlLXNlbGVjdC5qcyIsInNjcm9sbC5qcyIsInNlbGVjdC5qcyJdLCJuYW1lcyI6WyJjbG9zZU1vZGFsIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50c0J5Q2xhc3NOYW1lIiwiY2xhc3NMaXN0IiwicmVtb3ZlIiwiYm9keSIsInN0eWxlIiwib3ZlcmZsb3ciLCJhZGRFdmVudExpc3RlbmVyIiwidG9nZ2xlIiwia25vYiIsImN1cnIiLCJ0aWNrcyIsIkFycmF5IiwiZnJvbSIsIm1heCIsImFuZ2xlIiwibWF4dGVtcCIsInRyYW5zZm9ybSIsIl9hcnIiLCJfaSIsImxlbmd0aCIsInByb3AiLCJ0dXJudFVwIiwiYm9vbCIsIl9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24iLCJfZGlkSXRlcmF0b3JFcnJvciIsIl9pdGVyYXRvckVycm9yIiwidW5kZWZpbmVkIiwiX3N0ZXAiLCJfaXRlcmF0b3IiLCJTeW1ib2wiLCJpdGVyYXRvciIsIm5leHQiLCJkb25lIiwidGljayIsInZhbHVlIiwiZXJyIiwicmV0dXJuIiwiYWN0aXZlcyIsIk1hdGgiLCJyb3VuZCIsIl9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24yIiwiX2RpZEl0ZXJhdG9yRXJyb3IyIiwiX2l0ZXJhdG9yRXJyb3IyIiwiX3N0ZXAyIiwiX2l0ZXJhdG9yMiIsInNsaWNlIiwiX3RpY2siLCJhZGQiLCJfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uMyIsIl9kaWRJdGVyYXRvckVycm9yMyIsIl9pdGVyYXRvckVycm9yMyIsIl9zdGVwMyIsIl9pdGVyYXRvcjMiLCJfdGljazIiLCJpbm5lckhUTUwiLCJjZWlsIiwic2V0QW5nbGUiLCJrbm9iYXJlYSIsIm9ubW91c2Vkb3duIiwiZSIsInN0YXJ0IiwicGFnZVgiLCJvbm1vdXNlbW92ZSIsIm9ubW91c2V1cCIsIm9uZHJhZ3N0YXJ0Iiwib250b3VjaHN0YXJ0IiwiY2hhbmdlZFRvdWNoZXMiLCJvbnRvdWNobW92ZSIsImJ0bnMiLCJpIiwic2hvd2l0ZW1zIiwidGhpcyIsImNvbnRhaW5zIiwiZCIsInRyaWdnZXJzIiwiX2xvb3AiLCJtb2RhbENsYXNzIiwiU3RyaW5nIiwiZ2V0QXR0cmlidXRlIiwiY29udGFpbmVyIiwic3RlcCIsInByb21TdGVwIiwibmV4dFBvc2l0aW9uIiwic2Nyb2xsVG8iLCJlbGVtZW50IiwidG8iLCJhcmd1bWVudHMiLCJkdXJhdGlvbiIsInNjcm9sbExlZnQiLCJjaGFuZ2UiLCJjdXJyZW50VGltZSIsImFuaW1hdGVTY3JvbGwiLCJ2YWwiLCJlYXNlSW5PdXRRdWFkIiwic2V0VGltZW91dCIsInNjcm9sbE5leHQiLCJibG9jayIsImVsZW0iLCJoYXNBdHRyaWJ1dGUiLCJjbGllbnRXaWR0aCIsInBhcnNlSW50IiwiTnVtYmVyIiwiaXNJbnRlZ2VyIiwic2Nyb2xsUHJldiIsImZsb29yIiwiZmlsdGVyU2VsZWN0aW9uIiwiYyIsIngiLCJ3M1JlbW92ZUNsYXNzIiwiY2xhc3NOYW1lIiwiaW5kZXhPZiIsInczQWRkQ2xhc3MiLCJuYW1lIiwiYXJyMSIsImFycjIiLCJzcGxpdCIsInNwbGljZSIsImpvaW4iLCJ0IiwiYiIsInNjcm9sbEJsb2NrcyIsInNjcm9sbEJsb2NrIiwiY29udHJvbHMiLCJwcm90b3R5cGUiLCJjYWxsIiwiZGF0YXNldCIsInByZXYiLCJzY3JvbGxXaWR0aCIsIm9uc2Nyb2xsIiwicmVtaW5kZXIiLCJzY3JvbGxUb3AiLCJwYXJlbnRFbGVtZW50Il0sIm1hcHBpbmdzIjoiQUFBQSxhQ21CQSxTQUFBQSxhQUNBQyxTQUFBQyx1QkFBQSxxQkFBQSxHQUFBQyxVQUFBQyxPQUFBLHFCQUNBSCxTQUFBQyx1QkFBQSxRQUFBLEdBQUFDLFVBQUFDLE9BQUEsUUFDQUgsU0FBQUksS0FBQUMsTUFBQUMsU0FBQSxPRHBCQU4sU0FBQU8saUJBQUEsbUJBQUEsV0FDQVAsU0FBQUMsdUJBQUEseUJBQUEsR0FBQU0saUJBQUEsUUFBQSxXQUNBUCxTQUFBQyx1QkFB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QUEsbUJBQUEsV0FFQSxJQURBLElBQUE4RCxFQUFBckUsU0FBQUMsdUJBQUEsdUJBQ0FxRSxFQUFBLEVBQUFBLEVBQUFELEVBQUFqRCxPQUFBa0QsSUFDQUQsRUFBQUMsR0FBQS9ELGlCQUFBLFFBQUEsV0FDQWlFLEtBQUE0RCxjQUFBbkksdUJBQUEsOEJBQUEsR0FBQUMsVUFBQUMsT0FBQSw4QkFDQXFFLEtBQUF0RSxVQUFBOEMsSUFBQSxrQ0FHQSIsImZpbGUiOiJtYWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgZnVuY3Rpb24gKCkge1xuICAgIGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ2hlYWRlci1tZW51X19zd2l0Y2hlcicpWzBdLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdoZWFkZXItbWVudScpWzBdLmNsYXNzTGlzdC50b2dnbGUoJ2hlYWRlci1tZW51X2FjdGl2ZScpO1xuICAgIH0pO1xufSwgZmFsc2UpOyIsIid1c2Ugc3RyaWN0JztcblxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgdHJpZ2dlcnMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdtb2RhbC10cmlnZ2VyJyk7XG5cbiAgICB2YXIgX2xvb3AgPSBmdW5jdGlvbiBfbG9vcChpKSB7XG4gICAgICAgIHRyaWdnZXJzW2ldLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgbW9kYWxDbGFzcyA9IFN0cmluZyh0cmlnZ2Vyc1tpXS5nZXRBdHRyaWJ1dGUoJ2RhdGEtbW9kYWwnKSk7XG4gICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKG1vZGFsQ2xhc3MpWzBdLmNsYXNzTGlzdC5hZGQoJ21vZGFsLXdyYXBfYWN0aXZlJyk7XG4gICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCd3cmFwJylbMF0uY2xhc3NMaXN0LmFkZCgnYmx1cicpO1xuICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5zdHlsZS5vdmVyZmxvdyA9IFwiaGlkZGVuXCI7XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRyaWdnZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIF9sb29wKGkpO1xuICAgIH1cbn0sIGZhbHNlKTtcblxuZnVuY3Rpb24gY2xvc2VNb2RhbCgpIHtcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdtb2RhbC13cmFwX2FjdGl2ZScpWzBdLmNsYXNzTGlzdC5yZW1vdmUoJ21vZGFsLXdyYXBfYWN0aXZlJyk7XG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnYmx1cicpWzBdLmNsYXNzTGlzdC5yZW1vdmUoJ2JsdXInKTtcbiAgICBkb2N1bWVudC5ib2R5LnN0eWxlLm92ZXJmbG93ID0gXCJhdXRvXCI7XG59IiwiJ3VzZSBzdHJpY3QnO1xuXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgZnVuY3Rpb24gKCkge1xuXG4gICAgdmFyIGtub2IgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdrbm9iX19jb250cm9sJylbMF07XG4gICAgdmFyIGN1cnIgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdrbm9iX192YWx1ZScpWzBdO1xuICAgIHZhciB0aWNrcyA9IEFycmF5LmZyb20oZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgndGljaycpKTtcblxuICAgIHZhciBtaW4gPSAwO1xuICAgIHZhciBtYXggPSAzMDA7XG4gICAgdmFyIGFuZ2xlID0gMjI4O1xuICAgIHZhciBtYXh0ZW1wID0gMzA7XG4gICAgdmFyIHRyYW5zZm9ybSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIF9hcnIgPSBbJ3RyYW5zZm9ybScsICdtc1RyYW5zZm9ybScsICd3ZWJraXRUcmFuc2Zvcm0nLCAnbW96VHJhbnNmb3JtJywgJ29UcmFuc2Zvcm0nXTtcblxuICAgICAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgX2Fyci5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgIHZhciBwcm9wID0gX2FycltfaV07XG4gICAgICAgICAgICBpZiAodHlwZW9mIGRvY3VtZW50LmJvZHkuc3R5bGVbcHJvcF0gIT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcHJvcDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0oKTtcblxuICAgIGZ1bmN0aW9uIHR1cm50VXAoYm9vbCkge1xuICAgICAgICBhbmdsZSA9IGJvb2wgJiYgYW5nbGUgKyAyIDw9IG1heCA/IGFuZ2xlICsgMiA6ICFib29sICYmIGFuZ2xlIC0gMiA+PSBtaW4gPyBhbmdsZSAtIDIgOiBhbmdsZTtcbiAgICAgICAgcmV0dXJuIHNldEFuZ2xlKCk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc2V0QW5nbGUoKSB7XG4gICAgICAgIC8vIHJvdGF0ZSBrbm9iXG4gICAgICAgIGtub2Iuc3R5bGVbdHJhbnNmb3JtXSA9ICdyb3RhdGUoJyArIGFuZ2xlICsgJ2RlZyknO1xuXG4gICAgICAgIC8vIHF1aWNrbHkgcmVzZXQgdGlja3NcbiAgICAgICAgdmFyIF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24gPSB0cnVlO1xuICAgICAgICB2YXIgX2RpZEl0ZXJhdG9yRXJyb3IgPSBmYWxzZTtcbiAgICAgICAgdmFyIF9pdGVyYXRvckVycm9yID0gdW5kZWZpbmVkO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBmb3IgKHZhciBfaXRlcmF0b3IgPSB0aWNrc1tTeW1ib2wuaXRlcmF0b3JdKCksIF9zdGVwOyAhKF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24gPSAoX3N0ZXAgPSBfaXRlcmF0b3IubmV4dCgpKS5kb25lKTsgX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbiA9IHRydWUpIHtcbiAgICAgICAgICAgICAgICB2YXIgdGljayA9IF9zdGVwLnZhbHVlO1xuXG4gICAgICAgICAgICAgICAgdGljay5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gYWRkIGdsb3cgdG8gJ2FjdGl2ZScgdGlja3NcbiAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICBfZGlkSXRlcmF0b3JFcnJvciA9IHRydWU7XG4gICAgICAgICAgICBfaXRlcmF0b3JFcnJvciA9IGVycjtcbiAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgaWYgKCFfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uICYmIF9pdGVyYXRvci5yZXR1cm4pIHtcbiAgICAgICAgICAgICAgICAgICAgX2l0ZXJhdG9yLnJldHVybigpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICAgICAgaWYgKF9kaWRJdGVyYXRvckVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IF9pdGVyYXRvckVycm9yO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBhY3RpdmVzID0gTWF0aC5yb3VuZChhbmdsZSAvIDMgLSAxKTtcblxuICAgICAgICBpZiAoYWN0aXZlcyA8PSAwKSB7XG4gICAgICAgICAgICB2YXIgX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbjIgPSB0cnVlO1xuICAgICAgICAgICAgdmFyIF9kaWRJdGVyYXRvckVycm9yMiA9IGZhbHNlO1xuICAgICAgICAgICAgdmFyIF9pdGVyYXRvckVycm9yMiA9IHVuZGVmaW5lZDtcblxuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBfaXRlcmF0b3IyID0gdGlja3Muc2xpY2UoMCwgMSlbU3ltYm9sLml0ZXJhdG9yXSgpLCBfc3RlcDI7ICEoX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbjIgPSAoX3N0ZXAyID0gX2l0ZXJhdG9yMi5uZXh0KCkpLmRvbmUpOyBfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uMiA9IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIF90aWNrID0gX3N0ZXAyLnZhbHVlO1xuXG4gICAgICAgICAgICAgICAgICAgIF90aWNrLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgIF9kaWRJdGVyYXRvckVycm9yMiA9IHRydWU7XG4gICAgICAgICAgICAgICAgX2l0ZXJhdG9yRXJyb3IyID0gZXJyO1xuICAgICAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIV9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24yICYmIF9pdGVyYXRvcjIucmV0dXJuKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBfaXRlcmF0b3IyLnJldHVybigpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKF9kaWRJdGVyYXRvckVycm9yMikge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgX2l0ZXJhdG9yRXJyb3IyO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdmFyIF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24zID0gdHJ1ZTtcbiAgICAgICAgICAgIHZhciBfZGlkSXRlcmF0b3JFcnJvcjMgPSBmYWxzZTtcbiAgICAgICAgICAgIHZhciBfaXRlcmF0b3JFcnJvcjMgPSB1bmRlZmluZWQ7XG5cbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgX2l0ZXJhdG9yMyA9IHRpY2tzLnNsaWNlKDAsIGFjdGl2ZXMpW1N5bWJvbC5pdGVyYXRvcl0oKSwgX3N0ZXAzOyAhKF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24zID0gKF9zdGVwMyA9IF9pdGVyYXRvcjMubmV4dCgpKS5kb25lKTsgX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbjMgPSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBfdGljazIgPSBfc3RlcDMudmFsdWU7XG5cbiAgICAgICAgICAgICAgICAgICAgX3RpY2syLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgIF9kaWRJdGVyYXRvckVycm9yMyA9IHRydWU7XG4gICAgICAgICAgICAgICAgX2l0ZXJhdG9yRXJyb3IzID0gZXJyO1xuICAgICAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIV9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24zICYmIF9pdGVyYXRvcjMucmV0dXJuKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBfaXRlcmF0b3IzLnJldHVybigpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKF9kaWRJdGVyYXRvckVycm9yMykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgX2l0ZXJhdG9yRXJyb3IzO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gdXBkYXRlICUgdmFsdWUgYXMgdGV4dFxuICAgICAgICBjdXJyLmlubmVySFRNTCA9ICcrJyArIE1hdGguY2VpbChtYXh0ZW1wIC8gMTAwICogTWF0aC5yb3VuZChhbmdsZSAvIG1heCAqIDEwMCkpO1xuICAgIH1cblxuICAgIHZhciBrbm9iYXJlYSA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ2tub2InKVswXTtcblxuICAgIGtub2JhcmVhLm9ubW91c2Vkb3duID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgLy8gMS4g0L7RgtGB0LvQtdC00LjRgtGMINC90LDQttCw0YLQuNC1XG4gICAgICAgIHZhciBzdGFydCA9IGUucGFnZVg7XG4gICAgICAgIGRvY3VtZW50Lm9ubW91c2Vtb3ZlID0gZnVuY3Rpb24gKGUpIHtcblxuICAgICAgICAgICAgaWYgKGUucGFnZVggPiBzdGFydCkge1xuICAgICAgICAgICAgICAgIHR1cm50VXAodHJ1ZSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHR1cm50VXAoZmFsc2UpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBzdGFydCA9IGUucGFnZVg7XG4gICAgICAgICAgICB2YXIga25vYmFyZWEgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdrbm9iJylbMF07XG4gICAgICAgICAgICBkb2N1bWVudC5vbm1vdXNldXAgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgZG9jdW1lbnQub25tb3VzZW1vdmUgPSBudWxsO1xuICAgICAgICAgICAgICAgIGtub2JhcmVhLm9ubW91c2V1cCA9IG51bGw7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBrbm9iLm9uZHJhZ3N0YXJ0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH07XG4gICAgfTtcblxuICAgIGtub2JhcmVhLm9udG91Y2hzdGFydCA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIHZhciBzdGFydCA9IGUuY2hhbmdlZFRvdWNoZXNbMF0ucGFnZVg7XG4gICAgICAgIGtub2JhcmVhLm9udG91Y2htb3ZlID0gZnVuY3Rpb24gKGUpIHtcblxuICAgICAgICAgICAgaWYgKGUuY2hhbmdlZFRvdWNoZXNbMF0ucGFnZVggPiBzdGFydCkge1xuICAgICAgICAgICAgICAgIHR1cm50VXAodHJ1ZSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHR1cm50VXAoZmFsc2UpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBzdGFydCA9IGUuY2hhbmdlZFRvdWNoZXNbMF0ucGFnZVg7XG4gICAgICAgIH07IC8vICAgYWxlcnQoZS5jaGFuZ2VkVG91Y2hlc1swXS5wYWdlWCkgLy8g0L/QvtC60LDQtyDQutC+0YDRgNC00LjQvdCw0YIg0LzQtdGB0YLQsCDQv9GA0LjQutC+0YHQvdC+0LLQtdC90LjRjyDQv9C+IFgt0YMuXG4gICAgfTtcbn0sIGZhbHNlKTtcblxuLy8gZnVuY3Rpb24gZ2V0Q3VyQ29vcmRzSW5zaWRlUmVjdChlKSB7XG4vLyAgICAgdmFyIHggPSBlLm9mZnNldFggPT0gdW5kZWZpbmVkID8gZS5sYXllclggOiBlLm9mZnNldFg7XG4vLyAgICAgdmFyIHkgPSBlLm9mZnNldFkgPT0gdW5kZWZpbmVkID8gZS5sYXllclkgOiBlLm9mZnNldFk7XG5cbi8vICAgICBhbGVydCh4ICsgJ3gnICsgeSk7XG4vLyB9XG5cbi8vIGZ1bmN0aW9uIGdldEVsZW1lbnQoZSwgZWxlbWVudCkge1xuLy8gICAgIGdldEN1ckNvb3Jkc0luc2lkZVJlY3QoZSwgZWxlbWVudCk7XG4vLyB9IiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGJ0bnMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwiZGV2aWNlLWZpbHRlcl9faXRlbVwiKTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGJ0bnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgYnRuc1tpXS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHNob3dpdGVtcyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJkZXZpY2UtZmlsdGVyX19pdGVtXCIpO1xuXG4gICAgICAgICAgICBpZiAodGhpcy5jbGFzc0xpc3QuY29udGFpbnMoXCJkZXZpY2UtZmlsdGVyX19pdGVtX2FjdGl2ZVwiKSkge1xuXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuY2xhc3NMaXN0LmNvbnRhaW5zKFwiZGV2aWNlLWZpbHRlcl9faXRlbV9zaG93XCIpKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgZCA9IDA7IGQgPCBzaG93aXRlbXMubGVuZ3RoOyBkKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNob3dpdGVtc1tkXS5jbGFzc0xpc3QucmVtb3ZlKFwiZGV2aWNlLWZpbHRlcl9faXRlbV9zaG93XCIpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBkID0gMDsgZCA8IHNob3dpdGVtcy5sZW5ndGg7IGQrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2hvd2l0ZW1zW2RdLmNsYXNzTGlzdC5hZGQoXCJkZXZpY2UtZmlsdGVyX19pdGVtX3Nob3dcIik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJkZXZpY2UtZmlsdGVyX19pdGVtX2FjdGl2ZVwiKVswXS5jbGFzc0xpc3QucmVtb3ZlKFwiZGV2aWNlLWZpbHRlcl9faXRlbV9hY3RpdmVcIik7XG4gICAgICAgICAgICAgICAgdGhpcy5jbGFzc0xpc3QuYWRkKFwiZGV2aWNlLWZpbHRlcl9faXRlbV9hY3RpdmVcIik7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgZCA9IDA7IGQgPCBzaG93aXRlbXMubGVuZ3RoOyBkKyspIHtcbiAgICAgICAgICAgICAgICAgICAgc2hvd2l0ZW1zW2RdLmNsYXNzTGlzdC5yZW1vdmUoXCJkZXZpY2UtZmlsdGVyX19pdGVtX3Nob3dcIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG59LCBmYWxzZSk7IiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgY29udGFpbmVyID0gdm9pZCAwO1xudmFyIHN0ZXAgPSB2b2lkIDA7XG52YXIgcHJvbVN0ZXAgPSB2b2lkIDA7XG52YXIgbmV4dFBvc2l0aW9uID0gdm9pZCAwO1xuXG5mdW5jdGlvbiBzY3JvbGxUbyhlbGVtZW50KSB7XG4gICAgdmFyIHRvID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiAwO1xuICAgIHZhciBkdXJhdGlvbiA9IGFyZ3VtZW50cy5sZW5ndGggPiAyICYmIGFyZ3VtZW50c1syXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzJdIDogMTAwMDtcblxuXG4gICAgdmFyIHN0YXJ0ID0gZWxlbWVudC5zY3JvbGxMZWZ0O1xuICAgIHZhciBjaGFuZ2UgPSB0byAtIHN0YXJ0O1xuICAgIHZhciBpbmNyZW1lbnQgPSAyMDtcbiAgICB2YXIgY3VycmVudFRpbWUgPSAwO1xuXG4gICAgdmFyIGFuaW1hdGVTY3JvbGwgPSBmdW5jdGlvbiBhbmltYXRlU2Nyb2xsKCkge1xuXG4gICAgICAgIGN1cnJlbnRUaW1lICs9IGluY3JlbWVudDtcblxuICAgICAgICB2YXIgdmFsID0gTWF0aC5lYXNlSW5PdXRRdWFkKGN1cnJlbnRUaW1lLCBzdGFydCwgY2hhbmdlLCBkdXJhdGlvbik7XG5cbiAgICAgICAgZWxlbWVudC5zY3JvbGxMZWZ0ID0gdmFsO1xuXG4gICAgICAgIGlmIChjdXJyZW50VGltZSA8IGR1cmF0aW9uKSB7XG4gICAgICAgICAgICBzZXRUaW1lb3V0KGFuaW1hdGVTY3JvbGwsIGluY3JlbWVudCk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgYW5pbWF0ZVNjcm9sbCgpO1xufTtcblxuTWF0aC5lYXNlSW5PdXRRdWFkID0gZnVuY3Rpb24gKHQsIGIsIGMsIGQpIHtcblxuICAgIHQgLz0gZCAvIDI7XG4gICAgaWYgKHQgPCAxKSByZXR1cm4gYyAvIDIgKiB0ICogdCArIGI7XG4gICAgdC0tO1xuICAgIHJldHVybiAtYyAvIDIgKiAodCAqICh0IC0gMikgLSAxKSArIGI7XG59O1xuXG5mdW5jdGlvbiBzY3JvbGxOZXh0KGJsb2NrLCBlbGVtKSB7XG5cbiAgICBjb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKGJsb2NrKVswXTtcblxuICAgIGlmIChjb250YWluZXIuaGFzQXR0cmlidXRlKCdvZmZzZXQnKSkge1xuICAgICAgICBzdGVwID0gY29udGFpbmVyLmNsaWVudFdpZHRoIC0gcGFyc2VJbnQoY29udGFpbmVyLmdldEF0dHJpYnV0ZSgnb2Zmc2V0JykpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHN0ZXAgPSBjb250YWluZXIuY2xpZW50V2lkdGg7XG4gICAgfVxuICAgIHByb21TdGVwID0gTWF0aC5jZWlsKGNvbnRhaW5lci5zY3JvbGxMZWZ0IC8gc3RlcCk7XG5cbiAgICBpZiAoTnVtYmVyLmlzSW50ZWdlcihNYXRoLmNlaWwoY29udGFpbmVyLnNjcm9sbExlZnQpIC8gc3RlcCkpIHtcbiAgICAgICAgbmV4dFBvc2l0aW9uID0gKHByb21TdGVwICsgMSkgKiBzdGVwO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIG5leHRQb3NpdGlvbiA9IHByb21TdGVwICogc3RlcDtcbiAgICB9XG4gICAgc2Nyb2xsVG8oY29udGFpbmVyLCBuZXh0UG9zaXRpb24sIDUwMCk7XG59O1xuXG5mdW5jdGlvbiBzY3JvbGxQcmV2KGJsb2NrKSB7XG5cbiAgICBjb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKGJsb2NrKVswXTtcblxuICAgIGlmIChjb250YWluZXIuaGFzQXR0cmlidXRlKCdvZmZzZXQnKSkge1xuICAgICAgICBzdGVwID0gY29udGFpbmVyLmNsaWVudFdpZHRoIC0gcGFyc2VJbnQoY29udGFpbmVyLmdldEF0dHJpYnV0ZSgnb2Zmc2V0JykpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHN0ZXAgPSBjb250YWluZXIuY2xpZW50V2lkdGg7XG4gICAgfVxuICAgIHByb21TdGVwID0gTWF0aC5mbG9vcihjb250YWluZXIuc2Nyb2xsTGVmdCAvIHN0ZXApO1xuICAgIGlmIChOdW1iZXIuaXNJbnRlZ2VyKGNvbnRhaW5lci5zY3JvbGxMZWZ0IC8gc3RlcCkpIHtcbiAgICAgICAgbmV4dFBvc2l0aW9uID0gKHByb21TdGVwIC0gMSkgKiBzdGVwO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIG5leHRQb3NpdGlvbiA9IHByb21TdGVwICogc3RlcDtcbiAgICB9XG5cbiAgICBzY3JvbGxUbyhjb250YWluZXIsIG5leHRQb3NpdGlvbiwgNTAwKTtcbn07XG5cbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHNjcm9sbEJsb2NrcyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ3Njcm9sbC1ibG9jaycpO1xuXG4gICAgdmFyIF9sb29wID0gZnVuY3Rpb24gX2xvb3AoaSkge1xuICAgICAgICB2YXIgc2Nyb2xsQmxvY2sgPSBzY3JvbGxCbG9ja3NbaV07XG4gICAgICAgIHZhciBjb250cm9scyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoU3RyaW5nKHNjcm9sbEJsb2NrLmRhdGFzZXQuY29udHJvbHMpKSk7XG4gICAgICAgIHZhciBuZXh0ID0gY29udHJvbHNbMF0uZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnc2Nyb2xsLWNvbnRyb2xfX25leHQnKVswXS5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdzdmctc2Nyb2xsLWFycm93JylbMF07XG4gICAgICAgIHZhciBwcmV2ID0gY29udHJvbHNbMF0uZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnc2Nyb2xsLWNvbnRyb2xfX3ByZXYnKVswXS5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdzdmctc2Nyb2xsLWFycm93JylbMF07XG4gICAgICAgIGlmIChzY3JvbGxCbG9jay5zY3JvbGxXaWR0aCA9PSBzY3JvbGxCbG9jay5jbGllbnRXaWR0aCkge1xuICAgICAgICAgICAgY29udHJvbHNbMF0ucmVtb3ZlKCk7XG4gICAgICAgIH1cblxuICAgICAgICBzY3JvbGxCbG9ja3NbaV0ub25zY3JvbGwgPSBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgIC8vIGxldCBlbGVtID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnZmF2b3ItZGV2aWNlcycpWzBdXG4gICAgICAgICAgICBpZiAodGhpcy5zY3JvbGxXaWR0aCA9PSB0aGlzLnNjcm9sbExlZnQgKyB0aGlzLmNsaWVudFdpZHRoKSB7XG4gICAgICAgICAgICAgICAgbmV4dC5jbGFzc0xpc3QucmVtb3ZlKCdzdmctc2Nyb2xsLWFycm93X2FjdGl2ZScpO1xuICAgICAgICAgICAgICAgIHByZXYuY2xhc3NMaXN0LmFkZCgnc3ZnLXNjcm9sbC1hcnJvd19hY3RpdmUnKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5zY3JvbGxMZWZ0ID09IDApIHtcbiAgICAgICAgICAgICAgICBuZXh0LmNsYXNzTGlzdC5hZGQoJ3N2Zy1zY3JvbGwtYXJyb3dfYWN0aXZlJyk7XG4gICAgICAgICAgICAgICAgcHJldi5jbGFzc0xpc3QucmVtb3ZlKCdzdmctc2Nyb2xsLWFycm93X2FjdGl2ZScpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBuZXh0LmNsYXNzTGlzdC5hZGQoJ3N2Zy1zY3JvbGwtYXJyb3dfYWN0aXZlJyk7XG4gICAgICAgICAgICAgICAgcHJldi5jbGFzc0xpc3QuYWRkKCdzdmctc2Nyb2xsLWFycm93X2FjdGl2ZScpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH07XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNjcm9sbEJsb2Nrcy5sZW5ndGg7IGkrKykge1xuICAgICAgICBfbG9vcChpKTtcbiAgICB9XG5cbiAgICAvLyDQn9C+0LrQsNC30YvQstCw0LXQvCDQuNC70Lgg0YPQsdC40YDQsNC10Lwg0YHRgtGA0LXQu9C60YMgLSDQvdCw0L/QvtC80LjQvdCw0LvQutGDINCyINCz0LvQsNCy0L3QvtC8INCx0LvQvtC60LVcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdmYXZvci1jYXJkcycpWzBdLm9uc2Nyb2xsID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgcmVtaW5kZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdhcnJvdy1yZW1pbmRlcicpWzBdO1xuICAgICAgICBpZiAodGhpcy5zY3JvbGxUb3AgPT0gMCkge1xuICAgICAgICAgICAgcmVtaW5kZXIuY2xhc3NMaXN0LnJlbW92ZSgnYXJyb3ctcmVtaW5kZXJfaW5hY3RpdmUnKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJlbWluZGVyLmNsYXNzTGlzdC5hZGQoJ2Fycm93LXJlbWluZGVyX2luYWN0aXZlJyk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgLy8gZWxlbS5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdzdmctc2Nyb2xsLWFycm93JylbMF0ucmVtb3ZlKCdzY3JvbGwtY29udHJvbF9hY3RpdmUnKTtcbn0sIGZhbHNlKTsiLCJcInVzZSBzdHJpY3RcIjtcblxuZmlsdGVyU2VsZWN0aW9uKFwiYWxsXCIpO1xuXG5mdW5jdGlvbiBmaWx0ZXJTZWxlY3Rpb24oYykge1xuICAgIHZhciB4LCBpO1xuICAgIHggPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwiY2FyZF9ob3Jpc29udGFsLWZpbHRlclwiKTtcbiAgICBpZiAoYyA9PSBcImFsbFwiKSBjID0gXCJcIjtcbiAgICAvLyBBZGQgdGhlIFwiY2FyZF9ob3Jpc29udGFsLWZpbHRlci1zaG93XCIgY2xhc3MgKGRpc3BsYXk6YmxvY2spIHRvIHRoZSBmaWx0ZXJlZCBlbGVtZW50cywgYW5kIHJlbW92ZSB0aGUgXCJjYXJkX2hvcmlzb250YWwtZmlsdGVyLXNob3dcIiBjbGFzcyBmcm9tIHRoZSBlbGVtZW50cyB0aGF0IGFyZSBub3Qgc2VsZWN0ZWRcbiAgICBmb3IgKGkgPSAwOyBpIDwgeC5sZW5ndGg7IGkrKykge1xuICAgICAgICB3M1JlbW92ZUNsYXNzKHhbaV0sIFwiY2FyZF9ob3Jpc29udGFsLWZpbHRlci1zaG93XCIpO1xuICAgICAgICBpZiAoeFtpXS5jbGFzc05hbWUuaW5kZXhPZihjKSA+IC0xKSB3M0FkZENsYXNzKHhbaV0sIFwiY2FyZF9ob3Jpc29udGFsLWZpbHRlci1zaG93XCIpO1xuICAgIH1cbn1cblxuLy8gY2FyZF9ob3Jpc29udGFsLWZpbHRlci1zaG93IGZpbHRlcmVkIGVsZW1lbnRzXG5mdW5jdGlvbiB3M0FkZENsYXNzKGVsZW1lbnQsIG5hbWUpIHtcbiAgICB2YXIgaSwgYXJyMSwgYXJyMjtcbiAgICBhcnIxID0gZWxlbWVudC5jbGFzc05hbWUuc3BsaXQoXCIgXCIpO1xuICAgIGFycjIgPSBuYW1lLnNwbGl0KFwiIFwiKTtcbiAgICBmb3IgKGkgPSAwOyBpIDwgYXJyMi5sZW5ndGg7IGkrKykge1xuICAgICAgICBpZiAoYXJyMS5pbmRleE9mKGFycjJbaV0pID09IC0xKSB7XG4gICAgICAgICAgICBlbGVtZW50LmNsYXNzTmFtZSArPSBcIiBcIiArIGFycjJbaV07XG4gICAgICAgIH1cbiAgICB9XG59XG5cbi8vIEhpZGUgZWxlbWVudHMgdGhhdCBhcmUgbm90IHNlbGVjdGVkXG5mdW5jdGlvbiB3M1JlbW92ZUNsYXNzKGVsZW1lbnQsIG5hbWUpIHtcbiAgICB2YXIgaSwgYXJyMSwgYXJyMjtcbiAgICBhcnIxID0gZWxlbWVudC5jbGFzc05hbWUuc3BsaXQoXCIgXCIpO1xuICAgIGFycjIgPSBuYW1lLnNwbGl0KFwiIFwiKTtcbiAgICBmb3IgKGkgPSAwOyBpIDwgYXJyMi5sZW5ndGg7IGkrKykge1xuICAgICAgICB3aGlsZSAoYXJyMS5pbmRleE9mKGFycjJbaV0pID4gLTEpIHtcbiAgICAgICAgICAgIGFycjEuc3BsaWNlKGFycjEuaW5kZXhPZihhcnIyW2ldKSwgMSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxlbWVudC5jbGFzc05hbWUgPSBhcnIxLmpvaW4oXCIgXCIpO1xufVxuXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgZnVuY3Rpb24gKCkge1xuICAgIHZhciBidG5zID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcInNlbGVjdC1maWx0ZXJfX2l0ZW1cIik7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBidG5zLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGJ0bnNbaV0uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMucGFyZW50RWxlbWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwic2VsZWN0LWZpbHRlcl9faXRlbV9hY3RpdmVcIilbMF0uY2xhc3NMaXN0LnJlbW92ZShcInNlbGVjdC1maWx0ZXJfX2l0ZW1fYWN0aXZlXCIpO1xuICAgICAgICAgICAgdGhpcy5jbGFzc0xpc3QuYWRkKFwic2VsZWN0LWZpbHRlcl9faXRlbV9hY3RpdmVcIik7XG4gICAgICAgIH0pO1xuICAgIH1cbn0sIGZhbHNlKTsiXX0=
