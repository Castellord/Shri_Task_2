"use strict";function closeModal(){document.getElementsByClassName("modal-wrap_active")[0].classList.remove("modal-wrap_active"),document.getElementsByClassName("blur")[0].classList.remove("blur"),document.body.style.overflow="auto"}document.addEventListener("DOMContentLoaded",function(){var p=document.getElementsByClassName("knob__control")[0],L=document.getElementsByClassName("knob__value")[0],C=Array.from(document.getElementsByClassName("tick")),E=300,N=228,w=30,B=function(){for(var e=["transform","msTransform","webkitTransform","mozTransform","oTransform"],t=0;t<e.length;t++){var s=e[t];if(void 0!==document.body.style[s])return s}}();function o(e){return N=e&&N+2<=E?N+2:!e&&0<=N-2?N-2:N,function(){p.style[B]="rotate("+N+"deg)";var e=!0,t=!1,s=void 0;try{for(var o,n=C[Symbol.iterator]();!(e=(o=n.next()).done);e=!0){var a=o.value;a.classList.remove("active")}}catch(e){t=!0,s=e}finally{try{!e&&n.return&&n.return()}finally{if(t)throw s}}var l=Math.round(N/3-1);if(console.log(l),l<=0){var r=!0,i=!1,c=void 0;try{for(var m,d=C.slice(0,1)[Symbol.iterator]();!(r=(m=d.next()).done);r=!0){var v=m.value;v.classList.add("active")}}catch(e){i=!0,c=e}finally{try{!r&&d.return&&d.return()}finally{if(i)throw c}}}else{var u=!0,f=!1,g=void 0;try{for(var h,_=C.slice(0,l)[Symbol.iterator]();!(u=(h=_.next()).done);u=!0){var y=h.value;y.classList.add("active")}}catch(e){f=!0,g=e}finally{try{!u&&_.return&&_.return()}finally{if(f)throw g}}}L.innerHTML="+"+Math.ceil(w/100*Math.round(N/E*100))}()}var s=document.getElementsByClassName("knob")[0];s.onmousedown=function(e){var s=e.pageX;document.onmousemove=function(e){e.pageX>s?o(!0):o(!1),s=e.pageX;var t=document.getElementsByClassName("knob")[0];document.onmouseup=function(){document.onmousemove=null,t.onmouseup=null},p.ondragstart=function(){return!1}}},s.ontouchstart=function(e){var t=e.changedTouches[0].pageX;s.ontouchmove=function(e){e.changedTouches[0].pageX>t?o(!0):o(!1),t=e.changedTouches[0].pageX}}},!1),document.addEventListener("DOMContentLoaded",function(){for(var e=document.getElementsByClassName("device-filter__item"),t=0;t<e.length;t++)e[t].addEventListener("click",function(){var e=document.getElementsByClassName("device-filter__item");if(console.log(e),this.classList.contains("device-filter__item_active"))if(console.log("active"),console.log(this),this.classList.contains("device-filter__item_show")){console.log("true");for(var t=0;t<e.length;t++)e[t].classList.remove("device-filter__item_show")}else{console.log("false");for(t=0;t<e.length;t++)e[t].classList.add("device-filter__item_show")}else{document.getElementsByClassName("device-filter__item_active")[0].classList.remove("device-filter__item_active"),this.classList.add("device-filter__item_active");for(t=0;t<e.length;t++)e[t].classList.remove("device-filter__item_show")}})},!1),document.addEventListener("DOMContentLoaded",function(){for(var s=document.getElementsByClassName("modal-trigger"),e=function(t){s[t].addEventListener("click",function(){var e=String(s[t].getAttribute("data-modal"));document.getElementsByClassName(e)[0].classList.add("modal-wrap_active"),document.getElementsByClassName("wrap")[0].classList.add("blur"),document.body.style.overflow="hidden"})},t=0;t<s.length;t++)e(t)},!1);var container=void 0,step=void 0,promStep=void 0,nextPosition=void 0;function scrollTo(s){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1e3,n=s.scrollLeft,a=e-n,l=0;!function e(){l+=20;var t=Math.easeInOutQuad(l,n,a,o);s.scrollLeft=t,l<o&&setTimeout(e,20)}()}function scrollNext(e,t){container=document.getElementsByClassName(e)[0],step=container.hasAttribute("offset")?container.clientWidth-parseInt(container.getAttribute("offset")):container.clientWidth,promStep=Math.ceil(container.scrollLeft/step),nextPosition=Number.isInteger(Math.ceil(container.scrollLeft)/step)?(promStep+1)*step:promStep*step,scrollTo(container,nextPosition,500)}function scrollPrev(e){container=document.getElementsByClassName(e)[0],step=container.hasAttribute("offset")?container.clientWidth-parseInt(container.getAttribute("offset")):container.clientWidth,promStep=Math.floor(container.scrollLeft/step),nextPosition=Number.isInteger(container.scrollLeft/step)?(promStep-1)*step:promStep*step,scrollTo(container,nextPosition,500)}function filterSelection(e){var t,s;for(t=document.getElementsByClassName("card_horisontal-filter"),"all"==e&&(e=""),s=0;s<t.length;s++)w3RemoveClass(t[s],"card_horisontal-filter-show"),-1<t[s].className.indexOf(e)&&w3AddClass(t[s],"card_horisontal-filter-show")}function w3AddClass(e,t){var s,o,n;for(o=e.className.split(" "),n=t.split(" "),s=0;s<n.length;s++)-1==o.indexOf(n[s])&&(e.className+=" "+n[s])}function w3RemoveClass(e,t){var s,o,n;for(o=e.className.split(" "),n=t.split(" "),s=0;s<n.length;s++)for(;-1<o.indexOf(n[s]);)o.splice(o.indexOf(n[s]),1);e.className=o.join(" ")}Math.easeInOutQuad=function(e,t,s,o){return(e/=o/2)<1?s/2*e*e+t:-s/2*(--e*(e-2)-1)+t},document.addEventListener("DOMContentLoaded",function(){for(var a=document.getElementsByClassName("scroll-block"),e=function(e){var t=a[e],s=Array.prototype.slice.call(document.getElementsByClassName(String(t.dataset.controls))),o=s[0].getElementsByClassName("scroll-control__next")[0].getElementsByClassName("svg-scroll-arrow")[0],n=s[0].getElementsByClassName("scroll-control__prev")[0].getElementsByClassName("svg-scroll-arrow")[0];t.scrollWidth==t.clientWidth&&s[0].remove(),a[e].onscroll=function(){this.scrollWidth==this.scrollLeft+this.clientWidth?(o.classList.remove("svg-scroll-arrow_active"),n.classList.add("svg-scroll-arrow_active")):0==this.scrollLeft?(o.classList.add("svg-scroll-arrow_active"),n.classList.remove("svg-scroll-arrow_active")):(o.classList.add("svg-scroll-arrow_active"),n.classList.add("svg-scroll-arrow_active"))}},t=0;t<a.length;t++)e(t);document.getElementsByClassName("favor-cards")[0].onscroll=function(){var e=document.getElementsByClassName("arrow-reminder")[0];0==this.scrollTop?e.classList.remove("arrow-reminder_inactive"):e.classList.add("arrow-reminder_inactive")}},!1),filterSelection("all"),document.addEventListener("DOMContentLoaded",function(){for(var e=document.getElementsByClassName("select-filter__item"),t=0;t<e.length;t++)e[t].addEventListener("click",function(){this.parentElement.getElementsByClassName("select-filter__item_active")[0].classList.remove("select-filter__item_active"),this.classList.add("select-filter__item_active")})},!1);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImtub2IuanMiLCJtb2RhbC5qcyIsIm1vYmlsZS1zZWxlY3QuanMiLCJzY3JvbGwuanMiLCJzZWxlY3QuanMiXSwibmFtZXMiOlsiY2xvc2VNb2RhbCIsImRvY3VtZW50IiwiZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSIsImNsYXNzTGlzdCIsInJlbW92ZSIsImJvZHkiLCJzdHlsZSIsIm92ZXJmbG93IiwiYWRkRXZlbnRMaXN0ZW5lciIsImtub2IiLCJjdXJyIiwidGlja3MiLCJBcnJheSIsImZyb20iLCJtYXgiLCJhbmdsZSIsIm1heHRlbXAiLCJ0cmFuc2Zvcm0iLCJfYXJyIiwiX2kiLCJsZW5ndGgiLCJwcm9wIiwidHVybnRVcCIsImJvb2wiLCJfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uIiwiX2RpZEl0ZXJhdG9yRXJyb3IiLCJfaXRlcmF0b3JFcnJvciIsInVuZGVmaW5lZCIsIl9zdGVwIiwiX2l0ZXJhdG9yIiwiU3ltYm9sIiwiaXRlcmF0b3IiLCJuZXh0IiwiZG9uZSIsInRpY2siLCJ2YWx1ZSIsImVyciIsInJldHVybiIsImFjdGl2ZXMiLCJNYXRoIiwicm91bmQiLCJjb25zb2xlIiwibG9nIiwiX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbjIiLCJfZGlkSXRlcmF0b3JFcnJvcjIiLCJfaXRlcmF0b3JFcnJvcjIiLCJfc3RlcDIiLCJfaXRlcmF0b3IyIiwic2xpY2UiLCJfdGljayIsImFkZCIsIl9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24zIiwiX2RpZEl0ZXJhdG9yRXJyb3IzIiwiX2l0ZXJhdG9yRXJyb3IzIiwiX3N0ZXAzIiwiX2l0ZXJhdG9yMyIsIl90aWNrMiIsImlubmVySFRNTCIsImNlaWwiLCJzZXRBbmdsZSIsImtub2JhcmVhIiwib25tb3VzZWRvd24iLCJlIiwic3RhcnQiLCJwYWdlWCIsIm9ubW91c2Vtb3ZlIiwib25tb3VzZXVwIiwib25kcmFnc3RhcnQiLCJvbnRvdWNoc3RhcnQiLCJjaGFuZ2VkVG91Y2hlcyIsIm9udG91Y2htb3ZlIiwiYnRucyIsImkiLCJzaG93aXRlbXMiLCJ0aGlzIiwiY29udGFpbnMiLCJkIiwidHJpZ2dlcnMiLCJfbG9vcCIsIm1vZGFsQ2xhc3MiLCJTdHJpbmciLCJnZXRBdHRyaWJ1dGUiLCJjb250YWluZXIiLCJzdGVwIiwicHJvbVN0ZXAiLCJuZXh0UG9zaXRpb24iLCJzY3JvbGxUbyIsImVsZW1lbnQiLCJ0byIsImFyZ3VtZW50cyIsImR1cmF0aW9uIiwic2Nyb2xsTGVmdCIsImNoYW5nZSIsImN1cnJlbnRUaW1lIiwiYW5pbWF0ZVNjcm9sbCIsInZhbCIsImVhc2VJbk91dFF1YWQiLCJzZXRUaW1lb3V0Iiwic2Nyb2xsTmV4dCIsImJsb2NrIiwiZWxlbSIsImhhc0F0dHJpYnV0ZSIsImNsaWVudFdpZHRoIiwicGFyc2VJbnQiLCJOdW1iZXIiLCJpc0ludGVnZXIiLCJzY3JvbGxQcmV2IiwiZmxvb3IiLCJmaWx0ZXJTZWxlY3Rpb24iLCJjIiwieCIsInczUmVtb3ZlQ2xhc3MiLCJjbGFzc05hbWUiLCJpbmRleE9mIiwidzNBZGRDbGFzcyIsIm5hbWUiLCJhcnIxIiwiYXJyMiIsInNwbGl0Iiwic3BsaWNlIiwiam9pbiIsInQiLCJiIiwic2Nyb2xsQmxvY2tzIiwic2Nyb2xsQmxvY2siLCJjb250cm9scyIsInByb3RvdHlwZSIsImNhbGwiLCJkYXRhc2V0IiwicHJldiIsInNjcm9sbFdpZHRoIiwib25zY3JvbGwiLCJyZW1pbmRlciIsInNjcm9sbFRvcCIsInBhcmVudEVsZW1lbnQiXSwibWFwcGluZ3MiOiJBQUFBLGFDbUJBLFNBQUFBLGFBQ0FDLFNBQUFDLHVCQUFBLHFCQUFBLEdBQUFDLFVBQUFDLE9BQUEscUJBQ0FILFNBQUFDLHVCQUFBLFFBQUEsR0FBQUMsVUFBQUMsT0FBQSxRQUNBSCxTQUFBSSxLQUFBQyxNQUFBQyxTQUFBLE9EcEJBTixTQUFBTyxpQkFBQSxtQkFBQSxXQUVBLElBQUFDLEVBQUFSLFNBQUFDLHVCQUFBLGlCQUFBLEdBQ0FRLEVBQUFULFNBQUFDLHVCQUFBLGVBQUEsR0FD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QUFBLG1CQUFBLFdBRUEsSUFEQSxJQUFBK0QsRUFBQXRFLFNBQUFDLHVCQUFBLHVCQUNBc0UsRUFBQSxFQUFBQSxFQUFBRCxFQUFBbkQsT0FBQW9ELElBQ0FELEVBQUFDLEdBQUFoRSxpQkFBQSxRQUFBLFdBQ0FrRSxLQUFBNEQsY0FBQXBJLHVCQUFBLDhCQUFBLEdBQUFDLFVBQUFDLE9BQUEsOEJBQ0FzRSxLQUFBdkUsVUFBQStDLElBQUEsa0NBR0EiLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcblxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGZ1bmN0aW9uICgpIHtcblxuICAgIHZhciBrbm9iID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgna25vYl9fY29udHJvbCcpWzBdO1xuICAgIHZhciBjdXJyID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgna25vYl9fdmFsdWUnKVswXTtcbiAgICB2YXIgdGlja3MgPSBBcnJheS5mcm9tKGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ3RpY2snKSk7XG5cbiAgICB2YXIgbWluID0gMDtcbiAgICB2YXIgbWF4ID0gMzAwO1xuICAgIHZhciBhbmdsZSA9IDIyODtcbiAgICB2YXIgbWF4dGVtcCA9IDMwO1xuICAgIHZhciB0cmFuc2Zvcm0gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBfYXJyID0gWyd0cmFuc2Zvcm0nLCAnbXNUcmFuc2Zvcm0nLCAnd2Via2l0VHJhbnNmb3JtJywgJ21velRyYW5zZm9ybScsICdvVHJhbnNmb3JtJ107XG5cbiAgICAgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IF9hcnIubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICB2YXIgcHJvcCA9IF9hcnJbX2ldO1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBkb2N1bWVudC5ib2R5LnN0eWxlW3Byb3BdICE9ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHByb3A7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9KCk7XG5cbiAgICBmdW5jdGlvbiB0dXJudFVwKGJvb2wpIHtcbiAgICAgICAgYW5nbGUgPSBib29sICYmIGFuZ2xlICsgMiA8PSBtYXggPyBhbmdsZSArIDIgOiAhYm9vbCAmJiBhbmdsZSAtIDIgPj0gbWluID8gYW5nbGUgLSAyIDogYW5nbGU7XG4gICAgICAgIHJldHVybiBzZXRBbmdsZSgpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHNldEFuZ2xlKCkge1xuICAgICAgICAvLyByb3RhdGUga25vYlxuICAgICAgICBrbm9iLnN0eWxlW3RyYW5zZm9ybV0gPSAncm90YXRlKCcgKyBhbmdsZSArICdkZWcpJztcblxuICAgICAgICAvLyBxdWlja2x5IHJlc2V0IHRpY2tzXG4gICAgICAgIHZhciBfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uID0gdHJ1ZTtcbiAgICAgICAgdmFyIF9kaWRJdGVyYXRvckVycm9yID0gZmFsc2U7XG4gICAgICAgIHZhciBfaXRlcmF0b3JFcnJvciA9IHVuZGVmaW5lZDtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgZm9yICh2YXIgX2l0ZXJhdG9yID0gdGlja3NbU3ltYm9sLml0ZXJhdG9yXSgpLCBfc3RlcDsgIShfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uID0gKF9zdGVwID0gX2l0ZXJhdG9yLm5leHQoKSkuZG9uZSk7IF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24gPSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgdmFyIHRpY2sgPSBfc3RlcC52YWx1ZTtcblxuICAgICAgICAgICAgICAgIHRpY2suY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIGFkZCBnbG93IHRvICdhY3RpdmUnIHRpY2tzXG4gICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgX2RpZEl0ZXJhdG9yRXJyb3IgPSB0cnVlO1xuICAgICAgICAgICAgX2l0ZXJhdG9yRXJyb3IgPSBlcnI7XG4gICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGlmICghX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbiAmJiBfaXRlcmF0b3IucmV0dXJuKSB7XG4gICAgICAgICAgICAgICAgICAgIF9pdGVyYXRvci5yZXR1cm4oKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgICAgIGlmIChfZGlkSXRlcmF0b3JFcnJvcikge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBfaXRlcmF0b3JFcnJvcjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgYWN0aXZlcyA9IE1hdGgucm91bmQoYW5nbGUgLyAzIC0gMSk7XG4gICAgICAgIGNvbnNvbGUubG9nKGFjdGl2ZXMpO1xuICAgICAgICBpZiAoYWN0aXZlcyA8PSAwKSB7XG4gICAgICAgICAgICB2YXIgX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbjIgPSB0cnVlO1xuICAgICAgICAgICAgdmFyIF9kaWRJdGVyYXRvckVycm9yMiA9IGZhbHNlO1xuICAgICAgICAgICAgdmFyIF9pdGVyYXRvckVycm9yMiA9IHVuZGVmaW5lZDtcblxuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBfaXRlcmF0b3IyID0gdGlja3Muc2xpY2UoMCwgMSlbU3ltYm9sLml0ZXJhdG9yXSgpLCBfc3RlcDI7ICEoX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbjIgPSAoX3N0ZXAyID0gX2l0ZXJhdG9yMi5uZXh0KCkpLmRvbmUpOyBfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uMiA9IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIF90aWNrID0gX3N0ZXAyLnZhbHVlO1xuXG4gICAgICAgICAgICAgICAgICAgIF90aWNrLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgIF9kaWRJdGVyYXRvckVycm9yMiA9IHRydWU7XG4gICAgICAgICAgICAgICAgX2l0ZXJhdG9yRXJyb3IyID0gZXJyO1xuICAgICAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIV9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24yICYmIF9pdGVyYXRvcjIucmV0dXJuKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBfaXRlcmF0b3IyLnJldHVybigpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKF9kaWRJdGVyYXRvckVycm9yMikge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgX2l0ZXJhdG9yRXJyb3IyO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdmFyIF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24zID0gdHJ1ZTtcbiAgICAgICAgICAgIHZhciBfZGlkSXRlcmF0b3JFcnJvcjMgPSBmYWxzZTtcbiAgICAgICAgICAgIHZhciBfaXRlcmF0b3JFcnJvcjMgPSB1bmRlZmluZWQ7XG5cbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgX2l0ZXJhdG9yMyA9IHRpY2tzLnNsaWNlKDAsIGFjdGl2ZXMpW1N5bWJvbC5pdGVyYXRvcl0oKSwgX3N0ZXAzOyAhKF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24zID0gKF9zdGVwMyA9IF9pdGVyYXRvcjMubmV4dCgpKS5kb25lKTsgX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbjMgPSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBfdGljazIgPSBfc3RlcDMudmFsdWU7XG5cbiAgICAgICAgICAgICAgICAgICAgX3RpY2syLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgIF9kaWRJdGVyYXRvckVycm9yMyA9IHRydWU7XG4gICAgICAgICAgICAgICAgX2l0ZXJhdG9yRXJyb3IzID0gZXJyO1xuICAgICAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIV9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24zICYmIF9pdGVyYXRvcjMucmV0dXJuKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBfaXRlcmF0b3IzLnJldHVybigpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKF9kaWRJdGVyYXRvckVycm9yMykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgX2l0ZXJhdG9yRXJyb3IzO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gdXBkYXRlICUgdmFsdWUgYXMgdGV4dFxuICAgICAgICBjdXJyLmlubmVySFRNTCA9ICcrJyArIE1hdGguY2VpbChtYXh0ZW1wIC8gMTAwICogTWF0aC5yb3VuZChhbmdsZSAvIG1heCAqIDEwMCkpO1xuICAgIH1cblxuICAgIHZhciBrbm9iYXJlYSA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ2tub2InKVswXTtcblxuICAgIGtub2JhcmVhLm9ubW91c2Vkb3duID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgLy8gMS4g0L7RgtGB0LvQtdC00LjRgtGMINC90LDQttCw0YLQuNC1XG4gICAgICAgIHZhciBzdGFydCA9IGUucGFnZVg7XG4gICAgICAgIGRvY3VtZW50Lm9ubW91c2Vtb3ZlID0gZnVuY3Rpb24gKGUpIHtcblxuICAgICAgICAgICAgaWYgKGUucGFnZVggPiBzdGFydCkge1xuICAgICAgICAgICAgICAgIHR1cm50VXAodHJ1ZSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHR1cm50VXAoZmFsc2UpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBzdGFydCA9IGUucGFnZVg7XG4gICAgICAgICAgICB2YXIga25vYmFyZWEgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdrbm9iJylbMF07XG4gICAgICAgICAgICBkb2N1bWVudC5vbm1vdXNldXAgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgZG9jdW1lbnQub25tb3VzZW1vdmUgPSBudWxsO1xuICAgICAgICAgICAgICAgIGtub2JhcmVhLm9ubW91c2V1cCA9IG51bGw7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBrbm9iLm9uZHJhZ3N0YXJ0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH07XG4gICAgfTtcblxuICAgIGtub2JhcmVhLm9udG91Y2hzdGFydCA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIHZhciBzdGFydCA9IGUuY2hhbmdlZFRvdWNoZXNbMF0ucGFnZVg7XG4gICAgICAgIGtub2JhcmVhLm9udG91Y2htb3ZlID0gZnVuY3Rpb24gKGUpIHtcblxuICAgICAgICAgICAgaWYgKGUuY2hhbmdlZFRvdWNoZXNbMF0ucGFnZVggPiBzdGFydCkge1xuICAgICAgICAgICAgICAgIHR1cm50VXAodHJ1ZSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHR1cm50VXAoZmFsc2UpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBzdGFydCA9IGUuY2hhbmdlZFRvdWNoZXNbMF0ucGFnZVg7XG4gICAgICAgIH07IC8vICAgYWxlcnQoZS5jaGFuZ2VkVG91Y2hlc1swXS5wYWdlWCkgLy8g0L/QvtC60LDQtyDQutC+0YDRgNC00LjQvdCw0YIg0LzQtdGB0YLQsCDQv9GA0LjQutC+0YHQvdC+0LLQtdC90LjRjyDQv9C+IFgt0YMuXG4gICAgfTtcbn0sIGZhbHNlKTtcblxuLy8gZnVuY3Rpb24gZ2V0Q3VyQ29vcmRzSW5zaWRlUmVjdChlKSB7XG4vLyAgICAgdmFyIHggPSBlLm9mZnNldFggPT0gdW5kZWZpbmVkID8gZS5sYXllclggOiBlLm9mZnNldFg7XG4vLyAgICAgdmFyIHkgPSBlLm9mZnNldFkgPT0gdW5kZWZpbmVkID8gZS5sYXllclkgOiBlLm9mZnNldFk7XG5cbi8vICAgICBhbGVydCh4ICsgJ3gnICsgeSk7XG4vLyB9XG5cbi8vIGZ1bmN0aW9uIGdldEVsZW1lbnQoZSwgZWxlbWVudCkge1xuLy8gICAgIGdldEN1ckNvb3Jkc0luc2lkZVJlY3QoZSwgZWxlbWVudCk7XG4vLyB9IiwiJ3VzZSBzdHJpY3QnO1xuXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgZnVuY3Rpb24gKCkge1xuICAgIHZhciB0cmlnZ2VycyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ21vZGFsLXRyaWdnZXInKTtcblxuICAgIHZhciBfbG9vcCA9IGZ1bmN0aW9uIF9sb29wKGkpIHtcbiAgICAgICAgdHJpZ2dlcnNbaV0uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBtb2RhbENsYXNzID0gU3RyaW5nKHRyaWdnZXJzW2ldLmdldEF0dHJpYnV0ZSgnZGF0YS1tb2RhbCcpKTtcbiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUobW9kYWxDbGFzcylbMF0uY2xhc3NMaXN0LmFkZCgnbW9kYWwtd3JhcF9hY3RpdmUnKTtcbiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ3dyYXAnKVswXS5jbGFzc0xpc3QuYWRkKCdibHVyJyk7XG4gICAgICAgICAgICBkb2N1bWVudC5ib2R5LnN0eWxlLm92ZXJmbG93ID0gXCJoaWRkZW5cIjtcbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdHJpZ2dlcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgX2xvb3AoaSk7XG4gICAgfVxufSwgZmFsc2UpO1xuXG5mdW5jdGlvbiBjbG9zZU1vZGFsKCkge1xuICAgIGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ21vZGFsLXdyYXBfYWN0aXZlJylbMF0uY2xhc3NMaXN0LnJlbW92ZSgnbW9kYWwtd3JhcF9hY3RpdmUnKTtcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdibHVyJylbMF0uY2xhc3NMaXN0LnJlbW92ZSgnYmx1cicpO1xuICAgIGRvY3VtZW50LmJvZHkuc3R5bGUub3ZlcmZsb3cgPSBcImF1dG9cIjtcbn0iLCJcInVzZSBzdHJpY3RcIjtcblxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgYnRucyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJkZXZpY2UtZmlsdGVyX19pdGVtXCIpO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYnRucy5sZW5ndGg7IGkrKykge1xuICAgICAgICBidG5zW2ldLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgc2hvd2l0ZW1zID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcImRldmljZS1maWx0ZXJfX2l0ZW1cIik7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhzaG93aXRlbXMpO1xuICAgICAgICAgICAgaWYgKHRoaXMuY2xhc3NMaXN0LmNvbnRhaW5zKFwiZGV2aWNlLWZpbHRlcl9faXRlbV9hY3RpdmVcIikpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnYWN0aXZlJyk7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2codGhpcyk7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuY2xhc3NMaXN0LmNvbnRhaW5zKFwiZGV2aWNlLWZpbHRlcl9faXRlbV9zaG93XCIpKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwidHJ1ZVwiKTtcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgZCA9IDA7IGQgPCBzaG93aXRlbXMubGVuZ3RoOyBkKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNob3dpdGVtc1tkXS5jbGFzc0xpc3QucmVtb3ZlKFwiZGV2aWNlLWZpbHRlcl9faXRlbV9zaG93XCIpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJmYWxzZVwiKTtcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgZCA9IDA7IGQgPCBzaG93aXRlbXMubGVuZ3RoOyBkKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNob3dpdGVtc1tkXS5jbGFzc0xpc3QuYWRkKFwiZGV2aWNlLWZpbHRlcl9faXRlbV9zaG93XCIpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwiZGV2aWNlLWZpbHRlcl9faXRlbV9hY3RpdmVcIilbMF0uY2xhc3NMaXN0LnJlbW92ZShcImRldmljZS1maWx0ZXJfX2l0ZW1fYWN0aXZlXCIpO1xuICAgICAgICAgICAgICAgIHRoaXMuY2xhc3NMaXN0LmFkZChcImRldmljZS1maWx0ZXJfX2l0ZW1fYWN0aXZlXCIpO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGQgPSAwOyBkIDwgc2hvd2l0ZW1zLmxlbmd0aDsgZCsrKSB7XG4gICAgICAgICAgICAgICAgICAgIHNob3dpdGVtc1tkXS5jbGFzc0xpc3QucmVtb3ZlKFwiZGV2aWNlLWZpbHRlcl9faXRlbV9zaG93XCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxufSwgZmFsc2UpOyIsIid1c2Ugc3RyaWN0JztcblxudmFyIGNvbnRhaW5lciA9IHZvaWQgMDtcbnZhciBzdGVwID0gdm9pZCAwO1xudmFyIHByb21TdGVwID0gdm9pZCAwO1xudmFyIG5leHRQb3NpdGlvbiA9IHZvaWQgMDtcblxuZnVuY3Rpb24gc2Nyb2xsVG8oZWxlbWVudCkge1xuICAgIHZhciB0byA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogMDtcbiAgICB2YXIgZHVyYXRpb24gPSBhcmd1bWVudHMubGVuZ3RoID4gMiAmJiBhcmd1bWVudHNbMl0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1syXSA6IDEwMDA7XG5cblxuICAgIHZhciBzdGFydCA9IGVsZW1lbnQuc2Nyb2xsTGVmdDtcbiAgICB2YXIgY2hhbmdlID0gdG8gLSBzdGFydDtcbiAgICB2YXIgaW5jcmVtZW50ID0gMjA7XG4gICAgdmFyIGN1cnJlbnRUaW1lID0gMDtcblxuICAgIHZhciBhbmltYXRlU2Nyb2xsID0gZnVuY3Rpb24gYW5pbWF0ZVNjcm9sbCgpIHtcblxuICAgICAgICBjdXJyZW50VGltZSArPSBpbmNyZW1lbnQ7XG5cbiAgICAgICAgdmFyIHZhbCA9IE1hdGguZWFzZUluT3V0UXVhZChjdXJyZW50VGltZSwgc3RhcnQsIGNoYW5nZSwgZHVyYXRpb24pO1xuXG4gICAgICAgIGVsZW1lbnQuc2Nyb2xsTGVmdCA9IHZhbDtcblxuICAgICAgICBpZiAoY3VycmVudFRpbWUgPCBkdXJhdGlvbikge1xuICAgICAgICAgICAgc2V0VGltZW91dChhbmltYXRlU2Nyb2xsLCBpbmNyZW1lbnQpO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIGFuaW1hdGVTY3JvbGwoKTtcbn07XG5cbk1hdGguZWFzZUluT3V0UXVhZCA9IGZ1bmN0aW9uICh0LCBiLCBjLCBkKSB7XG5cbiAgICB0IC89IGQgLyAyO1xuICAgIGlmICh0IDwgMSkgcmV0dXJuIGMgLyAyICogdCAqIHQgKyBiO1xuICAgIHQtLTtcbiAgICByZXR1cm4gLWMgLyAyICogKHQgKiAodCAtIDIpIC0gMSkgKyBiO1xufTtcblxuZnVuY3Rpb24gc2Nyb2xsTmV4dChibG9jaywgZWxlbSkge1xuXG4gICAgY29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShibG9jaylbMF07XG5cbiAgICBpZiAoY29udGFpbmVyLmhhc0F0dHJpYnV0ZSgnb2Zmc2V0JykpIHtcbiAgICAgICAgc3RlcCA9IGNvbnRhaW5lci5jbGllbnRXaWR0aCAtIHBhcnNlSW50KGNvbnRhaW5lci5nZXRBdHRyaWJ1dGUoJ29mZnNldCcpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBzdGVwID0gY29udGFpbmVyLmNsaWVudFdpZHRoO1xuICAgIH1cbiAgICBwcm9tU3RlcCA9IE1hdGguY2VpbChjb250YWluZXIuc2Nyb2xsTGVmdCAvIHN0ZXApO1xuXG4gICAgaWYgKE51bWJlci5pc0ludGVnZXIoTWF0aC5jZWlsKGNvbnRhaW5lci5zY3JvbGxMZWZ0KSAvIHN0ZXApKSB7XG4gICAgICAgIG5leHRQb3NpdGlvbiA9IChwcm9tU3RlcCArIDEpICogc3RlcDtcbiAgICB9IGVsc2Uge1xuICAgICAgICBuZXh0UG9zaXRpb24gPSBwcm9tU3RlcCAqIHN0ZXA7XG4gICAgfVxuICAgIHNjcm9sbFRvKGNvbnRhaW5lciwgbmV4dFBvc2l0aW9uLCA1MDApO1xufTtcblxuZnVuY3Rpb24gc2Nyb2xsUHJldihibG9jaykge1xuXG4gICAgY29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShibG9jaylbMF07XG5cbiAgICBpZiAoY29udGFpbmVyLmhhc0F0dHJpYnV0ZSgnb2Zmc2V0JykpIHtcbiAgICAgICAgc3RlcCA9IGNvbnRhaW5lci5jbGllbnRXaWR0aCAtIHBhcnNlSW50KGNvbnRhaW5lci5nZXRBdHRyaWJ1dGUoJ29mZnNldCcpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBzdGVwID0gY29udGFpbmVyLmNsaWVudFdpZHRoO1xuICAgIH1cbiAgICBwcm9tU3RlcCA9IE1hdGguZmxvb3IoY29udGFpbmVyLnNjcm9sbExlZnQgLyBzdGVwKTtcbiAgICBpZiAoTnVtYmVyLmlzSW50ZWdlcihjb250YWluZXIuc2Nyb2xsTGVmdCAvIHN0ZXApKSB7XG4gICAgICAgIG5leHRQb3NpdGlvbiA9IChwcm9tU3RlcCAtIDEpICogc3RlcDtcbiAgICB9IGVsc2Uge1xuICAgICAgICBuZXh0UG9zaXRpb24gPSBwcm9tU3RlcCAqIHN0ZXA7XG4gICAgfVxuXG4gICAgc2Nyb2xsVG8oY29udGFpbmVyLCBuZXh0UG9zaXRpb24sIDUwMCk7XG59O1xuXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgZnVuY3Rpb24gKCkge1xuICAgIHZhciBzY3JvbGxCbG9ja3MgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdzY3JvbGwtYmxvY2snKTtcblxuICAgIHZhciBfbG9vcCA9IGZ1bmN0aW9uIF9sb29wKGkpIHtcbiAgICAgICAgdmFyIHNjcm9sbEJsb2NrID0gc2Nyb2xsQmxvY2tzW2ldO1xuICAgICAgICB2YXIgY29udHJvbHMgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFN0cmluZyhzY3JvbGxCbG9jay5kYXRhc2V0LmNvbnRyb2xzKSkpO1xuICAgICAgICB2YXIgbmV4dCA9IGNvbnRyb2xzWzBdLmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ3Njcm9sbC1jb250cm9sX19uZXh0JylbMF0uZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnc3ZnLXNjcm9sbC1hcnJvdycpWzBdO1xuICAgICAgICB2YXIgcHJldiA9IGNvbnRyb2xzWzBdLmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ3Njcm9sbC1jb250cm9sX19wcmV2JylbMF0uZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnc3ZnLXNjcm9sbC1hcnJvdycpWzBdO1xuICAgICAgICBpZiAoc2Nyb2xsQmxvY2suc2Nyb2xsV2lkdGggPT0gc2Nyb2xsQmxvY2suY2xpZW50V2lkdGgpIHtcbiAgICAgICAgICAgIGNvbnRyb2xzWzBdLnJlbW92ZSgpO1xuICAgICAgICB9XG5cbiAgICAgICAgc2Nyb2xsQmxvY2tzW2ldLm9uc2Nyb2xsID0gZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICAvLyBsZXQgZWxlbSA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ2Zhdm9yLWRldmljZXMnKVswXVxuICAgICAgICAgICAgaWYgKHRoaXMuc2Nyb2xsV2lkdGggPT0gdGhpcy5zY3JvbGxMZWZ0ICsgdGhpcy5jbGllbnRXaWR0aCkge1xuICAgICAgICAgICAgICAgIG5leHQuY2xhc3NMaXN0LnJlbW92ZSgnc3ZnLXNjcm9sbC1hcnJvd19hY3RpdmUnKTtcbiAgICAgICAgICAgICAgICBwcmV2LmNsYXNzTGlzdC5hZGQoJ3N2Zy1zY3JvbGwtYXJyb3dfYWN0aXZlJyk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuc2Nyb2xsTGVmdCA9PSAwKSB7XG4gICAgICAgICAgICAgICAgbmV4dC5jbGFzc0xpc3QuYWRkKCdzdmctc2Nyb2xsLWFycm93X2FjdGl2ZScpO1xuICAgICAgICAgICAgICAgIHByZXYuY2xhc3NMaXN0LnJlbW92ZSgnc3ZnLXNjcm9sbC1hcnJvd19hY3RpdmUnKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgbmV4dC5jbGFzc0xpc3QuYWRkKCdzdmctc2Nyb2xsLWFycm93X2FjdGl2ZScpO1xuICAgICAgICAgICAgICAgIHByZXYuY2xhc3NMaXN0LmFkZCgnc3ZnLXNjcm9sbC1hcnJvd19hY3RpdmUnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9O1xuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzY3JvbGxCbG9ja3MubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgX2xvb3AoaSk7XG4gICAgfVxuXG4gICAgLy8g0J/QvtC60LDQt9GL0LLQsNC10Lwg0LjQu9C4INGD0LHQuNGA0LDQtdC8INGB0YLRgNC10LvQutGDIC0g0L3QsNC/0L7QvNC40L3QsNC70LrRgyDQsiDQs9C70LDQstC90L7QvCDQsdC70L7QutC1XG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnZmF2b3ItY2FyZHMnKVswXS5vbnNjcm9sbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHJlbWluZGVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnYXJyb3ctcmVtaW5kZXInKVswXTtcbiAgICAgICAgaWYgKHRoaXMuc2Nyb2xsVG9wID09IDApIHtcbiAgICAgICAgICAgIHJlbWluZGVyLmNsYXNzTGlzdC5yZW1vdmUoJ2Fycm93LXJlbWluZGVyX2luYWN0aXZlJyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZW1pbmRlci5jbGFzc0xpc3QuYWRkKCdhcnJvdy1yZW1pbmRlcl9pbmFjdGl2ZScpO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIC8vIGVsZW0uZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnc3ZnLXNjcm9sbC1hcnJvdycpWzBdLnJlbW92ZSgnc2Nyb2xsLWNvbnRyb2xfYWN0aXZlJyk7XG59LCBmYWxzZSk7IiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbmZpbHRlclNlbGVjdGlvbihcImFsbFwiKTtcblxuZnVuY3Rpb24gZmlsdGVyU2VsZWN0aW9uKGMpIHtcbiAgICB2YXIgeCwgaTtcbiAgICB4ID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcImNhcmRfaG9yaXNvbnRhbC1maWx0ZXJcIik7XG4gICAgaWYgKGMgPT0gXCJhbGxcIikgYyA9IFwiXCI7XG4gICAgLy8gQWRkIHRoZSBcImNhcmRfaG9yaXNvbnRhbC1maWx0ZXItc2hvd1wiIGNsYXNzIChkaXNwbGF5OmJsb2NrKSB0byB0aGUgZmlsdGVyZWQgZWxlbWVudHMsIGFuZCByZW1vdmUgdGhlIFwiY2FyZF9ob3Jpc29udGFsLWZpbHRlci1zaG93XCIgY2xhc3MgZnJvbSB0aGUgZWxlbWVudHMgdGhhdCBhcmUgbm90IHNlbGVjdGVkXG4gICAgZm9yIChpID0gMDsgaSA8IHgubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdzNSZW1vdmVDbGFzcyh4W2ldLCBcImNhcmRfaG9yaXNvbnRhbC1maWx0ZXItc2hvd1wiKTtcbiAgICAgICAgaWYgKHhbaV0uY2xhc3NOYW1lLmluZGV4T2YoYykgPiAtMSkgdzNBZGRDbGFzcyh4W2ldLCBcImNhcmRfaG9yaXNvbnRhbC1maWx0ZXItc2hvd1wiKTtcbiAgICB9XG59XG5cbi8vIGNhcmRfaG9yaXNvbnRhbC1maWx0ZXItc2hvdyBmaWx0ZXJlZCBlbGVtZW50c1xuZnVuY3Rpb24gdzNBZGRDbGFzcyhlbGVtZW50LCBuYW1lKSB7XG4gICAgdmFyIGksIGFycjEsIGFycjI7XG4gICAgYXJyMSA9IGVsZW1lbnQuY2xhc3NOYW1lLnNwbGl0KFwiIFwiKTtcbiAgICBhcnIyID0gbmFtZS5zcGxpdChcIiBcIik7XG4gICAgZm9yIChpID0gMDsgaSA8IGFycjIubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaWYgKGFycjEuaW5kZXhPZihhcnIyW2ldKSA9PSAtMSkge1xuICAgICAgICAgICAgZWxlbWVudC5jbGFzc05hbWUgKz0gXCIgXCIgKyBhcnIyW2ldO1xuICAgICAgICB9XG4gICAgfVxufVxuXG4vLyBIaWRlIGVsZW1lbnRzIHRoYXQgYXJlIG5vdCBzZWxlY3RlZFxuZnVuY3Rpb24gdzNSZW1vdmVDbGFzcyhlbGVtZW50LCBuYW1lKSB7XG4gICAgdmFyIGksIGFycjEsIGFycjI7XG4gICAgYXJyMSA9IGVsZW1lbnQuY2xhc3NOYW1lLnNwbGl0KFwiIFwiKTtcbiAgICBhcnIyID0gbmFtZS5zcGxpdChcIiBcIik7XG4gICAgZm9yIChpID0gMDsgaSA8IGFycjIubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgd2hpbGUgKGFycjEuaW5kZXhPZihhcnIyW2ldKSA+IC0xKSB7XG4gICAgICAgICAgICBhcnIxLnNwbGljZShhcnIxLmluZGV4T2YoYXJyMltpXSksIDEpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGVsZW1lbnQuY2xhc3NOYW1lID0gYXJyMS5qb2luKFwiIFwiKTtcbn1cblxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgYnRucyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJzZWxlY3QtZmlsdGVyX19pdGVtXCIpO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYnRucy5sZW5ndGg7IGkrKykge1xuICAgICAgICBidG5zW2ldLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLnBhcmVudEVsZW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcInNlbGVjdC1maWx0ZXJfX2l0ZW1fYWN0aXZlXCIpWzBdLmNsYXNzTGlzdC5yZW1vdmUoXCJzZWxlY3QtZmlsdGVyX19pdGVtX2FjdGl2ZVwiKTtcbiAgICAgICAgICAgIHRoaXMuY2xhc3NMaXN0LmFkZChcInNlbGVjdC1maWx0ZXJfX2l0ZW1fYWN0aXZlXCIpO1xuICAgICAgICB9KTtcbiAgICB9XG59LCBmYWxzZSk7Il19
